const __vite__fileDeps=["assets/slidev/shiki-cVhjGAe3.js","assets/monaco/bundled-types-B2pegga4.js","assets/modules/vue-qDBvoHgk.js","assets/modules/file-saver-DY7lxZlc.js","assets/monaco/bundled-types-BRmEmvcP.css","assets/modules/shiki-BnrpArDE.js","assets/modules/shiki-BSchMNmt.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var MT=Object.defineProperty;var PT=(e,t,r)=>t in e?MT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var d=(e,t,r)=>(PT(e,typeof t!="symbol"?t+"":t,r),r),pd=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var gd=(e,t,r)=>(pd(e,t,"read from private field"),r?r.call(e):t.get(e)),md=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ed=(e,t,r,n)=>(pd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{k as $T,_ as ko,f as NT,l as Op,n as kc}from"./monaco/bundled-types-B2pegga4.js";import{d as Cl,t as pt,E as wT,o as Oe,b as je,a7 as CT,y as Ap,Q as LT,ac as Rp,aC as kT,aD as xT,D as DT,aa as FT,an as UT,e as mu,x as xc,H as Mn,F as ks,ad as Sd,c as Ip,i as jT,g as Eu,h as Mp,l as yd,k as BT,aE as GT,n as Dc}from"./modules/vue-qDBvoHgk.js";import{l as vd}from"./lz-string-BTt4z63d.js";import{_ as Ll,a as Pp,an as Su}from"./index-Do_Fusig.js";import{u as $p}from"./slidev/context-C-TBvdeV.js";import{N as VT}from"./modules/unplugin-icons-Db5cH8pe.js";import{g as ns,c as yr}from"./modules/file-saver-DY7lxZlc.js";import{I as HT}from"./slidev/IconButton-Djw6IbQb.js";const Np=e=>({success:!0,value:e}),zT=e=>({success:!1,error:e}),KT=e=>t=>t.success?Np(e(t.value)):t,qT=e=>t=>t.success?e(t.value):t,WT=e=>t=>(t.success&&e(t.value),t),XT=({acquire:e,release:t})=>r=>{const n=e();if(n.success){const s=r(n.value);return t(n.value),s}else return n},YT=Object.freeze(Object.defineProperty({__proto__:null,fail:zT,flatMap:qT,map:KT,success:Np,tap:WT,use:XT},Symbol.toStringTag,{value:"Module"}));function JT(e,t,r,n){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));default:{let s=arguments[0];for(let i=1;i<arguments.length;i++)s=arguments[i](s);return s}}}const QT=Object.freeze(Object.defineProperty({__proto__:null,pipe:JT},Symbol.toStringTag,{value:"Module"}));var ZT=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Dr="1.8.0",Td=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function eb(e){var t=new Set([e]),r=new Set,n=e.match(Td);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(s.prerelease!=null)return function(c){return c===e};function i(a){return r.add(a),!1}function o(a){return t.add(a),!0}return function(c){if(t.has(c))return!0;if(r.has(c))return!1;var u=c.match(Td);if(!u)return i(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||s.major!==l.major?i(c):s.major===0?s.minor===l.minor&&s.patch<=l.patch?o(c):i(c):s.minor<=l.minor?o(c):i(c)}}var tb=eb(Dr),rb=Dr.split(".")[0],Qs=Symbol.for("opentelemetry.js.api."+rb),Zs=ZT;function vi(e,t,r,n){var s;n===void 0&&(n=!1);var i=Zs[Qs]=(s=Zs[Qs])!==null&&s!==void 0?s:{version:Dr};if(!n&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(i.version!==Dr){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Dr);return r.error(o.stack||o.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Dr+"."),!0}function Wr(e){var t,r,n=(t=Zs[Qs])===null||t===void 0?void 0:t.version;if(!(!n||!tb(n)))return(r=Zs[Qs])===null||r===void 0?void 0:r[e]}function Ti(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Dr+".");var r=Zs[Qs];r&&delete r[e]}var nb=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},sb=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},ib=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xs("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xs("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xs("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xs("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xs("verbose",this._namespace,t)},e}();function xs(e,t,r){var n=Wr("diag");if(n)return r.unshift(t),n[e].apply(n,sb([],nb(r),!1))}var de;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(de||(de={}));function ob(e,t){e<de.NONE?e=de.NONE:e>de.ALL&&(e=de.ALL),t=t||{};function r(n,s){var i=t[n];return typeof i=="function"&&e>=s?i.bind(t):function(){}}return{error:r("error",de.ERROR),warn:r("warn",de.WARN),info:r("info",de.INFO),debug:r("debug",de.DEBUG),verbose:r("verbose",de.VERBOSE)}}var ab=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},cb=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},ub="diag",Bt=function(){function e(){function t(s){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=Wr("diag");if(a)return a[s].apply(a,cb([],ab(i),!1))}}var r=this,n=function(s,i){var o,a,c;if(i===void 0&&(i={logLevel:de.INFO}),s===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof i=="number"&&(i={logLevel:i});var l=Wr("diag"),h=ob((a=i.logLevel)!==null&&a!==void 0?a:de.INFO,s);if(l&&!i.suppressOverrideMessage){var _=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+_),h.warn("Current logger will overwrite one already registered from "+_)}return vi("diag",h,r,!0)};r.setLogger=n,r.disable=function(){Ti(ub,r)},r.createComponentLogger=function(s){return new ib(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),lb=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},fb=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hb=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=lb(t,2),n=r[0],s=r[1];return[n,s]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=new e(this._entries);try{for(var o=fb(n),a=o.next();!a.done;a=o.next()){var c=a.value;i._entries.delete(c)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),db=Symbol("BaggageEntryMetadata"),_b=Bt.instance();function pb(e){return e===void 0&&(e={}),new hb(new Map(Object.entries(e)))}function wp(e){return typeof e!="string"&&(_b.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:db,toString:function(){return e}}}function bi(e){return Symbol.for(e)}var gb=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,s){var i=new e(r._currentContext);return i._currentContext.set(n,s),i},r.deleteValue=function(n){var s=new e(r._currentContext);return s._currentContext.delete(n),s}}return e}(),kr=new gb,Fc=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],mb=function(){function e(){function t(n){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,s)}}}for(var r=0;r<Fc.length;r++)this[Fc[r].n]=t(Fc[r].c)}return e}(),ss=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eb=function(){function e(){}return e.prototype.createHistogram=function(t,r){return Rb},e.prototype.createCounter=function(t,r){return Ab},e.prototype.createUpDownCounter=function(t,r){return Ib},e.prototype.createObservableGauge=function(t,r){return Pb},e.prototype.createObservableCounter=function(t,r){return Mb},e.prototype.createObservableUpDownCounter=function(t,r){return $b},e.prototype.addBatchObservableCallback=function(t,r){},e.prototype.removeBatchObservableCallback=function(t){},e}(),kl=function(){function e(){}return e}(),Sb=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(r,n){},t}(kl),yb=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(r,n){},t}(kl),vb=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(r,n){},t}(kl),xl=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),Tb=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xl),bb=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xl),Ob=function(e){ss(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xl),Cp=new Eb,Ab=new Sb,Rb=new vb,Ib=new yb,Mb=new Tb,Pb=new bb,$b=new Ob;function Nb(){return Cp}var Xr;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(Xr||(Xr={}));var Lp={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},kp={set:function(e,t,r){e!=null&&(e[t]=r)}},wb=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Cb=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Lb=function(){function e(){}return e.prototype.active=function(){return kr},e.prototype.with=function(t,r,n){for(var s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return r.call.apply(r,Cb([n],wb(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),kb=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},xb=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Uc="context",Db=new Lb,ya=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return vi(Uc,t,Bt.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var s,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,xb([t,r,n],kb(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Wr(Uc)||Db},e.prototype.disable=function(){this._getContextManager().disable(),Ti(Uc,Bt.instance())},e}(),ie;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ie||(ie={}));var Dl="0000000000000000",Fl="00000000000000000000000000000000",Ul={traceId:Fl,spanId:Dl,traceFlags:ie.NONE},zs=function(){function e(t){t===void 0&&(t=Ul),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}(),jl=bi("OpenTelemetry Context Key SPAN");function Bl(e){return e.getValue(jl)||void 0}function Fb(){return Bl(ya.getInstance().active())}function Gl(e,t){return e.setValue(jl,t)}function Ub(e){return e.deleteValue(jl)}function jb(e,t){return Gl(e,new zs(t))}function xp(e){var t;return(t=Bl(e))===null||t===void 0?void 0:t.spanContext()}var Bb=/^([0-9a-f]{32})$/i,Gb=/^[0-9a-f]{16}$/i;function Oi(e){return Bb.test(e)&&e!==Fl}function va(e){return Gb.test(e)&&e!==Dl}function ln(e){return Oi(e.traceId)&&va(e.spanId)}function Vb(e){return new zs(e)}var jc=ya.getInstance(),Dp=function(){function e(){}return e.prototype.startSpan=function(t,r,n){n===void 0&&(n=jc.active());var s=!!(r!=null&&r.root);if(s)return new zs;var i=n&&xp(n);return Hb(i)&&ln(i)?new zs(i):new zs},e.prototype.startActiveSpan=function(t,r,n,s){var i,o,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,o=n,a=s);var c=o??jc.active(),u=this.startSpan(t,i,c),l=Gl(c,u);return jc.with(l,a,void 0,u)}},e}();function Hb(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var zb=new Dp,Fp=function(){function e(t,r,n,s){this._provider=t,this.name=r,this.version=n,this.options=s}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,s){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):zb},e}(),Kb=function(){function e(){}return e.prototype.getTracer=function(t,r,n){return new Dp},e}(),qb=new Kb,yu=function(){function e(){}return e.prototype.getTracer=function(t,r,n){var s;return(s=this.getDelegateTracer(t,r,n))!==null&&s!==void 0?s:new Fp(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:qb},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,n)},e}(),ei;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ei||(ei={}));var Zt;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Zt||(Zt={}));var Ur;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Ur||(Ur={}));var vu="[_0-9a-z-*/]",Wb="[a-z]"+vu+"{0,255}",Xb="[a-z0-9]"+vu+"{0,240}@[a-z]"+vu+"{0,13}",Yb=new RegExp("^(?:"+Wb+"|"+Xb+")$"),Jb=/^[ -~]{0,255}[!-~]$/,Qb=/,|=/;function Zb(e){return Yb.test(e)}function eO(e){return Jb.test(e)&&!Qb.test(e)}var bd=32,tO=512,Od=",",Ad="=",rO=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+Ad+t.get(n)),r},[]).join(Od)},e.prototype._parse=function(t){t.length>tO||(this._internalState=t.split(Od).reverse().reduce(function(r,n){var s=n.trim(),i=s.indexOf(Ad);if(i!==-1){var o=s.slice(0,i),a=s.slice(i+1,n.length);Zb(o)&&eO(a)&&r.set(o,a)}return r},new Map),this._internalState.size>bd&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,bd))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function Up(e){return new rO(e)}var ut=ya.getInstance(),Y=Bt.instance(),nO=function(){function e(){}return e.prototype.getMeter=function(t,r,n){return Cp},e}(),sO=new nO,Bc="metrics",iO=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return vi(Bc,t,Bt.instance())},e.prototype.getMeterProvider=function(){return Wr(Bc)||sO},e.prototype.getMeter=function(t,r,n){return this.getMeterProvider().getMeter(t,r,n)},e.prototype.disable=function(){Ti(Bc,Bt.instance())},e}(),jp=iO.getInstance(),oO=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}(),Vl=bi("OpenTelemetry Baggage Key");function Bp(e){return e.getValue(Vl)||void 0}function aO(){return Bp(ya.getInstance().active())}function cO(e,t){return e.setValue(Vl,t)}function uO(e){return e.deleteValue(Vl)}var Gc="propagation",lO=new oO,fO=function(){function e(){this.createBaggage=pb,this.getBaggage=Bp,this.getActiveBaggage=aO,this.setBaggage=cO,this.deleteBaggage=uO}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return vi(Gc,t,Bt.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=kp),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=Lp),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Ti(Gc,Bt.instance())},e.prototype._getGlobalPropagator=function(){return Wr(Gc)||lO},e}(),jt=fO.getInstance(),Vc="trace",hO=function(){function e(){this._proxyTracerProvider=new yu,this.wrapSpanContext=Vb,this.isSpanContextValid=ln,this.deleteSpan=Ub,this.getSpan=Bl,this.getActiveSpan=Fb,this.getSpanContext=xp,this.setSpan=Gl,this.setSpanContext=jb}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=vi(Vc,this._proxyTracerProvider,Bt.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Wr(Vc)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Ti(Vc,Bt.instance()),this._proxyTracerProvider=new yu},e}(),pe=hO.getInstance();const dO={context:ut,diag:Y,metrics:jp,propagation:jt,trace:pe},_O=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:mb,get DiagLogLevel(){return de},INVALID_SPANID:Dl,INVALID_SPAN_CONTEXT:Ul,INVALID_TRACEID:Fl,ProxyTracer:Fp,ProxyTracerProvider:yu,ROOT_CONTEXT:kr,get SamplingDecision(){return ei},get SpanKind(){return Zt},get SpanStatusCode(){return Ur},get TraceFlags(){return ie},get ValueType(){return Xr},baggageEntryMetadataFromString:wp,context:ut,createContextKey:bi,createNoopMeter:Nb,createTraceState:Up,default:dO,defaultTextMapGetter:Lp,defaultTextMapSetter:kp,diag:Y,isSpanContextValid:ln,isValidSpanId:va,isValidTraceId:Oi,metrics:jp,propagation:jt,trace:pe},Symbol.toStringTag,{value:"Module"}));var Yt;(function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"})(Yt||(Yt={}));var Jt;(function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"})(Jt||(Jt={}));var Dt;(function(e){e.COUNTER="COUNTER",e.GAUGE="GAUGE",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(Dt||(Dt={}));var Gp=bi("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Vp(e){return e.setValue(Gp,!0)}function fn(e){return e.getValue(Gp)===!0}var pO="=",Tu=";",bu=",",Hc="baggage",gO=180,mO=4096,EO=8192,SO=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function yO(e){return e.reduce(function(t,r){var n=""+t+(t!==""?bu:"")+r;return n.length>EO?t:n},"")}function vO(e){return e.getAllEntries().map(function(t){var r=SO(t,2),n=r[0],s=r[1],i=encodeURIComponent(n)+"="+encodeURIComponent(s.value);return s.metadata!==void 0&&(i+=Tu+s.metadata.toString()),i})}function TO(e){var t=e.split(Tu);if(!(t.length<=0)){var r=t.shift();if(r){var n=r.indexOf(pO);if(!(n<=0)){var s=decodeURIComponent(r.substring(0,n).trim()),i=decodeURIComponent(r.substring(n+1).trim()),o;return t.length>0&&(o=wp(t.join(Tu))),{key:s,value:i,metadata:o}}}}}var bO=function(){function e(){}return e.prototype.inject=function(t,r,n){var s=jt.getBaggage(t);if(!(!s||fn(t))){var i=vO(s).filter(function(a){return a.length<=mO}).slice(0,gO),o=yO(i);o.length>0&&n.set(r,Hc,o)}},e.prototype.extract=function(t,r,n){var s=n.get(r,Hc),i=Array.isArray(s)?s.join(bu):s;if(!i)return t;var o={};if(i.length===0)return t;var a=i.split(bu);return a.forEach(function(c){var u=TO(c);if(u){var l={value:u.value};u.metadata&&(l.metadata=u.metadata),o[u.key]=l}}),Object.entries(o).length===0?t:jt.setBaggage(t,jt.createBaggage(o))},e.prototype.fields=function(){return[Hc]},e}(),Hp=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OO=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function _o(e){var t,r,n={};if(typeof e!="object"||e==null)return n;try{for(var s=Hp(Object.entries(e)),i=s.next();!i.done;i=s.next()){var o=OO(i.value,2),a=o[0],c=o[1];if(!AO(a)){Y.warn("Invalid attribute key: "+a);continue}if(!zp(c)){Y.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(c)?n[a]=c.slice():n[a]=c}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return n}function AO(e){return typeof e=="string"&&e.length>0}function zp(e){return e==null?!0:Array.isArray(e)?RO(e):Kp(e)}function RO(e){var t,r,n;try{for(var s=Hp(e),i=s.next();!i.done;i=s.next()){var o=i.value;if(o!=null){if(!n){if(Kp(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(a){t={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0}function Kp(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function IO(){return function(e){Y.error(MO(e))}}function MO(e){return typeof e=="string"?e:JSON.stringify(PO(e))}function PO(e){for(var t={},r=e;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!t[n]){var s=r[n];s&&(t[n]=String(s))}}),r=Object.getPrototypeOf(r);return t}var $O=IO();function jr(e){try{$O(e)}catch{}}var kt;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(kt||(kt={}));var NO=",",wO=["OTEL_SDK_DISABLED"];function CO(e){return wO.indexOf(e)>-1}var LO=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function kO(e){return LO.indexOf(e)>-1}var xO=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function DO(e){return xO.indexOf(e)>-1}var po=1/0,go=128,FO=128,UO=128,qp={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:de.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:po,OTEL_ATTRIBUTE_COUNT_LIMIT:go,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:po,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:go,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:po,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:go,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:FO,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:UO,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:kt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function jO(e,t,r){if(!(typeof r[e]>"u")){var n=String(r[e]);t[e]=n.toLowerCase()==="true"}}function BO(e,t,r,n,s){if(n===void 0&&(n=-1/0),s===void 0&&(s=1/0),typeof r[e]<"u"){var i=Number(r[e]);isNaN(i)||(i<n?t[e]=n:i>s?t[e]=s:t[e]=i)}}function GO(e,t,r,n){n===void 0&&(n=NO);var s=r[e];typeof s=="string"&&(t[e]=s.split(n).map(function(i){return i.trim()}))}var VO={ALL:de.ALL,VERBOSE:de.VERBOSE,DEBUG:de.DEBUG,INFO:de.INFO,WARN:de.WARN,ERROR:de.ERROR,NONE:de.NONE};function HO(e,t,r){var n=r[e];if(typeof n=="string"){var s=VO[n.toUpperCase()];s!=null&&(t[e]=s)}}function Wp(e){var t={};for(var r in qp){var n=r;switch(n){case"OTEL_LOG_LEVEL":HO(n,t,e);break;default:if(CO(n))jO(n,t,e);else if(kO(n))BO(n,t,e);else if(DO(n))GO(n,t,e);else{var s=e[n];typeof s<"u"&&s!==null&&(t[n]=String(s))}}}return t}var Xp=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function ot(){var e=Wp(Xp);return Object.assign({},qp,e)}function zO(){return Wp(Xp)}var Ln=performance,KO="1.24.1";function Hl(e){for(var t={},r=e.length,n=0;n<r;n++){var s=e[n];s&&(t[String(s).toUpperCase().replace(/[-.]/g,"_")]=s)}return t}var qO="aws.lambda.invoked_arn",WO="db.system",XO="db.connection_string",YO="db.user",JO="db.jdbc.driver_classname",QO="db.name",ZO="db.statement",eA="db.operation",tA="db.mssql.instance_name",rA="db.cassandra.keyspace",nA="db.cassandra.page_size",sA="db.cassandra.consistency_level",iA="db.cassandra.table",oA="db.cassandra.idempotence",aA="db.cassandra.speculative_execution_count",cA="db.cassandra.coordinator.id",uA="db.cassandra.coordinator.dc",lA="db.hbase.namespace",fA="db.redis.database_index",hA="db.mongodb.collection",dA="db.sql.table",_A="exception.type",pA="exception.message",gA="exception.stacktrace",mA="exception.escaped",EA="faas.trigger",SA="faas.execution",yA="faas.document.collection",vA="faas.document.operation",TA="faas.document.time",bA="faas.document.name",OA="faas.time",AA="faas.cron",RA="faas.coldstart",IA="faas.invoked_name",MA="faas.invoked_provider",PA="faas.invoked_region",$A="net.transport",NA="net.peer.ip",wA="net.peer.port",CA="net.peer.name",LA="net.host.ip",kA="net.host.port",xA="net.host.name",DA="net.host.connection.type",FA="net.host.connection.subtype",UA="net.host.carrier.name",jA="net.host.carrier.mcc",BA="net.host.carrier.mnc",GA="net.host.carrier.icc",VA="peer.service",HA="enduser.id",zA="enduser.role",KA="enduser.scope",qA="thread.id",WA="thread.name",XA="code.function",YA="code.namespace",JA="code.filepath",QA="code.lineno",ZA="http.method",e0="http.url",t0="http.target",r0="http.host",n0="http.scheme",s0="http.status_code",i0="http.flavor",o0="http.user_agent",a0="http.request_content_length",c0="http.request_content_length_uncompressed",u0="http.response_content_length",l0="http.response_content_length_uncompressed",f0="http.server_name",h0="http.route",d0="http.client_ip",_0="aws.dynamodb.table_names",p0="aws.dynamodb.consumed_capacity",g0="aws.dynamodb.item_collection_metrics",m0="aws.dynamodb.provisioned_read_capacity",E0="aws.dynamodb.provisioned_write_capacity",S0="aws.dynamodb.consistent_read",y0="aws.dynamodb.projection",v0="aws.dynamodb.limit",T0="aws.dynamodb.attributes_to_get",b0="aws.dynamodb.index_name",O0="aws.dynamodb.select",A0="aws.dynamodb.global_secondary_indexes",R0="aws.dynamodb.local_secondary_indexes",I0="aws.dynamodb.exclusive_start_table",M0="aws.dynamodb.table_count",P0="aws.dynamodb.scan_forward",$0="aws.dynamodb.segment",N0="aws.dynamodb.total_segments",w0="aws.dynamodb.count",C0="aws.dynamodb.scanned_count",L0="aws.dynamodb.attribute_definitions",k0="aws.dynamodb.global_secondary_index_updates",x0="messaging.system",D0="messaging.destination",F0="messaging.destination_kind",U0="messaging.temp_destination",j0="messaging.protocol",B0="messaging.protocol_version",G0="messaging.url",V0="messaging.message_id",H0="messaging.conversation_id",z0="messaging.message_payload_size_bytes",K0="messaging.message_payload_compressed_size_bytes",q0="messaging.operation",W0="messaging.consumer_id",X0="messaging.rabbitmq.routing_key",Y0="messaging.kafka.message_key",J0="messaging.kafka.consumer_group",Q0="messaging.kafka.client_id",Z0="messaging.kafka.partition",eR="messaging.kafka.tombstone",tR="rpc.system",rR="rpc.service",nR="rpc.method",sR="rpc.grpc.status_code",iR="rpc.jsonrpc.version",oR="rpc.jsonrpc.request_id",aR="rpc.jsonrpc.error_code",cR="rpc.jsonrpc.error_message",uR="message.type",lR="message.id",fR="message.compressed_size",hR="message.uncompressed_size",Lr=Hl([qO,WO,XO,YO,JO,QO,ZO,eA,tA,rA,nA,sA,iA,oA,aA,cA,uA,lA,fA,hA,dA,_A,pA,gA,mA,EA,SA,yA,vA,TA,bA,OA,AA,RA,IA,MA,PA,$A,NA,wA,CA,LA,kA,xA,DA,FA,UA,jA,BA,GA,VA,HA,zA,KA,qA,WA,XA,YA,JA,QA,ZA,e0,t0,r0,n0,s0,i0,o0,a0,c0,u0,l0,f0,h0,d0,_0,p0,g0,m0,E0,S0,y0,v0,T0,b0,O0,A0,R0,I0,M0,P0,$0,N0,w0,C0,L0,k0,x0,D0,F0,U0,j0,B0,G0,V0,H0,z0,K0,q0,W0,X0,Y0,J0,Q0,Z0,eR,tR,rR,nR,sR,iR,oR,aR,cR,uR,lR,fR,hR]),dR="cloud.provider",_R="cloud.account.id",pR="cloud.region",gR="cloud.availability_zone",mR="cloud.platform",ER="aws.ecs.container.arn",SR="aws.ecs.cluster.arn",yR="aws.ecs.launchtype",vR="aws.ecs.task.arn",TR="aws.ecs.task.family",bR="aws.ecs.task.revision",OR="aws.eks.cluster.arn",AR="aws.log.group.names",RR="aws.log.group.arns",IR="aws.log.stream.names",MR="aws.log.stream.arns",PR="container.name",$R="container.id",NR="container.runtime",wR="container.image.name",CR="container.image.tag",LR="deployment.environment",kR="device.id",xR="device.model.identifier",DR="device.model.name",FR="faas.name",UR="faas.id",jR="faas.version",BR="faas.instance",GR="faas.max_memory",VR="host.id",HR="host.name",zR="host.type",KR="host.arch",qR="host.image.name",WR="host.image.id",XR="host.image.version",YR="k8s.cluster.name",JR="k8s.node.name",QR="k8s.node.uid",ZR="k8s.namespace.name",eI="k8s.pod.uid",tI="k8s.pod.name",rI="k8s.container.name",nI="k8s.replicaset.uid",sI="k8s.replicaset.name",iI="k8s.deployment.uid",oI="k8s.deployment.name",aI="k8s.statefulset.uid",cI="k8s.statefulset.name",uI="k8s.daemonset.uid",lI="k8s.daemonset.name",fI="k8s.job.uid",hI="k8s.job.name",dI="k8s.cronjob.uid",_I="k8s.cronjob.name",pI="os.type",gI="os.description",mI="os.name",EI="os.version",SI="process.pid",yI="process.executable.name",vI="process.executable.path",TI="process.command",bI="process.command_line",OI="process.command_args",AI="process.owner",RI="process.runtime.name",II="process.runtime.version",MI="process.runtime.description",Yp="service.name",PI="service.namespace",$I="service.instance.id",Jp="service.version",Qp="telemetry.sdk.name",Zp="telemetry.sdk.language",eg="telemetry.sdk.version",NI="telemetry.auto.version",wI="webengine.name",CI="webengine.version",LI="webengine.description",zl=Yp,kI=Jp,Ou=Qp,Au=Zp,Rd=eg,Yi=Hl([dR,_R,pR,gR,mR,ER,SR,yR,vR,TR,bR,OR,AR,RR,IR,MR,PR,$R,NR,wR,CR,LR,kR,xR,DR,FR,UR,jR,BR,GR,VR,HR,zR,KR,qR,WR,XR,YR,JR,QR,ZR,eI,tI,rI,nI,sI,iI,oI,aI,cI,uI,lI,fI,hI,dI,_I,pI,gI,mI,EI,SI,yI,vI,TI,bI,OI,AI,RI,II,MI,Yp,PI,$I,Jp,Qp,Zp,eg,NI,wI,CI,LI]),xI="cpp",DI="dotnet",FI="erlang",UI="go",jI="java",tg="nodejs",BI="php",GI="python",VI="ruby",rg="webjs",HI=tg,zI=rg,KI=Hl([xI,DI,FI,UI,jI,tg,BI,GI,VI,rg]),En,zc=(En={},En[Yi.TELEMETRY_SDK_NAME]="opentelemetry",En[Yi.PROCESS_RUNTIME_NAME]="browser",En[Yi.TELEMETRY_SDK_LANGUAGE]=KI.WEBJS,En[Yi.TELEMETRY_SDK_VERSION]=KO,En);var qI=9,WI=6,XI=Math.pow(10,WI),Ru=Math.pow(10,qI);function $n(e){var t=e/1e3,r=Math.trunc(t),n=Math.round(e%1e3*XI);return[r,n]}function ng(){var e=Ln.timeOrigin;if(typeof e!="number"){var t=Ln;e=t.timing&&t.timing.fetchStart}return e}function YI(e){var t=$n(ng()),r=$n(typeof e=="number"?e:Ln.now());return ig(t,r)}function JI(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Ru),[r,n]}function Id(e){return e[0]*1e6+e[1]/1e3}function sg(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function Md(e){return sg(e)||typeof e=="number"||e instanceof Date}function ig(e,t){var r=[e[0]+t[0],e[1]+t[1]];return r[1]>=Ru&&(r[1]-=Ru,r[0]+=1),r}var Yr;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Yr||(Yr={}));var QI=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ZI=function(){function e(t){t===void 0&&(t={});var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,s){return n.concat(s)},[])))}return e.prototype.inject=function(t,r,n){var s,i;try{for(var o=QI(this._propagators),a=o.next();!a.done;a=o.next()){var c=a.value;try{c.inject(t,r,n)}catch(u){Y.warn("Failed to inject with "+c.constructor.name+". Err: "+u.message)}}}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}},e.prototype.extract=function(t,r,n){return this._propagators.reduce(function(s,i){try{return i.extract(s,r,n)}catch(o){Y.warn("Failed to inject with "+i.constructor.name+". Err: "+o.message)}return s},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),Iu="[_0-9a-z-*/]",eM="[a-z]"+Iu+"{0,255}",tM="[a-z0-9]"+Iu+"{0,240}@[a-z]"+Iu+"{0,13}",rM=new RegExp("^(?:"+eM+"|"+tM+")$"),nM=/^[ -~]{0,255}[!-~]$/,sM=/,|=/;function iM(e){return rM.test(e)}function oM(e){return nM.test(e)&&!sM.test(e)}var Pd=32,aM=512,$d=",",Nd="=",cM=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+Nd+t.get(n)),r},[]).join($d)},e.prototype._parse=function(t){t.length>aM||(this._internalState=t.split($d).reverse().reduce(function(r,n){var s=n.trim(),i=s.indexOf(Nd);if(i!==-1){var o=s.slice(0,i),a=s.slice(i+1,n.length);iM(o)&&oM(a)&&r.set(o,a)}return r},new Map),this._internalState.size>Pd&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Pd))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Kc="traceparent",qc="tracestate",uM="00",lM="(?!ff)[\\da-f]{2}",fM="(?![0]{32})[\\da-f]{32}",hM="(?![0]{16})[\\da-f]{16}",dM="[\\da-f]{2}",_M=new RegExp("^\\s?("+lM+")-("+fM+")-("+hM+")-("+dM+")(-.*)?\\s?$");function pM(e){var t=_M.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var gM=function(){function e(){}return e.prototype.inject=function(t,r,n){var s=pe.getSpanContext(t);if(!(!s||fn(t)||!ln(s))){var i=uM+"-"+s.traceId+"-"+s.spanId+"-0"+Number(s.traceFlags||ie.NONE).toString(16);n.set(r,Kc,i),s.traceState&&n.set(r,qc,s.traceState.serialize())}},e.prototype.extract=function(t,r,n){var s=n.get(r,Kc);if(!s)return t;var i=Array.isArray(s)?s[0]:s;if(typeof i!="string")return t;var o=pM(i);if(!o)return t;o.isRemote=!0;var a=n.get(r,qc);if(a){var c=Array.isArray(a)?a.join(","):a;o.traceState=new cM(typeof c=="string"?c:void 0)}return pe.setSpanContext(t,o)},e.prototype.fields=function(){return[Kc,qc]},e}(),mM="[object Object]",EM="[object Null]",SM="[object Undefined]",yM=Function.prototype,og=yM.toString,vM=og.call(Object),TM=bM(Object.getPrototypeOf,Object),ag=Object.prototype,cg=ag.hasOwnProperty,xr=Symbol?Symbol.toStringTag:void 0,ug=ag.toString;function bM(e,t){return function(r){return e(t(r))}}function wd(e){if(!OM(e)||AM(e)!==mM)return!1;var t=TM(e);if(t===null)return!0;var r=cg.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&og.call(r)===vM}function OM(e){return e!=null&&typeof e=="object"}function AM(e){return e==null?e===void 0?SM:EM:xr&&xr in Object(e)?RM(e):IM(e)}function RM(e){var t=cg.call(e,xr),r=e[xr],n=!1;try{e[xr]=void 0,n=!0}catch{}var s=ug.call(e);return n&&(t?e[xr]=r:delete e[xr]),s}function IM(e){return ug.call(e)}var MM=20;function PM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=lg(r,e.shift(),0,n);return r}function Wc(e){return xo(e)?e.slice():e}function lg(e,t,r,n){r===void 0&&(r=0);var s;if(!(r>MM)){if(r++,mo(e)||mo(t)||fg(t))s=Wc(t);else if(xo(e)){if(s=e.slice(),xo(t))for(var i=0,o=t.length;i<o;i++)s.push(Wc(t[i]));else if(Ds(t))for(var a=Object.keys(t),i=0,o=a.length;i<o;i++){var c=a[i];s[c]=Wc(t[c])}}else if(Ds(e))if(Ds(t)){if(!$M(e,t))return t;s=Object.assign({},e);for(var a=Object.keys(t),i=0,o=a.length;i<o;i++){var c=a[i],u=t[c];if(mo(u))typeof u>"u"?delete s[c]:s[c]=u;else{var l=s[c],h=u;if(Cd(e,c,n)||Cd(t,c,n))delete s[c];else{if(Ds(l)&&Ds(h)){var _=n.get(l)||[],g=n.get(h)||[];_.push({obj:e,key:c}),g.push({obj:t,key:c}),n.set(l,_),n.set(h,g)}s[c]=lg(s[c],u,r,n)}}}}else s=t;return s}}function Cd(e,t,r){for(var n=r.get(e[t])||[],s=0,i=n.length;s<i;s++){var o=n[s];if(o.key===t&&o.obj===e)return!0}return!1}function xo(e){return Array.isArray(e)}function fg(e){return typeof e=="function"}function Ds(e){return!mo(e)&&!xo(e)&&!fg(e)&&typeof e=="object"}function mo(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function $M(e,t){return!(!wd(e)||!wd(t))}var NM=function(){function e(){var t=this;this._promise=new Promise(function(r,n){t._resolve=r,t._reject=n})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),wM=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},CM=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},hg=function(){function e(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new NM}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,r=this,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,CM([this._that],wM(n),!1))).then(function(i){return r._deferred.resolve(i)},function(i){return r._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},e}();function LM(e,t){return new Promise(function(r){ut.with(Vp(ut.active()),function(){e.export(t,function(n){r(n)})})})}var kM={_export:LM};function xM(){return"unknown_service"}var Er=function(){return Er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Er.apply(this,arguments)},DM=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},FM=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},UM=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},ti=function(){function e(t,r){var n=this,s;this._attributes=t,this.asyncAttributesPending=r!=null,this._syncAttributes=(s=this._attributes)!==null&&s!==void 0?s:{},this._asyncAttributesPromise=r==null?void 0:r.then(function(i){return n._attributes=Object.assign({},n._attributes,i),n.asyncAttributesPending=!1,i},function(i){return Y.debug("a resource's async attributes promise rejected: %s",i),n.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[zl]=xM(),t[Au]=zc[Au],t[Ou]=zc[Ou],t[Rd]=zc[Rd],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&Y.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return DM(this,void 0,void 0,function(){return FM(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var r=this,n;if(!t)return this;var s=Er(Er({},this._syncAttributes),(n=t._syncAttributes)!==null&&n!==void 0?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(s);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(o){var a,c=UM(o,2),u=c[0],l=c[1];return Er(Er(Er(Er({},r._syncAttributes),u),(a=t._syncAttributes)!==null&&a!==void 0?a:t.attributes),l)});return new e(s,i)},e.EMPTY=new e({}),e}();const jM=e=>typeof e=="function",f=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,n){return arguments.length>=2?t(r,n):function(s){return t(s,r)}};case 3:return function(r,n,s){return arguments.length>=3?t(r,n,s):function(i){return t(i,r,n)}};case 4:return function(r,n,s,i){return arguments.length>=4?t(r,n,s,i):function(o){return t(o,r,n,s)}};case 5:return function(r,n,s,i,o){return arguments.length>=5?t(r,n,s,i,o):function(a){return t(a,r,n,s,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const r=arguments;return function(n){return t(n,...r)}}}},Me=e=>e,Ta=e=>()=>e,Mu=Ta(!0),kn=Ta(!1),dg=Ta(void 0),BM=dg;function p(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return s(n(r(t(e))));case 6:return i(s(n(r(t(e)))));case 7:return o(i(s(n(r(t(e))))));case 8:return a(o(i(s(n(r(t(e)))))));case 9:return c(a(o(i(s(n(r(t(e))))))));default:{let u=arguments[0];for(let l=1;l<arguments.length;l++)u=arguments[l](u);return u}}}function GM(e,t,r,n,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return s(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return i(s(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(s(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(s(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(o(i(s(n(r(t(e.apply(this,arguments)))))))))}}}const ba=e=>(t,r)=>t===r||e(t,r),VM=(e,t)=>e===t,HM=()=>VM,zM=HM(),KM=f(2,(e,t)=>ba((r,n)=>e(t(r),t(n)))),_g=e=>ba((t,r)=>{if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0});let qM="3.1.4";const Do=()=>qM,Pu=Symbol.for(`effect/GlobalValue/globalStoreId/${Do()}`);Pu in globalThis||(globalThis[Pu]=new Map);const Xc=globalThis[Pu],K=(e,t)=>(Xc.has(e)||Xc.set(e,t()),Xc.get(e)),Kl=e=>typeof e=="string",Eo=e=>typeof e=="number",WM=e=>typeof e=="bigint",Oa=jM,XM=e=>typeof e=="object"&&e!==null,ql=e=>XM(e)||Oa(e),D=f(2,(e,t)=>ql(e)&&t in e),Wl=f(2,(e,t)=>D(e,"_tag")&&e._tag===t),Sn=e=>e==null,pg=e=>D(e,Symbol.iterator),gg=e=>D(e,"then")&&Oa(e.then),Ai=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let YM=class mg{constructor(t){d(this,"self");d(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new mg(this.self)}};const JM=335903614,QM=4150755663,ZM=1481765933,eP=1284865837,tP=9007199254740992,rP=134217728;class Eg{constructor(t,r,n,s){d(this,"_state");return Sn(r)&&Sn(t)?(r=Math.random()*4294967295>>>0,t=0):Sn(r)&&(r=t,t=0),Sn(s)&&Sn(n)?(s=this._state?this._state[3]:QM,n=this._state?this._state[2]:JM):Sn(s)&&(s=n,n=0),this._state=new Int32Array([0,0,n>>>0,((s||0)|1)>>>0]),this._next(),Ld(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0;const n=(-t>>>0)%t>>>0;for(r=this._next();r<n;r=this._next());return r%t}number(){const t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*rP+r)/tP}_next(){const t=this._state[0]>>>0,r=this._state[1]>>>0;nP(this._state,t,r,ZM,eP),Ld(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=t>>>18,s=(r>>>18|t<<14)>>>0;n=(n^t)>>>0,s=(s^r)>>>0;const i=(s>>>27|n<<5)>>>0,o=t>>>27,a=(-o>>>0&31)>>>0;return(i>>>o|i<<a)>>>0}}function nP(e,t,r,n,s){let i=(r>>>16)*(s&65535)>>>0,o=(r&65535)*(s>>>16)>>>0,a=(r&65535)*(s&65535)>>>0,c=(r>>>16)*(s>>>16)+((o>>>16)+(i>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(c=c+1>>>0),i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),c=c+Math.imul(r,n)>>>0,c=c+Math.imul(t,s)>>>0,e[0]=c,e[1]=a}function Ld(e,t,r,n,s){let i=t+n>>>0;const o=r+s>>>0;o>>>0<r>>>0&&(i=i+1|0),e[0]=i,e[1]=o}const $u=Symbol.for("effect/Utils/YieldWrap");var yi;class Aa{constructor(t){md(this,yi,void 0);Ed(this,yi,t)}[$u](){return gd(this,yi)}}yi=new WeakMap;function sP(e){if(typeof e=="object"&&e!==null&&$u in e)return e[$u]();throw new Error(Ai("yieldWrapGet"))}const dt=K("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),Yc=K(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),iP=K(Symbol.for("effect/Hash/pcgr"),()=>new Eg),U=Symbol.for("effect/Hash"),w=e=>{if(dt.enabled===!0)return 0;switch(typeof e){case"number":return Yl(e);case"bigint":return Ie(e.toString(10));case"boolean":return Ie(String(e));case"symbol":return Ie(String(e));case"string":return Ie(e);case"undefined":return Ie("undefined");case"function":case"object":return e===null?Ie("null"):oP(e)?e[U]():Xl(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Xl=e=>(Yc.has(e)||Yc.set(e,Yl(iP.integer(Number.MAX_SAFE_INTEGER))),Yc.get(e)),B=e=>t=>t*53^e,Ra=e=>e&3221225471|e>>>1&1073741824,oP=e=>D(e,U),Yl=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Ra(e)},Ie=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return Ra(t)},aP=(e,t)=>{let r=12289;for(let n=0;n<t.length;n++)r^=p(Ie(t[n]),B(w(e[t[n]])));return Ra(r)},Sg=e=>aP(e,Object.keys(e)),Ft=e=>{let t=6151;for(let r=0;r<e.length;r++)t=p(t,B(w(e[r])));return Ra(t)},ce=function(){if(arguments.length===1){const r=arguments[0];return function(n){return Object.defineProperty(r,U,{value(){return n},enumerable:!1}),n}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,U,{value(){return t},enumerable:!1}),t},j=Symbol.for("effect/Equal");function x(){return arguments.length===1?e=>Fo(e,arguments[0]):Fo(arguments[0],arguments[1])}function Fo(e,t){if(e===t)return!0;const r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null&&ri(e)&&ri(t))return w(e)===w(t)&&e[j](t)?!0:dt.enabled&&dt.tester?dt.tester(e,t):!1;if(dt.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,s)=>Fo(n,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e),s=Object.keys(t);if(n.length===s.length){for(const i of n)if(!(i in t&&Fo(e[i],t[i])))return dt.tester?dt.tester(e,t):!1;return!0}}return dt.tester?dt.tester(e,t):!1}}return dt.enabled&&dt.tester?dt.tester(e,t):!1}const ri=e=>D(e,j),Jl=()=>x,ue=Symbol.for("nodejs.util.inspect.custom"),he=e=>D(e,"toJSON")&&Oa(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(he):e,Pe=e=>JSON.stringify(e,null,2),Ks=(e,t=2)=>{try{return typeof e=="object"?cP(e,t):String(e)}catch{return String(e)}},cP=(e,t)=>{let r=[];const n=JSON.stringify(e,(s,i)=>typeof i=="object"&&i!==null?r.includes(i)?void 0:r.push(i)&&i:i,t);return r=void 0,n},C=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let n=0,s=t.length;n<s;n++)r=t[n](r);return r}}},So="Async",Ql="Commit",ne="Failure",yo="OnFailure",Uo="OnSuccess",jo="OnSuccessAndFailure",se="Success",yg="Sync",uP="Tag",is="UpdateRuntimeFlags",Bo="While",vg="WithRuntime",vo="Yield",Zl="RevertFlags",Tg=Symbol.for("effect/Effect"),lP=Symbol.for("effect/Stream"),fP=Symbol.for("effect/Sink"),hP=Symbol.for("effect/Channel"),Gn={_R:e=>e,_E:e=>e,_A:e=>e,_V:Do()},dP={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},_P={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Ia={[Tg]:Gn,[lP]:Gn,[fP]:dP,[hP]:_P,[j](e){return this===e},[U](){return ce(this,Xl(this))},[Symbol.iterator](){return new YM(new Aa(this))},pipe(){return C(this,arguments)}},Ma={[U](){return ce(this,Sg(this))},[j](e){const t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(const n of t)if(!(n in e&&x(this[n],e[n])))return!1;return!0}},bg={...Ia,_op:Ql},pP={...bg,...Ma},Og=Symbol.for("effect/Option"),Ag={...Ia,[Og]:{_A:e=>e},[ue](){return this.toJSON()},toString(){return Pe(this.toJSON())}},gP=Object.assign(Object.create(Ag),{_tag:"Some",_op:"Some",[j](e){return Rg(e)&&Mg(e)&&x(this.value,e.value)},[U](){return ce(this,B(w(this._tag))(w(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:he(this.value)}}}),mP=w("None"),EP=Object.assign(Object.create(Ag),{_tag:"None",_op:"None",[j](e){return Rg(e)&&Ig(e)},[U](){return mP},toJSON(){return{_id:"Option",_tag:this._tag}}}),Rg=e=>D(e,Og),Ig=e=>e._tag==="None",Mg=e=>e._tag==="Some",Pg=Object.create(EP),$g=e=>{const t=Object.create(gP);return t.value=e,t},Ng=Symbol.for("effect/Either"),wg={...Ia,[Ng]:{_R:e=>e},[ue](){return this.toJSON()},toString(){return Pe(this.toJSON())}},SP=Object.assign(Object.create(wg),{_tag:"Right",_op:"Right",[j](e){return Cg(e)&&kg(e)&&x(this.right,e.right)},[U](){return B(w(this._tag))(w(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:he(this.right)}}}),yP=Object.assign(Object.create(wg),{_tag:"Left",_op:"Left",[j](e){return Cg(e)&&Lg(e)&&x(this.left,e.left)},[U](){return B(w(this._tag))(w(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:he(this.left)}}}),Cg=e=>D(e,Ng),Lg=e=>e._tag==="Left",kg=e=>e._tag==="Right",vP=e=>{const t=Object.create(yP);return t.left=e,t},TP=e=>{const t=Object.create(SP);return t.right=e,t},re=TP,Te=vP,rr=Lg,Nn=kg,bP=f(2,(e,t)=>Nn(e)?re(t(e.right)):Te(e.left)),OP=f(2,(e,{onLeft:t,onRight:r})=>rr(e)?t(e.left):r(e.right)),ef=OP({onLeft:Me,onRight:Me}),AP=e=>{if(Symbol.iterator in e){const r=[];for(const n of e){if(rr(n))return n;r.push(n.right)}return re(r)}const t={};for(const r of Object.keys(e)){const n=e[r];if(rr(n))return n;t[r]=n.right}return re(t)},xg=e=>e.length>0,tf=e=>(t,r)=>t===r?0:e(t,r),RP=tf((e,t)=>e<t?-1:1),Dg=f(2,(e,t)=>tf((r,n)=>e(t(r),t(n)))),IP=e=>tf((t,r)=>{const n=Math.min(t.length,r.length);let s=0;for(const i of e){if(s>=n)break;const o=i(t[s],r[s]);if(o!==0)return o;s++}return 0}),MP=(...e)=>IP(e),PP=e=>f(2,(t,r)=>e(t,r)===1),T=()=>Pg,R=$g,Ce=Ig,_e=Mg,mt=f(2,(e,{onNone:t,onSome:r})=>Ce(e)?t():r(e.value)),rt=f(2,(e,t)=>Ce(e)?t():e.value),$P=f(2,(e,t)=>Ce(e)?t():e),NP=f(2,(e,t)=>Ce(e)?R(t()):e),Ri=e=>e==null?T():R(e),tt=rt(dg),wP=e=>(...t)=>{try{return R(e(...t))}catch{return T()}},CP=f(2,(e,t)=>{if(_e(e))return e.value;throw t()}),Fg=CP(()=>new Error("getOrThrow called on a None")),xn=f(2,(e,t)=>Ce(e)?T():R(t(e.value))),rf=f(2,(e,t)=>Ce(e)?T():t(e.value)),LP=e=>f(2,(t,r)=>Ce(t)?!1:e(t.value,r)),kP=Jl(),xP=LP(kP),DP=(...e)=>e,ni=e=>new Array(e),FP=(e,t)=>{const r=Math.max(1,Math.floor(e)),n=new Array(r);for(let s=0;s<r;s++)n[s]=t(s);return n},z=e=>Array.isArray(e)?e:Array.from(e),Go=f(2,(e,t)=>[t,...e]),UP=f(2,(e,t)=>[...e,t]),Ug=f(2,(e,t)=>z(e).concat(z(t))),jP=e=>e.length===0,BP=jP,GP=xg,ft=xg,jg=(e,t)=>e<0||e>=t.length,VP=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),HP=f(2,(e,t)=>{const r=Math.floor(t);return jg(r,e)?T():R(e[r])}),Bg=f(2,(e,t)=>{const r=Math.floor(t);if(jg(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]}),qs=HP(0),lt=Bg(0),zP=e=>ft(e)?R(Gg(e)):T(),Gg=e=>e[e.length-1],Vn=e=>e.slice(1),KP=(e,t)=>{let r=0;for(const n of e){if(!t(n,r))break;r++}return r},qP=f(2,(e,t)=>JP(e,KP(e,t))),WP=f(2,(e,t)=>{const r=z(e);return r.slice(VP(t,r),r.length)}),kd=e=>Array.from(e).reverse(),er=f(2,(e,t)=>{const r=Array.from(e);return r.sort(t),r}),xd=f(2,(e,t)=>XP(e,t,DP)),XP=f(3,(e,t,r)=>{const n=z(e),s=z(t);if(ft(n)&&ft(s)){const i=[r(lt(n),lt(s))],o=Math.min(n.length,s.length);for(let a=1;a<o;a++)i[a]=r(n[a],s[a]);return i}return[]}),YP=Jl(),JP=f(2,(e,t)=>{const r=Array.from(e),n=Math.floor(t);return ft(r)?n>=1?QP(r,n):[[],r]:[r,[]]}),QP=f(2,(e,t)=>{const r=Math.max(1,Math.floor(t));return r>=e.length?[ZP(e),[]]:[Go(e.slice(1,r),lt(e)),e.slice(r)]}),ZP=e=>e.slice(),e$=f(3,(e,t,r)=>{const n=z(e),s=z(t);return ft(n)?ft(s)?Hg(r)(Ug(n,s)):n:s}),Nu=f(2,(e,t)=>e$(e,t,YP)),Jr=()=>[],bt=e=>[e],Dn=f(2,(e,t)=>e.map(t)),t$=f(2,(e,t)=>{if(BP(e))return[];const r=[];for(let n=0;n<e.length;n++){const s=t(e[n],n);for(let i=0;i<s.length;i++)r.push(s[i])}return r}),Vg=t$(Me),Pa=f(3,(e,t,r)=>z(e).reduce((n,s,i)=>r(n,s,i),t)),r$=f(3,(e,t,r)=>z(e).reduceRight((n,s,i)=>r(n,s,i),t)),Dd=(e,t)=>{const r=[];let n=e,s;for(;_e(s=t(n));){const[i,o]=s.value;r.push(i),n=o}return r},nf=_g,Hg=f(2,(e,t)=>{const r=z(e);if(ft(r)){const n=[lt(r)],s=Vn(r);for(const i of s)n.every(o=>!t(i,o))&&n.push(i);return n}return[]}),n$=e=>Hg(e,Jl()),os=f(2,(e,t)=>z(e).join(t)),zg=Symbol.for("effect/Context/Tag"),s$="effect/STM",i$=Symbol.for(s$),sf={...Ia,_tag:"Tag",_op:"Tag",[i$]:Gn,[zg]:{_Service:e=>e,_Identifier:e=>e},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ue](){return this.toJSON()},of(e){return e},context(e){return Wg(this,e)}},o$=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=t;const n=Object.create(sf);return Object.defineProperty(n,"stack",{get(){return r.stack}}),n.key=e,n},a$=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=t;function n(){}return Object.setPrototypeOf(n,sf),n.key=e,Object.defineProperty(n,"stack",{get(){return r.stack}}),n},Kg=Symbol.for("effect/Context"),c$={[Kg]:{_Services:e=>e},[j](e){if(qg(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!x(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[U](){return ce(this,Yl(this.unsafeMap.size))},pipe(){return C(this,arguments)},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(he)}},[ue](){return this.toJSON()}},or=e=>{const t=Object.create(c$);return t.unsafeMap=e,t},u$=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const r=e.stack.split(`
`);if(r.length>2){const n=r[2].match(/at (.*)/);n&&(t.message=t.message+` (defined at ${n[1]})`)}}if(t.stack){const r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},qg=e=>D(e,Kg),l$=e=>D(e,zg),f$=or(new Map),h$=()=>f$,Wg=(e,t)=>or(new Map([[e.key,t]])),d$=f(3,(e,t,r)=>{const n=new Map(e.unsafeMap);return n.set(t.key,r),or(n)}),Xg=f(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw u$(t);return e.unsafeMap.get(t.key)}),_$=Xg,p$=f(2,(e,t)=>e.unsafeMap.has(t.key)?$g(e.unsafeMap.get(t.key)):Pg),g$=f(2,(e,t)=>{const r=new Map(e.unsafeMap);for(const[n,s]of t.unsafeMap)r.set(n,s);return or(r)}),m$=(...e)=>t=>{const r=new Set(e.map(s=>s.key)),n=new Map;for(const[s,i]of t.unsafeMap.entries())r.has(s)&&n.set(s,i);return or(n)},E$=(...e)=>t=>{const r=new Map(t.unsafeMap);for(const n of e)r.delete(n.key);return or(r)},Xe=o$,S$=or,Yg=qg,Ii=l$,yt=h$,Nt=Wg,He=d$,Le=_$,$a=Xg,It=p$,as=g$,y$=m$,v$=E$,Jg=a$,T$=Object.freeze(Object.defineProperty({__proto__:null,GenericTag:Xe,Tag:Jg,add:He,empty:yt,get:Le,getOption:It,isContext:Yg,isTag:Ii,make:Nt,merge:as,omit:v$,pick:y$,unsafeGet:$a,unsafeMake:S$},Symbol.toStringTag,{value:"Module"})),Qg=Symbol.for("effect/Chunk");function b$(e,t,r,n,s){for(let i=t;i<Math.min(e.length,t+s);i++)r[n+i-t]=e[i];return r}const Zg=[],O$=e=>ba((t,r)=>t.length===r.length&&sr(t).every((n,s)=>e(n,Br(r,s)))),A$=O$(x),R$={[Qg]:{_A:e=>e},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"Chunk",values:sr(this).map(he)}},[ue](){return this.toJSON()},[j](e){return em(e)&&A$(this,e)},[U](){return ce(this,Ft(sr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Zg[Symbol.iterator]();default:return sr(this)[Symbol.iterator]()}},pipe(){return C(this,arguments)}},Ae=e=>{const t=Object.create(R$);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=xt,t.right=xt;break}case"ISingleton":{t.length=1,t.depth=0,t.left=xt,t.right=xt;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=xt,t.right=xt;break}}return t},em=e=>D(e,Qg),xt=Ae({_tag:"IEmpty"}),Be=()=>xt,Jc=(...e)=>e.length===1?st(e[0]):M$(e),st=e=>Ae({_tag:"ISingleton",a:e}),of=e=>em(e)?e:Ae({_tag:"IArray",array:z(e)}),wu=(e,t,r)=>{switch(e.backing._tag){case"IArray":{b$(e.backing.array,0,t,r,e.length);break}case"IConcat":{wu(e.left,t,r),wu(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let n=0,s=r;for(;n<e.length;)t[s]=Br(e,n),n+=1,s+=1;break}}},sr=e=>{switch(e.backing._tag){case"IEmpty":return Zg;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return wu(e,t,0),e.backing={_tag:"IArray",array:t},e.left=xt,e.right=xt,e.depth=0,t}}},ar=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return Ae({_tag:"IArray",array:kd(e.backing.array)});case"IConcat":return Ae({_tag:"IConcat",left:ar(e.backing.right),right:ar(e.backing.left)});case"ISlice":return af(kd(sr(e)))}},I$=f(2,(e,t)=>t<0||t>=e.length?T():R(Br(e,t))),af=e=>Ae({_tag:"IArray",array:e}),M$=e=>af(e),Br=f(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Br(e.left,t):Br(e.right,t-e.left.length);case"ISlice":return Br(e.backing.chunk,t+e.backing.offset)}}),tm=f(2,(e,t)=>Ot(e,st(t))),we=f(2,(e,t)=>Ot(st(t),e)),Cu=f(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return xt;switch(e.backing._tag){case"ISlice":return Ae({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Cu(e.right,t-e.left.length):Ae({_tag:"IConcat",left:Cu(e.left,t),right:e.right});default:return Ae({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),Ot=f(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const r=t.depth-e.depth;if(Math.abs(r)<=1)return Ae({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){const n=Ot(e.right,t);return Ae({_tag:"IConcat",left:e.left,right:n})}else{const n=Ot(e.right.right,t);if(n.depth===e.depth-3){const s=Ae({_tag:"IConcat",left:e.right.left,right:n});return Ae({_tag:"IConcat",left:e.left,right:s})}else{const s=Ae({_tag:"IConcat",left:e.left,right:e.right.left});return Ae({_tag:"IConcat",left:s,right:n})}}else if(t.right.depth>=t.left.depth){const n=Ot(e,t.left);return Ae({_tag:"IConcat",left:n,right:t.right})}else{const n=Ot(e,t.left.left);if(n.depth===t.depth-3){const s=Ae({_tag:"IConcat",left:n,right:t.left.right});return Ae({_tag:"IConcat",left:s,right:t.right})}else{const s=Ae({_tag:"IConcat",left:t.left.right,right:t.right});return Ae({_tag:"IConcat",left:n,right:s})}}}),rm=e=>e.length===0,Ne=e=>e.length>0,nm=I$(0),sm=e=>Br(e,0),Z=sm,Re=e=>Cu(e,1),Qr=5,cf=Math.pow(2,Qr),P$=cf-1,$$=cf/2,N$=cf/4;function w$(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Hn(e,t){return t>>>e&P$}function wn(e){return 1<<e}function im(e,t){return w$(e&t-1)}const C$=(e,t)=>({value:e,previous:t});function Fn(e,t,r,n){let s=n;if(!e){const i=n.length;s=new Array(i);for(let o=0;o<i;++o)s[o]=n[o]}return s[t]=r,s}function om(e,t,r){const n=r.length-1;let s=0,i=0,o=r;if(e)s=i=t;else for(o=new Array(n);s<t;)o[i++]=r[s++];for(++s;s<=n;)o[i++]=r[s++];return e&&(o.length=n),o}function L$(e,t,r,n){const s=n.length;if(e){let c=s;for(;c>=t;)n[c--]=n[c];return n[t]=r,n}let i=0,o=0;const a=new Array(s+1);for(;i<t;)a[o++]=n[i++];for(a[t]=r;i<s;)a[++o]=n[i++];return a}class br{constructor(){d(this,"_tag","EmptyNode")}modify(t,r,n,s,i,o){const a=n(T());return Ce(a)?new br:(++o.value,new Gr(t,s,i,a))}}function At(e){return Wl(e,"EmptyNode")}function k$(e){return At(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Na(e,t){return At(e)?!1:t===e.edit}class Gr{constructor(t,r,n,s){d(this,"edit");d(this,"hash");d(this,"key");d(this,"value");d(this,"_tag","LeafNode");this.edit=t,this.hash=r,this.key=n,this.value=s}modify(t,r,n,s,i,o){if(x(i,this.key)){const c=n(this.value);return c===this.value?this:Ce(c)?(--o.value,new br):Na(this,t)?(this.value=c,this):new Gr(t,s,i,c)}const a=n(T());return Ce(a)?this:(++o.value,am(t,r,this.hash,this,s,new Gr(t,s,i,a)))}}class uf{constructor(t,r,n){d(this,"edit");d(this,"hash");d(this,"children");d(this,"_tag","CollisionNode");this.edit=t,this.hash=r,this.children=n}modify(t,r,n,s,i,o){if(s===this.hash){const c=Na(this,t),u=this.updateCollisionList(c,t,this.hash,this.children,n,i,o);return u===this.children?this:u.length>1?new uf(t,this.hash,u):u[0]}const a=n(T());return Ce(a)?this:(++o.value,am(t,r,this.hash,this,s,new Gr(t,s,i,a)))}updateCollisionList(t,r,n,s,i,o,a){const c=s.length;for(let l=0;l<c;++l){const h=s[l];if("key"in h&&x(o,h.key)){const _=h.value,g=i(_);return g===_?s:Ce(g)?(--a.value,om(t,l,s)):Fn(t,l,new Gr(r,n,o,g),s)}}const u=i(T());return Ce(u)?s:(++a.value,Fn(t,c,new Gr(r,n,o,u),s))}}class zn{constructor(t,r,n){d(this,"edit");d(this,"mask");d(this,"children");d(this,"_tag","IndexedNode");this.edit=t,this.mask=r,this.children=n}modify(t,r,n,s,i,o){const a=this.mask,c=this.children,u=Hn(r,s),l=wn(u),h=im(a,l),_=a&l,g=Na(this,t);if(!_){const P=new br().modify(t,r+Qr,n,s,i,o);return P?c.length>=$$?D$(t,u,P,a,c):new zn(t,a|l,L$(g,h,P,c)):this}const m=c[h],b=m.modify(t,r+Qr,n,s,i,o);if(m===b)return this;let A=a,L;if(At(b)){if(A&=~l,!A)return new br;if(c.length<=2&&k$(c[h^1]))return c[h^1];L=om(g,h,c)}else L=Fn(g,h,b,c);return g?(this.mask=A,this.children=L,this):new zn(t,A,L)}}class lf{constructor(t,r,n){d(this,"edit");d(this,"size");d(this,"children");d(this,"_tag","ArrayNode");this.edit=t,this.size=r,this.children=n}modify(t,r,n,s,i,o){let a=this.size;const c=this.children,u=Hn(r,s),l=c[u],h=(l||new br).modify(t,r+Qr,n,s,i,o);if(l===h)return this;const _=Na(this,t);let g;if(At(l)&&!At(h))++a,g=Fn(_,u,h,c);else if(!At(l)&&At(h)){if(--a,a<=N$)return x$(t,a,u,c);g=Fn(_,u,new br,c)}else g=Fn(_,u,h,c);return _?(this.size=a,this.children=g,this):new lf(t,a,g)}}function x$(e,t,r,n){const s=new Array(t-1);let i=0,o=0;for(let a=0,c=n.length;a<c;++a)if(a!==r){const u=n[a];u&&!At(u)&&(s[i++]=u,o|=1<<a)}return new zn(e,o,s)}function D$(e,t,r,n,s){const i=[];let o=n,a=0;for(let c=0;o;++c)o&1&&(i[c]=s[a++]),o>>>=1;return i[t]=r,new lf(e,a+1,i)}function F$(e,t,r,n,s,i){if(r===s)return new uf(e,r,[i,n]);const o=Hn(t,r),a=Hn(t,s);if(o===a)return c=>new zn(e,wn(o)|wn(a),[c]);{const c=o<a?[n,i]:[i,n];return new zn(e,wn(o)|wn(a),c)}}function am(e,t,r,n,s,i){let o,a=t;for(;;){const c=F$(e,a,r,n,s,i);if(typeof c=="function")o=C$(c,o),a=a+Qr;else{let u=c;for(;o!=null;)u=o.value(u),o=o.previous;return u}}}const cm="effect/HashMap",Lu=Symbol.for(cm),U$={[Lu]:Lu,[Symbol.iterator](){return new wa(this,(e,t)=>[e,t])},[U](){let e=w(cm);for(const t of this)e^=p(w(t[0]),B(w(t[1])));return ce(this,e)},[j](e){if(G$(e)){if(e._size!==this._size)return!1;for(const t of this){const r=p(e,hf(t[0],w(t[0])));if(Ce(r))return!1;if(!x(t[1],r.value))return!1}return!0}return!1},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(he)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},ff=(e,t,r,n)=>{const s=Object.create(U$);return s._editable=e,s._edit=t,s._root=r,s._size=n,s};class wa{constructor(t,r){d(this,"map");d(this,"f");d(this,"v");this.map=t,this.f=r,this.v=um(this.map._root,this.f,void 0)}next(){if(Ce(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Vo(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new wa(this.map,this.f)}}const Vo=e=>e?lm(e[0],e[1],e[2],e[3],e[4]):T(),um=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return _e(e.value)?R({value:t(e.key,e.value.value),cont:r}):Vo(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const n=e.children;return lm(n.length,n,0,t,r)}default:return Vo(r)}},lm=(e,t,r,n,s)=>{for(;r<e;){const i=t[r++];if(i&&!At(i))return um(i,n,[e,t,r,n,s])}return Vo(s)},j$=ff(!1,0,new br,0),Ca=()=>j$,B$=e=>{const t=hm(Ca());for(const r of e)si(t,r[0],r[1]);return q$(t)},G$=e=>D(e,Lu),V$=e=>e&&At(e._root),H$=f(2,(e,t)=>hf(e,t,w(t))),hf=f(3,(e,t,r)=>{let n=e._root,s=0;for(;;)switch(n._tag){case"LeafNode":return x(t,n.key)?n.value:T();case"CollisionNode":{if(r===n.hash){const i=n.children;for(let o=0,a=i.length;o<a;++o){const c=i[o];if("key"in c&&x(t,c.key))return c.value}}return T()}case"IndexedNode":{const i=Hn(s,r),o=wn(i);if(n.mask&o){n=n.children[im(n.mask,o)],s+=Qr;break}return T()}case"ArrayNode":{if(n=n.children[Hn(s,r)],n){s+=Qr;break}return T()}default:return T()}}),z$=f(2,(e,t)=>_e(hf(e,t,w(t)))),si=f(3,(e,t,r)=>df(e,t,()=>R(r))),K$=f(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:ff(e._editable,e._edit,t,r)),fm=e=>new wa(e,t=>t),Ho=e=>e._size,hm=e=>ff(!0,e._edit+1,e._root,e._size),q$=e=>(e._editable=!1,e),df=f(3,(e,t,r)=>W$(e,t,w(t),r)),W$=f(4,(e,t,r,n)=>{const s={value:e._size},i=e._root.modify(e._editable?e._edit:NaN,0,n,r,t,s);return p(e,K$(i,s.value))}),Fd=f(2,(e,t)=>df(e,t,T)),X$=f(2,(e,t)=>La(e,Ca(),(r,n,s)=>si(r,s,t(n,s)))),dm=f(2,(e,t)=>La(e,void 0,(r,n,s)=>t(n,s))),La=f(3,(e,t,r)=>{const n=e._root;if(n._tag==="LeafNode")return _e(n.value)?r(t,n.value.value,n.key):t;if(n._tag==="EmptyNode")return t;const s=[n.children];let i;for(;i=s.pop();)for(let o=0,a=i.length;o<a;){const c=i[o++];c&&!At(c)&&(c._tag==="LeafNode"?_e(c.value)&&(t=r(t,c.value.value,c.key)):s.push(c.children))}return t}),_m="effect/HashSet",ku=Symbol.for(_m),Y$={[ku]:ku,[Symbol.iterator](){return fm(this._keyMap)},[U](){return ce(this,B(w(this._keyMap))(w(_m)))},[j](e){return J$(e)?Ho(this._keyMap)===Ho(e._keyMap)&&x(this._keyMap,e._keyMap):!1},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(he)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},ka=e=>{const t=Object.create(Y$);return t._keyMap=e,t},J$=e=>D(e,ku),Q$=ka(Ca()),xa=()=>Q$,Z$=e=>{const t=_f(xa());for(const r of e)ii(t,r);return pf(t)},eN=(...e)=>{const t=_f(xa());for(const r of e)ii(t,r);return pf(t)},tN=f(2,(e,t)=>z$(e._keyMap,t)),rN=f(2,(e,t)=>{let r=!1;for(const n of e)if(r=t(n),r)break;return r}),nN=f(2,(e,t)=>!rN(e,r=>!t(r))),sN=e=>Ho(e._keyMap),_f=e=>ka(hm(e._keyMap)),pf=e=>(e._keyMap._editable=!1,e),pm=f(2,(e,t)=>{const r=_f(e);return t(r),pf(r)}),ii=f(2,(e,t)=>e._keyMap._editable?(si(t,!0)(e._keyMap),e):ka(si(t,!0)(e._keyMap))),gm=f(2,(e,t)=>e._keyMap._editable?(Fd(t)(e._keyMap),e):ka(Fd(t)(e._keyMap))),iN=f(2,(e,t)=>pm(e,r=>{for(const n of t)gm(r,n)})),oN=f(2,(e,t)=>pm(xa(),r=>{aN(e,n=>ii(r,n));for(const n of t)ii(r,n)})),aN=f(2,(e,t)=>dm(e._keyMap,(r,n)=>t(n))),cN=f(3,(e,t,r)=>La(e._keyMap,t,(n,s,i)=>r(n,i))),Or=xa,uN=Z$,Da=eN,lN=tN,fN=nN,gf=sN,Ws=ii,mm=gm,Ud=iN,Kn=oN,zo=cN,jd=Symbol.for("effect/MutableRef"),hN={[jd]:jd,toString(){return Pe(this.toJSON())},toJSON(){return{_id:"MutableRef",current:he(this.current)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},Fa=e=>{const t=Object.create(hN);return t.current=e,t},dN=f(3,(e,t,r)=>x(t,e.current)?(e.current=r,!0):!1),Zr=e=>e.current,Mi=f(2,(e,t)=>(e.current=t,e)),Ua="effect/FiberId",en=Symbol.for(Ua),Ar="None",Ko="Runtime",qo="Composite",_N=Ie(`${Ua}-${Ar}`);var I5;let pN=class{constructor(){d(this,I5,en);d(this,"_tag",Ar);d(this,"id",-1);d(this,"startTimeMillis",-1)}[(I5=en,U)](){return _N}[j](t){return mf(t)&&t._tag===Ar}toString(){return Pe(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ue](){return this.toJSON()}};var M5;class gN{constructor(t,r){d(this,"id");d(this,"startTimeMillis");d(this,M5,en);d(this,"_tag",Ko);this.id=t,this.startTimeMillis=r}[(M5=en,U)](){return ce(this,Ie(`${Ua}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[j](t){return mf(t)&&t._tag===Ko&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return Pe(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ue](){return this.toJSON()}}var P5;class mN{constructor(t,r){d(this,"left");d(this,"right");d(this,P5,en);d(this,"_tag",qo);d(this,"_hash");this.left=t,this.right=r}[(P5=en,U)](){return p(Ie(`${Ua}-${this._tag}`),B(w(this.left)),B(w(this.right)),ce(this))}[j](t){return mf(t)&&t._tag===qo&&x(this.left,t.left)&&x(this.right,t.right)}toString(){return Pe(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:he(this.left),right:he(this.right)}}[ue](){return this.toJSON()}}const Em=new pN,mf=e=>D(e,en),Sm=e=>e._tag===Ar||p(xu(e),fN(t=>Sm(t))),EN=f(2,(e,t)=>e._tag===Ar?t:t._tag===Ar?e:new mN(e,t)),SN=f(2,(e,t)=>Sm(e)?t:e),Wo=e=>{switch(e._tag){case Ar:return Or();case Ko:return Da(e.id);case qo:return p(Wo(e.left),Kn(Wo(e.right)))}},Bd=K(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Fa(0)),ym=e=>Array.from(Wo(e)).map(r=>`#${r}`).join(","),xu=e=>{switch(e._tag){case Ar:return Or();case Ko:return Da(e);case qo:return p(xu(e.left),Kn(xu(e.right)))}},yN=()=>{const e=Zr(Bd);return p(Bd,Mi(e+1)),new gN(e,Date.now())},hn=Em,vN=EN,vm=SN,TN=Wo,bN=ym,Tm=yN,ja=Ca,ON=B$,AN=V$,bm=H$,Om=si,Am=fm,RN=Ho,IN=df,Rm=X$,MN=dm,Im=La,oi=Symbol.for("effect/List"),Du=e=>z(e),PN=e=>KM(nf(e),Du),$N=PN(x),NN={[oi]:oi,_tag:"Cons",toString(){return Pe(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Du(this).map(he)}},[ue](){return this.toJSON()},[j](e){return Pm(e)&&this._tag===e._tag&&$N(this,e)},[U](){return ce(this,Ft(Du(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return C(this,arguments)}},Xo=(e,t)=>{const r=Object.create(NN);return r.head=e,r.tail=t,r},wN=Ie("Nil"),CN={[oi]:oi,_tag:"Nil",toString(){return Pe(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[ue](){return this.toJSON()},[U](){return wN},[j](e){return Pm(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return C(this,arguments)}},Mm=Object.create(CN),Pm=e=>D(e,oi),ir=e=>e._tag==="Nil",$m=e=>e._tag==="Cons",LN=()=>Mm,tn=(e,t)=>Xo(e,t),qn=LN,Ef=e=>Xo(e,Mm),kN=f(2,(e,t)=>DN(t,e)),xN=f(2,(e,t)=>tn(t,e)),DN=f(2,(e,t)=>{if(ir(e))return t;if(ir(t))return e;{const r=Xo(t.head,e);let n=r,s=t.tail;for(;!ir(s);){const i=Xo(s.head,e);n.tail=i,n=i,s=s.tail}return r}}),FN=f(3,(e,t,r)=>{let n=t,s=e;for(;!ir(s);)n=r(n,s.head),s=s.tail;return n}),UN=e=>{let t=qn(),r=e;for(;!ir(r);)t=xN(t,r.head),r=r.tail;return t},Sf=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=Ma,e}(),yf=e=>Object.assign(Object.create(Ma),e),jN=Symbol.for("effect/DifferContextPatch");function Gd(e){return e}const Pi={...Sf.prototype,[jN]:{_Value:Gd,_Patch:Gd}},BN=Object.assign(Object.create(Pi),{_tag:"Empty"}),GN=Object.create(BN),Nm=()=>GN,VN=Object.assign(Object.create(Pi),{_tag:"AndThen"}),HN=(e,t)=>{const r=Object.create(VN);return r.first=e,r.second=t,r},zN=Object.assign(Object.create(Pi),{_tag:"AddService"}),KN=(e,t)=>{const r=Object.create(zN);return r.key=e,r.service=t,r},qN=Object.assign(Object.create(Pi),{_tag:"RemoveService"}),WN=e=>{const t=Object.create(qN);return t.key=e,t},XN=Object.assign(Object.create(Pi),{_tag:"UpdateService"}),YN=(e,t)=>{const r=Object.create(XN);return r.key=e,r.update=t,r},JN=(e,t)=>{const r=new Map(e.unsafeMap);let n=Nm();for(const[s,i]of t.unsafeMap.entries())if(r.has(s)){const o=r.get(s);r.delete(s),x(o,i)||(n=To(YN(s,()=>i))(n))}else r.delete(s),n=To(KN(s,i))(n);for(const[s]of r.entries())n=To(WN(s))(n);return n},To=f(2,(e,t)=>HN(e,t)),QN=f(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,n=st(e);const s=new Map(t.unsafeMap);for(;Ne(n);){const o=Z(n),a=Re(n);switch(o._tag){case"Empty":{n=a;break}case"AddService":{s.set(o.key,o.service),n=a;break}case"AndThen":{n=we(we(a,o.second),o.first);break}case"RemoveService":{s.delete(o.key),n=a;break}case"UpdateService":{s.set(o.key,o.update(s.get(o.key))),r=!0,n=a;break}}}if(!r)return or(s);const i=new Map;for(const[o]of t.unsafeMap)s.has(o)&&(i.set(o,s.get(o)),s.delete(o));for(const[o,a]of s)i.set(o,a);return or(i)}),ZN=Symbol.for("effect/DifferHashSetPatch");function Qc(e){return e}const Ba={...Sf.prototype,[ZN]:{_Value:Qc,_Key:Qc,_Patch:Qc}},ew=Object.assign(Object.create(Ba),{_tag:"Empty"}),tw=Object.create(ew),wm=()=>tw,rw=Object.assign(Object.create(Ba),{_tag:"AndThen"}),nw=(e,t)=>{const r=Object.create(rw);return r.first=e,r.second=t,r},sw=Object.assign(Object.create(Ba),{_tag:"Add"}),iw=e=>{const t=Object.create(sw);return t.value=e,t},ow=Object.assign(Object.create(Ba),{_tag:"Remove"}),aw=e=>{const t=Object.create(ow);return t.value=e,t},cw=(e,t)=>{const[r,n]=zo([e,wm()],([s,i],o)=>lN(o)(s)?[mm(o)(s),i]:[s,Fu(iw(o))(i)])(t);return zo(n,(s,i)=>Fu(aw(i))(s))(r)},Fu=f(2,(e,t)=>nw(e,t)),uw=f(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,n=st(e);for(;Ne(n);){const s=Z(n),i=Re(n);switch(s._tag){case"Empty":{n=i;break}case"AndThen":{n=we(s.first)(we(s.second)(i));break}case"Add":{r=Ws(s.value)(r),n=i;break}case"Remove":r=mm(s.value)(r),n=i}}return r}),lw=Symbol.for("effect/DifferReadonlyArrayPatch");function Vd(e){return e}const $i={...Sf.prototype,[lw]:{_Value:Vd,_Patch:Vd}},fw=Object.assign(Object.create($i),{_tag:"Empty"}),hw=Object.create(fw),Cm=()=>hw,dw=Object.assign(Object.create($i),{_tag:"AndThen"}),_w=(e,t)=>{const r=Object.create(dw);return r.first=e,r.second=t,r},pw=Object.assign(Object.create($i),{_tag:"Append"}),gw=e=>{const t=Object.create(pw);return t.values=e,t},mw=Object.assign(Object.create($i),{_tag:"Slice"}),Ew=(e,t)=>{const r=Object.create(mw);return r.from=e,r.until=t,r},Sw=Object.assign(Object.create($i),{_tag:"Update"}),yw=(e,t)=>{const r=Object.create(Sw);return r.index=e,r.patch=t,r},vw=e=>{let t=0,r=Cm();for(;t<e.oldValue.length&&t<e.newValue.length;){const n=e.oldValue[t],s=e.newValue[t],i=e.differ.diff(n,s);x(i,e.differ.empty)||(r=bo(r,yw(t,i))),t=t+1}return t<e.oldValue.length&&(r=bo(r,Ew(0,t))),t<e.newValue.length&&(r=bo(r,gw(WP(t)(e.newValue)))),r},bo=f(2,(e,t)=>_w(e,t)),Tw=f(3,(e,t,r)=>{if(e._tag==="Empty")return t;let n=t.slice(),s=bt(e);for(;GP(s);){const i=lt(s),o=Vn(s);switch(i._tag){case"Empty":{s=o;break}case"AndThen":{o.unshift(i.first,i.second),s=o;break}case"Append":{for(const a of i.values)n.push(a);s=o;break}case"Slice":{n=n.slice(i.from,i.until),s=o;break}case"Update":{n[i.index]=r.patch(i.patch,n[i.index]),s=o;break}}}return n}),bw=Symbol.for("effect/Differ"),Ow={[bw]:{_P:Me,_V:Me}},cs=e=>{const t=Object.create(Ow);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},Aw=()=>cs({empty:Nm(),combine:(e,t)=>To(t)(e),diff:(e,t)=>JN(e,t),patch:(e,t)=>QN(t)(e)}),Rw=()=>cs({empty:wm(),combine:(e,t)=>Fu(t)(e),diff:(e,t)=>cw(e,t),patch:(e,t)=>uw(t)(e)}),Iw=e=>cs({empty:Cm(),combine:(t,r)=>bo(t,r),diff:(t,r)=>vw({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>Tw(t,r,e)}),Lm=()=>Mw((e,t)=>t),Mw=e=>cs({empty:Me,combine:(t,r)=>t===Me?r:r===Me?t:n=>r(t(n)),diff:(t,r)=>x(t,r)?Me:Ta(r),patch:(t,r)=>e(r,t(r))}),ai=255,km=8,Uu=e=>e&ai,ju=e=>e>>km&ai,Ni=(e,t)=>(e&ai)+((t&e&ai)<<km),Pw=Ni(0,0),$w=e=>Ni(e,e),Nw=e=>Ni(e,0),ww=f(2,(e,t)=>Ni(Uu(e)&~t,ju(e))),Cw=f(2,(e,t)=>e|t),Lw=e=>~e>>>0&ai,kw=0,us=1,xw=2,xm=4,Bu=16,Dm=32,Dw=e=>Ga(e,Dm),Fw=f(2,(e,t)=>e|t),Qt=e=>Fm(e)&&!jw(e),Fm=e=>Ga(e,us),Ga=f(2,(e,t)=>(e&t)!==0),Um=(...e)=>e.reduce((t,r)=>t|r,0),Uw=Um(kw),Hd=e=>Ga(e,xm),jw=e=>Ga(e,Bu),Tr=f(2,(e,t)=>Ni(e^t,t)),Un=f(2,(e,t)=>e&(Lw(Uu(t))|ju(t))|Uu(t)&ju(t)),zd=cs({empty:Pw,diff:(e,t)=>Tr(e,t),combine:(e,t)=>Cw(t)(e),patch:(e,t)=>Un(t,e)}),Bw=$w,jm=Nw,Kd=ww,Bm=(e,t)=>({_tag:"Par",left:e,right:t}),Ji=(e,t)=>({_tag:"Seq",left:e,right:t}),Gw=e=>{let t=Ef(e),r=qn();for(;;){const[n,s]=FN(t,[Gm(),qn()],([i,o],a)=>{const[c,u]=Vw(a);return[Ww(i,c),kN(o,u)]});if(r=Hw(r,n),ir(s))return UN(r);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},Vw=e=>{let t=e,r=Gm(),n=qn(),s=qn();for(;;)switch(t._tag){case"Empty":{if(ir(n))return[r,s];t=n.head,n=n.tail;break}case"Par":{n=tn(t.right,n),t=t.left;break}case"Seq":{const i=t.left,o=t.right;switch(i._tag){case"Empty":{t=o;break}case"Par":{const a=i.left,c=i.right;t=Bm(Ji(a,o),Ji(c,o));break}case"Seq":{const a=i.left,c=i.right;t=Ji(a,Ji(c,o));break}case"Single":{t=i,s=tn(o,s);break}}break}case"Single":{if(r=qw(r,t),ir(n))return[r,s];t=n.head,n=n.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},Hw=(e,t)=>{if(ir(e))return Ef(Zc(t));if(Xw(t))return e;const r=tC(e.head),n=Yw(t);return r.length===1&&n.length===1&&x(r[0],n[0])?tn(eC(e.head,Zc(t)),e.tail):tn(Zc(t),e)},zw=Symbol.for("effect/RequestBlock/RequestBlockParallel"),Kw={_R:e=>e};var $5;class vf{constructor(t){d(this,"map");d(this,$5,Kw);this.map=t}}$5=zw;const Gm=()=>new vf(ja()),qw=(e,t)=>new vf(IN(e.map,t.dataSource,r=>NP(xn(r,tm(t.blockedRequest)),()=>st(t.blockedRequest)))),Ww=(e,t)=>new vf(Im(e.map,t.map,(r,n,s)=>Om(r,s,mt(bm(r,s),{onNone:()=>n,onSome:i=>Ot(n,i)})))),Xw=e=>AN(e.map),Yw=e=>Array.from(Am(e.map)),Zc=e=>Zw(Rm(e.map,t=>st(t))),Jw=Symbol.for("effect/RequestBlock/RequestBlockSequential"),Qw={_R:e=>e};var N5;class Vm{constructor(t){d(this,"map");d(this,N5,Qw);this.map=t}}N5=Jw;const Zw=e=>new Vm(e),eC=(e,t)=>new Vm(Im(t.map,e.map,(r,n,s)=>Om(r,s,mt(bm(r,s),{onNone:()=>Be(),onSome:i=>Ot(i,n)})))),tC=e=>Array.from(Am(e.map)),rC=e=>Array.from(e.map),ls="Die",Wn="Empty",fs="Fail",hs="Interrupt",Xn="Parallel",Yn="Sequential",Hm="effect/Cause",zm=Symbol.for(Hm),nC={_E:e=>e},ds={[zm]:nC,[U](){return p(w(Hm),B(w(_C(this))),ce(this))},[j](e){return Km(e)&&dC(this,e)},pipe(){return C(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:he(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:he(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:he(this.left),right:he(this.right)}}},toString(){return Qn(this)},[ue](){return this.toJSON()}},rn=(()=>{const e=Object.create(ds);return e._tag=Wn,e})(),ci=e=>{const t=Object.create(ds);return t._tag=fs,t.error=e,t},Je=e=>{const t=Object.create(ds);return t._tag=ls,t.defect=e,t},nr=e=>{const t=Object.create(ds);return t._tag=hs,t.fiberId=e,t},vt=(e,t)=>{const r=Object.create(ds);return r._tag=Xn,r.left=e,r.right=t,r},Ge=(e,t)=>{const r=Object.create(ds);return r._tag=Yn,r.left=e,r.right=t,r},Km=e=>D(e,zm),sC=e=>e._tag===ls,iC=e=>e._tag===Wn?!0:Jn(e,!0,(t,r)=>{switch(r._tag){case Wn:return R(t);case ls:case fs:case hs:return R(!1);default:return T()}}),qm=e=>_e(uC(e)),Va=e=>Of(void 0,gC)(e),oC=e=>ar(Jn(e,Be(),(t,r)=>r._tag===fs?R(p(t,we(r.error))):T())),Wm=e=>ar(Jn(e,Be(),(t,r)=>r._tag===ls?R(p(t,we(r.defect))):T())),aC=e=>Jn(e,Or(),(t,r)=>r._tag===hs?R(p(t,Ws(r.fiberId))):T()),cC=e=>bf(e,t=>t._tag===fs?R(t.error):T()),Tf=e=>{const t=cC(e);switch(t._tag){case"None":return re(e);case"Some":return Te(t.value)}},uC=e=>bf(e,t=>t._tag===hs?R(t.fiberId):T()),lC=e=>Ha(e,{onEmpty:T(),onFail:t=>R(Je(t)),onDie:t=>R(Je(t)),onInterrupt:()=>T(),onSequential:(t,r)=>_e(t)&&_e(r)?R(Ge(t.value,r.value)):_e(t)&&Ce(r)?R(t.value):Ce(t)&&_e(r)?R(r.value):T(),onParallel:(t,r)=>_e(t)&&_e(r)?R(vt(t.value,r.value)):_e(t)&&Ce(r)?R(t.value):Ce(t)&&_e(r)?R(r.value):T()}),qd=e=>Ha(e,{onEmpty:rn,onFail:()=>rn,onDie:t=>Je(t),onInterrupt:t=>nr(t),onSequential:Ge,onParallel:vt}),fC=e=>Ha(e,{onEmpty:rn,onFail:t=>Je(t),onDie:t=>Je(t),onInterrupt:t=>nr(t),onSequential:(t,r)=>Ge(t,r),onParallel:(t,r)=>vt(t,r)}),Xm=f(2,(e,t)=>hC(e,r=>ci(t(r)))),hC=f(2,(e,t)=>Ha(e,{onEmpty:rn,onFail:r=>t(r),onDie:r=>Je(r),onInterrupt:r=>nr(r),onSequential:(r,n)=>Ge(r,n),onParallel:(r,n)=>vt(r,n)})),dC=(e,t)=>{let r=st(e),n=st(t);for(;Ne(r)&&Ne(n);){const[s,i]=p(Z(r),Jn([Or(),Be()],([c,u],l)=>{const[h,_]=Gu(l);return R([p(c,Kn(h)),p(u,Ot(_))])})),[o,a]=p(Z(n),Jn([Or(),Be()],([c,u],l)=>{const[h,_]=Gu(l);return R([p(c,Kn(h)),p(u,Ot(_))])}));if(!x(s,o))return!1;r=i,n=a}return!0},_C=e=>pC(st(e),Be()),pC=(e,t)=>{for(;;){const[r,n]=p(e,Pa([Or(),Be()],([i,o],a)=>{const[c,u]=Gu(a);return[p(i,Kn(c)),p(o,Ot(u))]})),s=gf(r)>0?p(t,we(r)):t;if(rm(n))return ar(s);e=n,t=s}throw new Error(Ai("Cause.flattenCauseLoop"))},bf=f(2,(e,t)=>{const r=[e];for(;r.length>0;){const n=r.pop(),s=t(n);switch(s._tag){case"None":{switch(n._tag){case Yn:case Xn:{r.push(n.right),r.push(n.left);break}}break}case"Some":return s}}return T()}),Gu=e=>{let t=e;const r=[];let n=Or(),s=Be();for(;t!==void 0;)switch(t._tag){case Wn:{if(r.length===0)return[n,s];t=r.pop();break}case fs:{if(n=Ws(n,Jc(t._tag,t.error)),r.length===0)return[n,s];t=r.pop();break}case ls:{if(n=Ws(n,Jc(t._tag,t.defect)),r.length===0)return[n,s];t=r.pop();break}case hs:{if(n=Ws(n,Jc(t._tag,t.fiberId)),r.length===0)return[n,s];t=r.pop();break}case Yn:{switch(t.left._tag){case Wn:{t=t.right;break}case Yn:{t=Ge(t.left.left,Ge(t.left.right,t.right));break}case Xn:{t=vt(Ge(t.left.left,t.right),Ge(t.left.right,t.right));break}default:{s=we(s,t.right),t=t.left;break}}break}case Xn:{r.push(t.right),t=t.left;break}}throw new Error(Ai("Cause.evaluateCauseLoop"))},gC={emptyCase:Mu,failCase:kn,dieCase:kn,interruptCase:Mu,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r},Wd="SequentialCase",Xd="ParallelCase",Ha=f(2,(e,{onDie:t,onEmpty:r,onFail:n,onInterrupt:s,onParallel:i,onSequential:o})=>Of(e,void 0,{emptyCase:()=>r,failCase:(a,c)=>n(c),dieCase:(a,c)=>t(c),interruptCase:(a,c)=>s(c),sequentialCase:(a,c,u)=>o(c,u),parallelCase:(a,c,u)=>i(c,u)})),Jn=f(3,(e,t,r)=>{let n=t,s=e;const i=[];for(;s!==void 0;){const o=r(n,s);switch(n=_e(o)?o.value:n,s._tag){case Yn:{i.push(s.right),s=s.left;break}case Xn:{i.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&i.length>0&&(s=i.pop())}return n}),Of=f(3,(e,t,r)=>{const n=[e],s=[];for(;n.length>0;){const o=n.pop();switch(o._tag){case Wn:{s.push(re(r.emptyCase(t)));break}case fs:{s.push(re(r.failCase(t,o.error)));break}case ls:{s.push(re(r.dieCase(t,o.defect)));break}case hs:{s.push(re(r.interruptCase(t,o.fiberId)));break}case Yn:{n.push(o.right),n.push(o.left),s.push(Te({_tag:Wd}));break}case Xn:{n.push(o.right),n.push(o.left),s.push(Te({_tag:Xd}));break}}}const i=[];for(;s.length>0;){const o=s.pop();switch(o._tag){case"Left":{switch(o.left._tag){case Wd:{const a=i.pop(),c=i.pop(),u=r.sequentialCase(t,a,c);i.push(u);break}case Xd:{const a=i.pop(),c=i.pop(),u=r.parallelCase(t,a,c);i.push(u);break}}break}case"Right":{i.push(o.right);break}}}if(i.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),mC=e=>{const t=e.split(`
`),r=[];for(let n=0;n<t.length;n++)if(r.push(t[n].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1")),t[n].includes("effect_instruction_i"))return r.join(`
`);return r.join(`
`)},Qn=e=>Va(e)?"All fibers interrupted without errors.":Ym(e).map(r=>{let n=r.message;if(r.stack&&(n+=`\r
${mC(r.stack)}`),r.span){let s=r.span,i=0;for(;s&&s._tag==="Span"&&i<10;)n+=`\r
    at ${s.name}`,s=tt(s.parent),i++}return n}).join(`\r
`);class Yd{constructor(t,r,n){d(this,"message");d(this,"stack");d(this,"span");this.message=t,this.stack=r,this.span=n}toJSON(){const t={message:this.message};return this.stack&&(t.stack=this.stack),this.span&&(t.span=this.span),t}}const Jd=e=>{if(typeof e=="string")return`Error: ${e}`;try{if(D(e,"toString")&&Oa(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return`Error: ${JSON.stringify(e)}`},Qd=Symbol.for("effect/SpanAnnotation"),Zd=e=>{var r;const t=D(e,Qd)&&e[Qd];return e instanceof Error?new Yd(Jd(e),(r=e.stack)==null?void 0:r.split(`
`).filter(n=>n.match(/at (.*)/)).join(`
`),t):new Yd(Jd(e),void 0,t)},Ym=e=>Of(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[Zd(r)],failCase:(t,r)=>[Zd(r)],interruptCase:()=>[],parallelCase:(t,r,n)=>[...r,...n],sequentialCase:(t,r,n)=>[...r,...n]}),wi="Pending",Af="Done",EC="effect/Deferred",SC=Symbol.for(EC),yC={_E:e=>e,_A:e=>e},vC=e=>({_tag:wi,joiners:e}),Jm=e=>({_tag:Af,effect:e});class Ci{constructor(t){d(this,"self");d(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new Ci(this.self)}}const e_=Symbol.for("effect/Tracer"),Qm=e=>({[e_]:e_,...e}),ui=Xe("effect/Tracer"),ur=Xe("effect/ParentSpan"),t_=function(){const e="abcdef0123456789",t=e.length;return function(r){let n="";for(let s=0;s<r;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class TC{constructor(t,r,n,s,i,o){d(this,"name");d(this,"parent");d(this,"context");d(this,"links");d(this,"startTime");d(this,"kind");d(this,"_tag","Span");d(this,"spanId");d(this,"traceId","native");d(this,"sampled",!0);d(this,"status");d(this,"attributes");d(this,"events",[]);this.name=t,this.parent=r,this.context=n,this.links=s,this.startTime=i,this.kind=o,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:t_(32),this.spanId=t_(16)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,n){this.events.push([t,r,n??{}])}}const bC=Qm({span:(e,t,r,n,s,i)=>new TC(e,t,r,n,s,i),context:e=>e()}),OC="effect/EffectError",AC=Symbol.for(OC),RC=e=>D(e,AC),Zm=(e,t)=>{const r=new qe("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},IC=e=>{const t=new qe("RunBlocked");return t.effect_instruction_i0=e,t},za=Symbol.for("effect/Effect");class MC{constructor(t,r){d(this,"patch");d(this,"op");d(this,"_op",Zl);this.patch=t,this.op=r}}var w5;class qe{constructor(t){d(this,"_op");d(this,"effect_instruction_i0");d(this,"effect_instruction_i1");d(this,"effect_instruction_i2");d(this,"trace");d(this,w5,Gn);this._op=t}[(w5=za,j)](t){return this===t}[U](){return ce(this,Xl(this))}pipe(){return C(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:he(this.effect_instruction_i0),effect_instruction_i1:he(this.effect_instruction_i1),effect_instruction_i2:he(this.effect_instruction_i2)}}toString(){return Pe(this.toJSON())}[ue](){return this.toJSON()}[Symbol.iterator](){return new Ci(new Aa(this))}}var C5;class eE{constructor(t){d(this,"_op");d(this,"effect_instruction_i0");d(this,"effect_instruction_i1");d(this,"effect_instruction_i2");d(this,"trace");d(this,C5,Gn);this._op=t,this._tag=t}[(C5=za,j)](t){return ec(t)&&t._op==="Failure"&&x(this.effect_instruction_i0,t.effect_instruction_i0)}[U](){return p(Ie(this._tag),B(w(this.effect_instruction_i0)),ce(this))}get cause(){return this.effect_instruction_i0}pipe(){return C(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Pe(this.toJSON())}[ue](){return this.toJSON()}[Symbol.iterator](){return new Ci(new Aa(this))}}var L5;class tE{constructor(t){d(this,"_op");d(this,"effect_instruction_i0");d(this,"effect_instruction_i1");d(this,"effect_instruction_i2");d(this,"trace");d(this,L5,Gn);this._op=t,this._tag=t}[(L5=za,j)](t){return ec(t)&&t._op==="Success"&&x(this.effect_instruction_i0,t.effect_instruction_i0)}[U](){return p(Ie(this._tag),B(w(this.effect_instruction_i0)),ce(this))}get value(){return this.effect_instruction_i0}pipe(){return C(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:he(this.value)}}toString(){return Pe(this.toJSON())}[ue](){return this.toJSON()}[Symbol.iterator](){return new Ci(new Aa(this))}}const zt=e=>D(e,za),oe=e=>{const t=new qe(vg);return t.effect_instruction_i0=e,t},Li=f(3,(e,t,r)=>lr(n=>E(e,s=>E(Et(Q(()=>n(t(s)))),i=>Q(()=>r(s,i)).pipe(Mt({onFailure:o=>{switch(i._tag){case ne:return Ee(vt(i.effect_instruction_i0,o));case se:return Ee(o)}},onSuccess:()=>i})))))),ke=f(2,(e,t)=>E(e,()=>y(t))),nt=e=>ke(e,void 0),rE=function(){const e=new qe(Ql);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Ai("you're not supposed to end up here"))}return e},Qe=(e,t=hn)=>rE(e,function(){let r,n;function s(c){r?r(c):n===void 0&&(n=c)}const i=new qe(So);i.effect_instruction_i0=c=>{r=c,n&&c(n)},i.effect_instruction_i1=t;let o,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,o=this.effect_instruction_i0(s,a.signal)):o=this.effect_instruction_i0(s),o||a?lE(i,c=>(a&&a.abort(),o??me)):i}),nE=f(2,(e,t)=>{const r=new qe(yo);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Yo=f(2,(e,t)=>cr(e,{onFailure:t,onSuccess:y})),sE=f(3,(e,t,r)=>nE(e,n=>{const s=Tf(n);switch(s._tag){case"Left":return t(s.left)?r(s.left):Ee(n);case"Right":return Ee(s.right)}})),Jo=Symbol.for("effect/SpanAnnotation"),r_=Symbol.for("effect/OriginalAnnotation"),iE=(e,t)=>_e(t)?new Proxy(e,{has(r,n){return n===Jo||n===r_||n in r},get(r,n){return n===Jo?t.value:n===r_?e:r[n]}}):e,_s=e=>ql(e)&&!(Jo in e)?oe(t=>Ee(Je(iE(e,CE(t))))):Ee(Je(e)),PC=e=>oE(()=>Je(new s1(e))),ki=e=>E(S(e),_s),Zn=e=>cr(e,{onFailure:t=>y(Te(t)),onSuccess:t=>y(re(t))}),Et=e=>NC(e,{onFailure:W,onSuccess:te}),ee=e=>ql(e)&&!(Jo in e)?oe(t=>Ee(ci(iE(e,CE(t))))):Ee(ci(e)),Ka=e=>E(S(e),ee),Ee=e=>{const t=new eE(ne);return t.effect_instruction_i0=e,t},oE=e=>E(S(e),Ee),qa=oe(e=>y(e.id())),aE=e=>oe(t=>e(t.id())),E=f(2,(e,t)=>{const r=new qe(Uo);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Fs=f(2,(e,t)=>E(e,r=>{const n=typeof t=="function"?t(r):t;return zt(n)?n:gg(n)?Qe(s=>{n.then(i=>s(y(i)),i=>s(ee(new Cn(i))))}):y(n)})),$C=e=>{const t=new qe("OnStep");return t.effect_instruction_i0=e,t},es=e=>E(e,Me),NC=f(2,(e,t)=>Mt(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),Mt=f(2,(e,t)=>{const r=new qe(jo);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),cr=f(2,(e,t)=>Mt(e,{onFailure:r=>{if(Wm(r).length>0)return Ee(fC(r));const s=oC(r);return s.length>0?t.onFailure(sm(s)):Ee(r)},onSuccess:t.onSuccess})),Rt=f(2,(e,t)=>Q(()=>{const r=z(e),n=ni(r.length);let s=0;return ke(Rf({while:()=>s<r.length,body:()=>t(r[s],s),step:i=>{n[s++]=i}}),n)})),Rr=f(2,(e,t)=>Q(()=>{const r=z(e);let n=0;return Rf({while:()=>n<r.length,body:()=>t(r[n],n),step:()=>{n++}})})),wC=e=>Ee(nr(e)),cE=e=>{const t=new qe(is);return t.effect_instruction_i0=Bw(us),t.effect_instruction_i1=()=>e,t},CC=f(2,(e,t)=>lr(r=>E(Et(r(e)),n=>$E(t,n)))),I=f(2,(e,t)=>E(e,r=>S(()=>t(r)))),uE=f(2,(e,t)=>cr(e,{onFailure:r=>Ka(()=>t.onFailure(r)),onSuccess:r=>S(()=>t.onSuccess(r))})),Wa=f(2,(e,t)=>Mt(e,{onFailure:r=>{const n=Tf(r);switch(n._tag){case"Left":return Ka(()=>t(n.left));case"Right":return Ee(n.right)}},onSuccess:y})),nn=f(2,(e,t)=>lr(r=>Mt(r(e),{onFailure:n=>{const s=W(n);return Mt(t(s),{onFailure:i=>W(Ge(n,i)),onSuccess:()=>s})},onSuccess:n=>{const s=te(n);return ge(t(s),s)}}))),lE=f(2,(e,t)=>nn(e,tc({onFailure:r=>Va(r)?nt(t(aC(r))):me,onSuccess:()=>me}))),fE=f(2,(e,t)=>DC(e,t,y)),hE=e=>LC(e,Me),LC=f(2,(e,t)=>cr(e,{onFailure:r=>_s(t(r)),onSuccess:y})),kC=oe((e,t)=>y(t.runtimeFlags)),y=e=>{const t=new tE(se);return t.effect_instruction_i0=e,t},Q=e=>E(S(e),Me),S=e=>{const t=new qe(yg);return t.effect_instruction_i0=e,t},dn=f(2,(e,t)=>E(e,r=>{const n=typeof t=="function"?t(r):t;return zt(n)?ke(n,r):gg(n)?Qe(s=>{n.then(i=>s(y(r)),i=>s(ee(new Cn(i))))}):y(r)})),xC=e=>oe(t=>{const r=t.getFiberRef(Hu),n=p(r,rt(()=>t.scope()));return e(ps(Hu,R(n)))}),DC=f(3,(e,t,r)=>Mt(e,{onFailure:n=>Wm(n).length>0?Ee(Fg(lC(n))):t(),onSuccess:r})),Xa=e=>{const t=new qe(is);return t.effect_instruction_i0=jm(us),t.effect_instruction_i1=()=>e,t},lr=e=>rE(e,function(){const t=new qe(is);return t.effect_instruction_i0=jm(us),t.effect_instruction_i1=r=>Fm(r)?this.effect_instruction_i0(cE):this.effect_instruction_i0(Xa),t}),me=y(void 0),dE=e=>{const t=new qe(is);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},_E=f(2,(e,t)=>E(t,r=>r?p(e,I(R)):y(T()))),Rf=e=>{const t=new qe(Bo);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},FC=f(2,(e,t)=>{const r=new qe(is);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r}),If=e=>{const t=new qe(vo);return typeof(e==null?void 0:e.priority)<"u"?e1(t,e.priority):t},Ya=f(2,(e,t)=>E(e,r=>I(t,n=>[r,n]))),pE=f(2,(e,t)=>E(e,r=>ke(t,r))),ge=f(2,(e,t)=>E(e,()=>t)),sn=f(3,(e,t,r)=>E(e,n=>I(t,s=>r(n,s)))),Xs=Qe(()=>{const e=setInterval(()=>{},2147483647);return S(()=>clearInterval(e))}),Ja=e=>E(qa,t=>p(e,li(t))),li=f(2,(e,t)=>E(e.interruptAsFork(t),()=>e.await)),UC={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},jC={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},BC={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},GC={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},gE={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},mE={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},VC={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},HC={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},zC="effect/FiberRef",KC=Symbol.for(zC),qC={_A:e=>e},xi=e=>EE(e,t=>[t,t]),fr=f(2,(e,t)=>E(xi(e),t)),Qo=f(2,(e,t)=>EE(e,()=>[void 0,t])),EE=f(2,(e,t)=>oe(r=>{const[n,s]=t(r.getFiberRef(e));return r.setFiberRef(e,s),y(n)})),ps=f(3,(e,t,r)=>Li(pE(xi(t),Qo(t,r)),()=>e,n=>Qo(t,n))),Mf=f(3,(e,t,r)=>fr(t,n=>ps(e,t,r(n)))),De=(e,t)=>gs(e,{differ:Lm(),fork:(t==null?void 0:t.fork)??Me,join:t==null?void 0:t.join}),WC=e=>{const t=Rw();return gs(e,{differ:t,fork:t.empty})},XC=e=>{const t=Iw(Lm());return gs(e,{differ:t,fork:t.empty})},SE=e=>{const t=Aw();return gs(e,{differ:t,fork:t.empty})},gs=(e,t)=>({[KC]:qC,initial:e,diff:(r,n)=>t.differ.diff(r,n),combine:(r,n)=>t.differ.combine(r,n),patch:r=>n=>t.differ.patch(r,n),fork:t.fork,join:t.join??((r,n)=>n),pipe(){return C(this,arguments)}}),YC=e=>gs(e,{differ:zd,fork:zd.empty}),Tt=K(Symbol.for("effect/FiberRef/currentContext"),()=>SE(yt())),Di=K(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>De(0)),yE=K(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>De(2048)),JC=K(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>De(ja())),QC=K(Symbol.for("effect/FiberRef/currentLogLevel"),()=>De(gE)),ZC=K(Symbol.for("effect/FiberRef/currentLogSpan"),()=>De(qn())),e1=f(2,(e,t)=>ps(e,Di,t)),t1=K(Symbol.for("effect/FiberRef/currentConcurrency"),()=>De("unbounded")),vE=K(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>De(!0)),TE=K(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>De(R(mE))),Vu=K(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>XC(Jr())),Hu=K(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>De(T(),{fork:()=>T(),join:(e,t)=>e})),Qi=K(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>De(rn,{fork:()=>rn,join:(e,t)=>e})),bE=K(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>De(!0)),Qa=K(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>De(!0)),r1=K(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>De(ja())),n1=K(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>De(Be())),zu=Symbol.for("effect/Scope"),Ku=Symbol.for("effect/CloseableScope"),OE=(e,t)=>e.addFinalizer(()=>nt(t)),fi=(e,t)=>e.addFinalizer(t),Zo=(e,t)=>e.close(t),Za=(e,t)=>e.fork(t),AE=function(){class e extends globalThis.Error{commit(){return ee(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[ue](){const r=this.stack;return r?`${this.toString()}
${r.split(`
`).slice(1).join(`
`)}`:this.toString()}}return Object.assign(e.prototype,pP),e}(),Pf=(e,t)=>{class r extends AE{constructor(){super(...arguments);d(this,"_tag",t)}}return Object.assign(r.prototype,e),r.prototype.name=t,r},n_=Symbol.for("effect/Cause/errors/RuntimeException"),s1=Pf({[n_]:n_},"RuntimeException"),i1=Symbol.for("effect/Cause/errors/InterruptedException"),o1=e=>D(e,i1),s_=Symbol.for("effect/Cause/errors/IllegalArgument"),Fi=Pf({[s_]:s_},"IllegalArgumentException"),i_=Symbol.for("effect/Cause/errors/NoSuchElement"),Ui=Pf({[i_]:i_},"NoSuchElementException"),o_=Symbol.for("effect/Cause/errors/UnknownException"),Cn=function(){class e extends AE{constructor(n,s){super(s??(D(n,"message")&&Kl(n.message)?n.message:void 0));d(this,"error");d(this,"_tag","UnknownException");this.error=n}}return Object.assign(e.prototype,{[o_]:o_,name:"UnknownException"}),e}(),ec=e=>zt(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),a1=e=>e._tag==="Failure",c1=e=>e._tag==="Success",u1=e=>{switch(e._tag){case ne:return qm(e.effect_instruction_i0);case se:return!1}},RE=f(2,(e,t)=>{switch(e._tag){case ne:return W(e.effect_instruction_i0);case se:return te(t)}}),Oo=e=>RE(e,void 0),l1=e=>{switch(e._tag){case ne:return R(e.effect_instruction_i0);case se:return T()}},Vr=(e,t)=>I1(e,t!=null&&t.parallel?vt:Ge),qu=e=>W(Je(e)),f1=f(2,(e,t)=>{switch(e._tag){case ne:return!1;case se:return t(e.effect_instruction_i0)}}),hi=e=>W(ci(e)),W=e=>{const t=new eE(ne);return t.effect_instruction_i0=e,t},IE=f(2,(e,t)=>{switch(e._tag){case ne:return W(e.effect_instruction_i0);case se:return t(e.effect_instruction_i0)}}),h1=f(2,(e,t)=>{switch(e._tag){case ne:return y(W(e.effect_instruction_i0));case se:return t(e.effect_instruction_i0)}}),d1=e=>p(e,IE(Me)),_1=f(2,(e,t)=>{switch(e._tag){case ne:return y(W(e.effect_instruction_i0));case se:return Et(t(e.effect_instruction_i0))}}),p1=e=>{switch(e._tag){case"Left":return hi(e.left);case"Right":return te(e.right)}},g1=e=>{switch(e._tag){case"None":return hi(void 0);case"Some":return te(e.value)}},m1=f(2,(e,t)=>{switch(e._tag){case ne:return t(e.effect_instruction_i0);case se:return e.effect_instruction_i0}}),ME=e=>W(nr(e)),Ao=f(2,(e,t)=>{switch(e._tag){case ne:return W(e.effect_instruction_i0);case se:return te(t(e.effect_instruction_i0))}}),E1=f(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case ne:return W(p(e.effect_instruction_i0,Xm(t)));case se:return te(r(e.effect_instruction_i0))}}),S1=f(2,(e,t)=>{switch(e._tag){case ne:return W(p(e.effect_instruction_i0,Xm(t)));case se:return te(e.effect_instruction_i0)}}),y1=f(2,(e,t)=>{switch(e._tag){case ne:return W(t(e.effect_instruction_i0));case se:return te(e.effect_instruction_i0)}}),tc=f(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case ne:return t(e.effect_instruction_i0);case se:return r(e.effect_instruction_i0)}}),PE=f(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case ne:return t(e.effect_instruction_i0);case se:return r(e.effect_instruction_i0)}}),te=e=>{const t=new tE(se);return t.effect_instruction_i0=e,t},at=te(void 0),v1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>[r,n],onFailure:Ge})),T1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>r,onFailure:Ge})),b1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>n,onFailure:Ge})),O1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>[r,n],onFailure:vt})),A1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>r,onFailure:vt})),R1=f(2,(e,t)=>hr(e,t,{onSuccess:(r,n)=>n,onFailure:vt})),hr=f(3,(e,t,{onFailure:r,onSuccess:n})=>{switch(e._tag){case ne:switch(t._tag){case se:return W(e.effect_instruction_i0);case ne:return W(r(e.effect_instruction_i0,t.effect_instruction_i0))}case se:switch(t._tag){case se:return te(n(e.effect_instruction_i0,t.effect_instruction_i0));case ne:return W(t.effect_instruction_i0)}}}),I1=(e,t)=>{const r=of(e);return Ne(r)?p(Re(r),Pa(p(Z(r),Ao(st)),(n,s)=>p(n,hr(s,{onSuccess:(i,o)=>p(i,we(o)),onFailure:t}))),Ao(ar),Ao(n=>sr(n)),R):T()},$f=e=>({[SC]:yC,state:Fa(vC([])),blockingOn:e,pipe(){return C(this,arguments)}}),Nf=()=>E(qa,e=>M1(e)),M1=e=>S(()=>$f(e)),rc=e=>Qe(t=>{const r=Zr(e.state);switch(r._tag){case Af:return t(r.effect);case wi:return r.joiners.push(t),w1(e,t)}},e.blockingOn),nc=f(2,(e,t)=>S(()=>{const r=Zr(e.state);switch(r._tag){case Af:return!1;case wi:{Mi(e.state,Jm(t));for(let n=0,s=r.joiners.length;n<s;n++)r.joiners[n](t);return!0}}})),$E=f(2,(e,t)=>nc(e,t)),P1=f(2,(e,t)=>nc(e,Ee(t))),$1=e=>E(qa,t=>nc(e,wC(t))),N1=f(2,(e,t)=>nc(e,y(t))),NE=(e,t)=>{const r=Zr(e.state);if(r._tag===wi){Mi(e.state,Jm(t));for(let n=0,s=r.joiners.length;n<s;n++)r.joiners[n](t)}},w1=(e,t)=>S(()=>{const r=Zr(e.state);if(r._tag===wi){const n=r.joiners.indexOf(t);n>=0&&r.joiners.splice(n,1)}}),C1=xi(Tt),wf=()=>C1,Pr=e=>E(wf(),e),Kt=f(2,(e,t)=>ps(Tt,t)(e)),Cf=f(2,(e,t)=>Mf(Tt,r=>as(r,t))(e)),wE=f(2,(e,t)=>Pr(r=>Kt(e,t(r)))),CE=e=>{const t=e.getFiberRef(Tt).unsafeMap.get(ur.key);return t!==void 0&&t._tag==="Span"?R(t):T()},L1={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:T(),context:yt(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:at},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},k1=e=>{const t=Object.create(L1);return t.name=e,t},Wu=Symbol.for("effect/Duration"),Pn=BigInt(0),eu=BigInt(24),yn=BigInt(60),Ro=BigInt(1e3),tu=BigInt(1e6),Xu=BigInt(1e9),a_=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,ae=e=>{if(LE(e))return e;if(Eo(e))return Gt(e);if(WM(e))return ru(e);if(Array.isArray(e)){if(e.length===2&&Eo(e[0])&&Eo(e[1]))return ru(BigInt(e[0])*Xu+BigInt(e[1]))}else if(Kl(e)){a_.lastIndex=0;const t=a_.exec(e);if(t){const[r,n,s]=t,i=Number(n);switch(s){case"nano":case"nanos":return ru(BigInt(n));case"micro":case"micros":return F1(BigInt(n));case"milli":case"millis":return Gt(i);case"second":case"seconds":return kE(i);case"minute":case"minutes":return U1(i);case"hour":case"hours":return j1(i);case"day":case"days":return B1(i);case"week":case"weeks":return G1(i)}}}throw new Error("Invalid DurationInput")},c_={_tag:"Millis",millis:0},x1={_tag:"Infinity"},D1={[Wu]:Wu,[U](){return ce(this,Sg(this.value))},[j](e){return LE(e)&&W1(this,e)},toString(){return`Duration(${X1(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:H1(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},ht=e=>{const t=Object.create(D1);return Eo(e)?isNaN(e)||e<=0?t.value=c_:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=x1:e<=Pn?t.value=c_:t.value={_tag:"Nanos",nanos:e},t},LE=e=>D(e,Wu),on=ht(0),ru=e=>ht(e),F1=e=>ht(e*Ro),Gt=e=>ht(e),kE=e=>ht(e*1e3),U1=e=>ht(e*6e4),j1=e=>ht(e*36e5),B1=e=>ht(e*864e5),G1=e=>ht(e*6048e5),St=e=>{const t=ae(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},V1=e=>{const t=ae(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},H1=e=>{const t=ae(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Xu),Number(t.value.nanos%Xu)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},z1=f(2,(e,t)=>{const r=ae(e);switch(r.value._tag){case"Nanos":return t.onNanos(r.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(r.value.millis)}}),sc=f(3,(e,t,r)=>{const n=ae(e),s=ae(t);if(n.value._tag==="Infinity"||s.value._tag==="Infinity")return r.onMillis(St(n),St(s));if(n.value._tag==="Nanos"||s.value._tag==="Nanos"){const i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6)),o=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return r.onNanos(i,o)}return r.onMillis(n.value.millis,s.value.millis)}),K1=(e,t)=>sc(e,t,{onMillis:(r,n)=>r===n,onNanos:(r,n)=>r===n}),xE=f(2,(e,t)=>z1(e,{onMillis:r=>ht(r*t),onNanos:r=>ht(r*BigInt(t))})),DE=f(2,(e,t)=>sc(e,t,{onMillis:(r,n)=>ht(r+n),onNanos:(r,n)=>ht(r+n)})),q1=f(2,(e,t)=>sc(e,t,{onMillis:(r,n)=>r<n,onNanos:(r,n)=>r<n})),FE=f(2,(e,t)=>sc(e,t,{onMillis:(r,n)=>r>=n,onNanos:(r,n)=>r>=n})),W1=f(2,(e,t)=>K1(ae(e),ae(t))),X1=e=>{const t=ae(e),r=[];if(t.value._tag==="Infinity")return"Infinity";const n=V1(t);n%tu&&r.push(`${n%tu}ns`);const s=n/tu;s%Ro!==Pn&&r.push(`${s%Ro}ms`);const i=s/Ro;i%yn!==Pn&&r.push(`${i%yn}s`);const o=i/yn;o%yn!==Pn&&r.push(`${o%yn}m`);const a=o/yn;a%eu!==Pn&&r.push(`${a%eu}h`);const c=a/eu;return c!==Pn&&r.push(`${c}d`),r.reverse().join(" ")},Y1="effect/Clock",u_=Symbol.for(Y1),$r=Xe("effect/Clock"),J1=2**31-1,l_={unsafeSchedule(e,t){const r=St(t);if(r>J1)return kn;let n=!1;const s=setTimeout(()=>{n=!0,e()},r);return()=>(clearTimeout(s),!n)}},f_=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;const t="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),Q1=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return f_;const t=f_()-e.bigint();return()=>t+e.bigint()}();var k5;class Z1{constructor(){d(this,k5,u_);d(this,"currentTimeMillis",S(()=>this.unsafeCurrentTimeMillis()));d(this,"currentTimeNanos",S(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return Q1()}scheduler(){return y(l_)}sleep(t){return Qe(r=>{const n=l_.unsafeSchedule(()=>r(me),t);return nt(S(n))})}}k5=u_;const eL=()=>new Z1,gt=RP,tL=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),Lf="And",kf="Or",xf="InvalidData",Df="MissingData",Ff="SourceUnavailable",Uf="Unsupported",rL="effect/ConfigError",h_=Symbol.for(rL),ms={_tag:"ConfigError",[h_]:h_},UE=(e,t)=>{const r=Object.create(ms);return r._op=Lf,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},jE=(e,t)=>{const r=Object.create(ms);return r._op=kf,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},nL=(e,t,r={pathDelim:"."})=>{const n=Object.create(ms);return n._op=xf,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${p(this.path,os(r.pathDelim))}: "${this.message}")`}}),n},an=(e,t,r={pathDelim:"."})=>{const n=Object.create(ms);return n._op=Df,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${p(this.path,os(r.pathDelim))}: "${this.message}")`}}),n},sL=(e,t,r,n={pathDelim:"."})=>{const s=Object.create(ms);return s._op=Ff,s.path=e,s.message=t,s.cause=r,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${p(this.path,os(n.pathDelim))}: "${this.message}")`}}),s},iL=(e,t,r={pathDelim:"."})=>{const n=Object.create(ms);return n._op=Uf,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${p(this.path,os(r.pathDelim))}: "${this.message}")`}}),n},Fr=f(2,(e,t)=>{switch(e._op){case Lf:return UE(Fr(e.left,t),Fr(e.right,t));case kf:return jE(Fr(e.left,t),Fr(e.right,t));case xf:return nL([...t,...e.path],e.message);case Df:return an([...t,...e.path],e.message);case Ff:return sL([...t,...e.path],e.message,e.cause);case Uf:return iL([...t,...e.path],e.message)}}),oL={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:kn,missingDataCase:Mu,sourceUnavailableCase:kn,unsupportedCase:kn},aL=f(3,(e,t,r)=>{const n=[e],s=[];for(;n.length>0;){const o=n.pop();switch(o._op){case Lf:{n.push(o.right),n.push(o.left),s.push(Te({_op:"AndCase"}));break}case kf:{n.push(o.right),n.push(o.left),s.push(Te({_op:"OrCase"}));break}case xf:{s.push(re(r.invalidDataCase(t,o.path,o.message)));break}case Df:{s.push(re(r.missingDataCase(t,o.path,o.message)));break}case Ff:{s.push(re(r.sourceUnavailableCase(t,o.path,o.message,o.cause)));break}case Uf:{s.push(re(r.unsupportedCase(t,o.path,o.message)));break}}}const i=[];for(;s.length>0;){const o=s.pop();switch(o._op){case"Left":{switch(o.left._op){case"AndCase":{const a=i.pop(),c=i.pop(),u=r.andCase(t,a,c);i.push(u);break}case"OrCase":{const a=i.pop(),c=i.pop(),u=r.orCase(t,a,c);i.push(u);break}}break}case"Right":{i.push(o.right);break}}}if(i.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),cL=e=>aL(e,void 0,oL),uL={_tag:"Empty"},nu=f(2,(e,t)=>{let r=Ef(t),n=e;for(;$m(r);){const s=r.head;switch(s._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=tn(s.first,tn(s.second,r.tail));break}case"MapName":{n=Dn(n,s.f),r=r.tail;break}case"Nested":{n=Go(n,s.name),r=r.tail;break}case"Unnested":{if(p(qs(n),xP(s.name)))n=Vn(n),r=r.tail;else return Te(an(n,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return re(n)}),BE="Constant",lL="Fail",GE="Fallback",fL="Described",VE="Lazy",HE="MapOrFail",zE="Nested",KE="Primitive",hL="Sequence",dL="HashMap",_L="ZipWith";var d_={};const ea=(e,t)=>[...e,...t],pL="effect/ConfigProvider",__=Symbol.for(pL),jf=Xe("effect/ConfigProvider"),gL="effect/ConfigProviderFlat",p_=Symbol.for(gL),mL=e=>({[__]:__,pipe(){return C(this,arguments)},...e}),EL=e=>({[p_]:p_,patch:e.patch,load:(t,r,n=!0)=>e.load(t,r,n),enumerateChildren:e.enumerateChildren}),SL=e=>mL({load:t=>E(_t(e,Jr(),t,!1),r=>mt(qs(r),{onNone:()=>ee(an(Jr(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),yL=e=>{const{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=c=>p(c,os(t)),s=c=>c.split(t),i=()=>typeof process<"u"&&"env"in process&&typeof d_=="object"?d_:{};return SL(EL({load:(c,u,l=!0)=>{const h=n(c),_=i(),g=h in _?R(_[h]):T();return p(g,Wa(()=>an(c,`Expected ${h} to exist in the process context`)),E(m=>AL(m,c,u,r,l)))},enumerateChildren:c=>S(()=>{const u=i(),_=Object.keys(u).map(g=>s(g.toUpperCase())).filter(g=>{for(let m=0;m<c.length;m++){const b=p(c,Bg(m)),A=g[m];if(A===void 0||b!==A)return!1}return!0}).flatMap(g=>g.slice(c.length,c.length+1));return uN(_)}),patch:uL}))},vL=(e,t,r,n)=>{const s=Dd(r.length,c=>c>=n.length?T():R([e(c),c+1])),i=Dd(n.length,c=>c>=r.length?T():R([t(c),c+1])),o=ea(r,s),a=ea(n,i);return[o,a]},TL=(e,t)=>{let r=t;if(r._tag==="Nested"){const n=e.slice();for(;r._tag==="Nested";)n.push(r.name),r=r.config;return n}return e},_t=(e,t,r,n)=>{const s=r;switch(s._tag){case BE:return y(bt(s.value));case fL:return Q(()=>_t(e,t,s.config,n));case lL:return ee(an(t,s.message));case GE:return p(Q(()=>_t(e,t,s.first,n)),Yo(i=>s.condition(i)?p(_t(e,t,s.second,n),Yo(o=>ee(jE(i,o)))):ee(i)));case VE:return Q(()=>_t(e,t,s.config(),n));case HE:return Q(()=>p(_t(e,t,s.original,n),E(Rt(i=>p(s.mapOrFail(i),Wa(Fr(TL(t,s.original))))))));case zE:return Q(()=>_t(e,ea(t,bt(s.name)),s.config,n));case KE:return p(nu(t,e.patch),E(i=>p(e.load(i,s,n),E(o=>{if(o.length===0){const a=p(zP(i),rt(()=>"<n/a>"));return ee(an([],`Expected ${s.description} with name ${a}`))}return y(o)}))));case hL:return p(nu(t,e.patch),E(i=>p(e.enumerateChildren(i),E(IL),E(o=>o.length===0?Q(()=>I(_t(e,i,s.config,!0),bt)):p(Rt(o,a=>_t(e,UP(t,`[${a}]`),s.config,!0)),I(a=>{const c=Vg(a);return c.length===0?bt(Jr()):bt(c)}))))));case dL:return Q(()=>p(nu(t,e.patch),E(i=>p(e.enumerateChildren(i),E(o=>p(o,Rt(a=>_t(e,ea(i,bt(a)),s.valueConfig,n)),I(a=>a.length===0?bt(ja()):p(RL(a),Dn(c=>ON(xd(z(o),c)))))))))));case _L:return Q(()=>p(_t(e,t,s.left,n),Zn,E(i=>p(_t(e,t,s.right,n),Zn,E(o=>{if(rr(i)&&rr(o))return ee(UE(i.left,o.left));if(rr(i)&&Nn(o))return ee(i.left);if(Nn(i)&&rr(o))return ee(o.left);if(Nn(i)&&Nn(o)){const a=p(t,os(".")),c=bL(t,a),[u,l]=vL(c,c,p(i.right,Dn(re)),p(o.right,Dn(re)));return p(u,xd(l),Rt(([h,_])=>p(Ya(h,_),I(([g,m])=>s.zip(g,m)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},bL=(e,t)=>r=>Te(an(e,`The element at index ${r} in a sequence at path "${t}" was missing`)),OL=(e,t)=>e.split(new RegExp(`\\s*${tL(t)}\\s*`)),AL=(e,t,r,n,s)=>s?p(OL(e,n),Rt(i=>r.parse(i.trim())),Wa(Fr(t))):p(r.parse(e),uE({onFailure:Fr(t),onSuccess:bt})),RL=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),IL=e=>p(Rt(e,PL),uE({onFailure:()=>Jr(),onSuccess:er(gt)}),Zn,I(ef)),ML=/^(\[(\d+)\])$/,PL=e=>{const t=e.match(ML);if(t!==null){const r=t[2];return p(r!==void 0&&r.length>0?R(r):T(),rf($L))}return T()},$L=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?T():R(t)},Yu=Symbol.for("effect/Console"),Es=Xe("effect/Console"),NL={[Yu]:Yu,assert(e,...t){return S(()=>{console.assert(e,...t)})},clear:S(()=>{console.clear()}),count(e){return S(()=>{console.count(e)})},countReset(e){return S(()=>{console.countReset(e)})},debug(...e){return S(()=>{console.debug(...e)})},dir(e,t){return S(()=>{console.dir(e,t)})},dirxml(...e){return S(()=>{console.dirxml(...e)})},error(...e){return S(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?S(()=>console.groupCollapsed(e==null?void 0:e.label)):S(()=>console.group(e==null?void 0:e.label))},groupEnd:S(()=>{console.groupEnd()}),info(...e){return S(()=>{console.info(...e)})},log(...e){return S(()=>{console.log(...e)})},table(e,t){return S(()=>{console.table(e,t)})},time(e){return S(()=>console.time(e))},timeEnd(e){return S(()=>console.timeEnd(e))},timeLog(e,...t){return S(()=>{console.timeLog(e,...t)})},trace(...e){return S(()=>{console.trace(...e)})},warn(...e){return S(()=>{console.warn(...e)})},unsafe:console},wL="effect/Random",g_=Symbol.for(wL),qE=Xe("effect/Random");var x5;class CL{constructor(t){d(this,"seed");d(this,x5,g_);d(this,"PRNG");this.seed=t,this.PRNG=new Eg(t)}get next(){return S(()=>this.PRNG.number())}get nextBoolean(){return I(this.next,t=>t>.5)}get nextInt(){return S(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return I(this.next,n=>(r-t)*n+t)}nextIntBetween(t,r){return S(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return LL(t,r=>this.nextIntBetween(0,r))}}x5=g_;const LL=(e,t)=>Q(()=>p(S(()=>Array.from(e)),E(r=>{const n=[];for(let s=r.length;s>=2;s=s-1)n.push(s);return p(n,Rr(s=>p(t(s),I(i=>kL(r,s-1,i)))),ke(of(r)))}))),kL=(e,t,r)=>{const n=e[t];return e[t]=e[r],e[r]=n,e},xL=e=>new CL(e),DL=p(yt(),He($r,eL()),He(Es,NL),He(qE,xL(Math.random()*4294967296>>>0)),He(jf,yL()),He(ui,bC)),Ke=K(Symbol.for("effect/DefaultServices/currentServices"),()=>SE(DL)),FL=e=>{const t=ae(e);return Bf(r=>r.sleep(t))},Bf=e=>fr(Ke,t=>e(Le(t,$r))),UL=Bf(e=>e.currentTimeMillis),jL=e=>fr(Ke,t=>e(Le(t,jf))),BL=e=>jL(t=>t.load(e)),GL=e=>fr(Ke,t=>e(Le(t,qE))),VL=GL(e=>e.next),Zi=rc,HL=$E,zL=$1,m_=$f,E_=Tg,WE="Sequential",XE="Parallel",KL="ParallelN",ic={_tag:WE},qL={_tag:XE},WL=e=>({_tag:KL,parallelism:e}),XL=e=>e._tag===WE,YL=e=>e._tag===XE,Ju=ic,Qu=qL,Zu=WL;function JL(e){return new Ir(e)}function QL(){return JL(new Map)}const S_=Symbol.for("effect/FiberRefs");var D5;class Ir{constructor(t){d(this,"locals");d(this,D5,S_);this.locals=t}pipe(){return C(this,arguments)}}D5=S_;const ZL=(e,t,r,n=!1)=>{const s=e;let i=t,o=r,a=n,c;for(;c===void 0;)if(ft(i)&&ft(o)){const u=lt(i)[0],l=Vn(i),h=lt(o)[0],_=lt(o)[1],g=Vn(o);u.startTimeMillis<h.startTimeMillis?(o=g,a=!0):u.startTimeMillis>h.startTimeMillis?i=l:u.id<h.id?(o=g,a=!0):u.id>h.id?i=l:c=[_,a]}else c=[s.initial,!0];return c},ek=f(3,(e,t,r)=>{const n=new Map(e.locals);return r.locals.forEach((s,i)=>{const o=s[0][1];if(!s[0][0][j](t)){if(!n.has(i)){if(x(o,i.initial))return;n.set(i,[[t,i.join(i.initial,o)]]);return}const a=n.get(i),[c,u]=ZL(i,a,s);if(u){const l=i.diff(c,o),h=a[0][1],_=i.join(h,i.patch(l)(h));if(!x(h,_)){let g;const m=a[0][0];m[j](t)?g=[[m,_],...a.slice(1)]:g=[[t,_],...a],n.set(i,g)}}}}),new Ir(n)}),tk=f(2,(e,t)=>{const r=new Map;return YE(e,r,t),new Ir(r)}),YE=(e,t,r)=>{e.locals.forEach((n,s)=>{const i=n[0][1],o=s.patch(s.fork)(i);x(i,o)?t.set(s,n):t.set(s,[[r,o],...n])})},JE=f(2,(e,t)=>{const r=new Map(e.locals);return r.delete(t),new Ir(r)}),ta=f(2,(e,t)=>e.locals.has(t)?R(lt(e.locals.get(t))[1]):T()),Gf=f(2,(e,t)=>p(ta(e,t),rt(()=>t.initial))),el=f(2,(e,{fiberId:t,fiberRef:r,value:n})=>{if(e.locals.size===0)return new Ir(new Map([[r,[[t,n]]]]));const s=new Map(e.locals);return tl(s,t,r,n),new Ir(s)}),tl=(e,t,r,n)=>{const s=e.get(r)??[];let i;if(ft(s)){const[o,a]=lt(s);if(o[j](t)){if(x(a,n))return;i=[[t,n],...s.slice(1)]}else i=[[t,n],...s]}else i=[[t,n]];e.set(r,i)},rk=f(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new Ir(new Map(t));const n=new Map(e.locals);return r!==void 0&&YE(e,n,r),t.forEach(([s,i])=>{i.length===1?tl(n,i[0][0],s,i[0][1]):i.forEach(([o,a])=>{tl(n,o,s,a)})}),new Ir(n)}),y_=ta,nk=Gf,sk=rk,ik=QL,QE="Empty",ZE="Add",eS="Remove",tS="Update",rS="AndThen",ok={_tag:QE},Vf=(e,t)=>{const r=new Map(e.locals);let n=ok;for(const[s,i]of t.locals.entries()){const o=lt(i)[1],a=r.get(s);if(a!==void 0){const c=lt(a)[1];x(c,o)||(n=su({_tag:tS,fiberRef:s,patch:s.diff(c,o)})(n))}else n=su({_tag:ZE,fiberRef:s,value:o})(n);r.delete(s)}for(const[s]of r.entries())n=su({_tag:eS,fiberRef:s})(n);return n},su=f(2,(e,t)=>({_tag:rS,first:e,second:t})),nS=f(3,(e,t,r)=>{let n=r,s=bt(e);for(;ft(s);){const i=lt(s),o=Vn(s);switch(i._tag){case QE:{s=o;break}case ZE:{n=el(n,{fiberId:t,fiberRef:i.fiberRef,value:i.value}),s=o;break}case eS:{n=JE(n,i.fiberRef),s=o;break}case tS:{const a=Gf(n,i.fiberRef);n=el(n,{fiberId:t,fiberRef:i.fiberRef,value:i.fiberRef.patch(i.patch)(a)}),s=o;break}case rS:{s=Go(i.first)(Go(i.second)(o));break}}}return n}),di=Vf,_i=nS,oc="effect/FiberStatus",cn=Symbol.for(oc),ra="Done",rl="Running",nl="Suspended",ak=Ie(`${oc}-${ra}`);var F5;class ck{constructor(){d(this,F5,cn);d(this,"_tag",ra)}[(F5=cn,U)](){return ak}[j](t){return Hf(t)&&t._tag===ra}}var U5;class uk{constructor(t){d(this,"runtimeFlags");d(this,U5,cn);d(this,"_tag",rl);this.runtimeFlags=t}[(U5=cn,U)](){return p(w(oc),B(w(this._tag)),B(w(this.runtimeFlags)),ce(this))}[j](t){return Hf(t)&&t._tag===rl&&this.runtimeFlags===t.runtimeFlags}}var j5;class lk{constructor(t,r){d(this,"runtimeFlags");d(this,"blockingOn");d(this,j5,cn);d(this,"_tag",nl);this.runtimeFlags=t,this.blockingOn=r}[(j5=cn,U)](){return p(w(oc),B(w(this._tag)),B(w(this.runtimeFlags)),B(w(this.blockingOn)),ce(this))}[j](t){return Hf(t)&&t._tag===nl&&this.runtimeFlags===t.runtimeFlags&&x(this.blockingOn,t.blockingOn)}}const fk=new ck,hk=e=>new uk(e),dk=(e,t)=>new lk(e,t),Hf=e=>D(e,cn),_k=e=>e._tag===ra,pk=e=>e._tag===rl,gk=e=>e._tag===nl,mk=fk,sS=hk,Ek=dk,iS=_k,Sk=pk,yk=gk,vk=UC,Tk=jC,oS=BC,bk=GC,aS=gE,cS=mE,uS=VC,Ok=HC,Ak=p(gt,Dg(e=>e.ordinal)),Rk=PP(Ak),Ik=e=>{switch(e){case"All":return vk;case"Debug":return cS;case"Error":return oS;case"Fatal":return Tk;case"Info":return aS;case"Trace":return uS;case"None":return Ok;case"Warning":return bk}},jn=Symbol.for("effect/Readable"),lS=Symbol.for("effect/Ref"),fS={_A:e=>e};var B5,G5;class Mk{constructor(t){d(this,"ref");d(this,B5,fS);d(this,G5);d(this,"get");this.ref=t,this[jn]=jn,this.get=S(()=>Zr(this.ref))}modify(t){return S(()=>{const r=Zr(this.ref),[n,s]=t(r);return r!==s&&Mi(s)(this.ref),n})}pipe(){return C(this,arguments)}}B5=lS,G5=jn;const hS=e=>new Mk(Fa(e)),na=e=>S(()=>hS(e)),Hr=e=>e.get,sa=f(2,(e,t)=>e.modify(()=>[void 0,t])),Pk=f(2,(e,t)=>e.modify(r=>[r,t])),$k=f(2,(e,t)=>e.modify(t)),v_=f(2,(e,t)=>e.modify(r=>[void 0,t(r)])),Nk=na,wk=Pk;class dS{constructor(){d(this,"buckets",[])}scheduleTask(t,r){let n,s;for(s=0;s<this.buckets.length&&this.buckets[s][0]<=r;s++)n=this.buckets[s];if(n)n[1].push(t);else{const i=[];for(let o=0;o<s;o++)i.push(this.buckets[o]);i.push([r,[t]]);for(let o=s;o<this.buckets.length;o++)i.push(this.buckets[o]);this.buckets=i}}}class Ck{constructor(t){d(this,"maxNextTickBeforeTimer");d(this,"running",!1);d(this,"tasks",new dS);this.maxNextTickBeforeTimer=t}starveInternal(t){const r=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of r)for(let i=0;i<s.length;i++)s[i]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(yE)?t.getFiberRef(Di):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}}const _S=K(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new Ck(2048));class Lk{constructor(){d(this,"tasks",new dS);d(this,"deferred",!1)}scheduleTask(t,r){this.deferred?_S.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(yE)?t.getFiberRef(Di):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[r,n]of t)for(let s=0;s<n.length;s++)n[s]()}this.deferred=!0}}const pi=K(Symbol.for("effect/FiberRef/currentScheduler"),()=>De(_S)),pS=K(Symbol.for("effect/FiberRef/currentRequestMap"),()=>De(new Map)),T_=(e,t,r,n)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return fr(t1,s=>s==="unbounded"?r():s>1?n(s):t());default:return e>1?n(e):t()}},gS=FL,zf=UL,kk=Bf,xk=$r,Dk=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`,Fk=Dk,Uk=ur,jk=Qm,mS="effect/MetricLabel",sl=Symbol.for(mS);var V5;class Bk{constructor(t,r){d(this,"key");d(this,"value");d(this,V5,sl);d(this,"_hash");this.key=t,this.value=r,this._hash=Ie(mS+this.key+this.value)}[(V5=sl,U)](){return this._hash}[j](t){return Vk(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}}const Gk=(e,t)=>new Bk(e,t),Vk=e=>D(e,sl),Hk=f(3,(e,t,r)=>sE(e,Wl(t),r)),zk=f(2,(e,t)=>{let r;return sE(e,n=>(r??(r=Object.keys(t)),D(n,"_tag")&&Kl(n._tag)&&r.includes(n._tag)),n=>t[n._tag](n))}),eo=kk,Kk=e=>AS(e,ES,Vf),qk=e=>AS(e,Ya(ES,kC),([t,r],[n,s])=>[Vf(t,n),Tr(r,s)]),Wk=f(2,(e,t)=>cr(e,{onFailure:r=>y(t.onFailure(r)),onSuccess:r=>y(t.onSuccess(r))})),Xk=function(){let e;return arguments.length===1?e=arguments[0]:e=arguments[1].bind(arguments[0]),Q(()=>{const t=e(p),r=t.next(),n=s=>s.done?y(s.value):E(sP(s.value),i=>n(t.next(i)));return n(r)})},ES=oe(e=>y(e.getFiberRefs())),Yk=e=>Mt(e,{onFailure:t=>SS(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>me}),ji=e=>(...t)=>{const r=Ri(e);let n;for(let s=0,i=t.length;s<i;s++){const o=t[s];Km(o)&&(n!==void 0?n=Ge(n,o):n=o,t=[...t.slice(0,s),...t.slice(s+1)],s--)}return t.length===0?t="":t.length===1&&(t=t[0]),n===void 0&&(n=rn),oe(s=>(s.log(t,n,r),me))},Jk=ji(),Qk=ji(uS),SS=ji(cS),Zk=ji(aS),ex=ji(oS),yS=e=>p(Nf(),E(t=>p(qk(e),CC(t),tx,I(r=>ge(r,p(rc(t),E(([n,s])=>ke(Ya(TS(n[0]),dE(n[1])),s)))))))),vS=e=>I(e,t=>!t),tx=e=>I(Nk(!0),t=>nt(_E(e,wk(t,!1)))),rx=f(2,(e,t)=>fE(e,()=>Ka(t))),TS=e=>ox((t,r)=>p(e,nS(t,r))),nx=e=>e.length>=1?Qe((t,r)=>{e(r).then(n=>t(te(n)),n=>t(qu(n)))}):Qe(t=>{e().then(r=>t(te(r)),r=>t(qu(r)))}),bS=f(3,(e,t,r)=>Pr(n=>Kt(e,He(n,t,r)))),sx=f(3,(e,t,r)=>Pr(n=>E(r,s=>Kt(e,p(n,He(t,s)))))),OS=gS,AS=f(3,(e,t,r)=>E(t,n=>E(e,s=>I(t,i=>[r(n,i),s])))),ix=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?Qe((n,s)=>{try{t(s).then(i=>n(te(i)),i=>n(ee(r?r(i):new Cn(i))))}catch(i){n(ee(r?r(i):new Cn(i)))}}):Qe(n=>{try{t().then(s=>n(te(s)),s=>n(ee(r?r(s):new Cn(s))))}catch(s){n(ee(r?r(s):new Cn(s)))}})},ox=e=>oe(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),me)),ax=f(2,(e,t)=>Q(()=>t()?I(e,R):y(T()))),cx=E(wf(),e=>{const t=e.unsafeMap.get(ur.key);return t!==void 0&&t._tag==="Span"?y(t):ee(new Ui)}),RS=BigInt(0),IS=(e,t,r)=>{if(e.getFiberRef(bE)===!1)return k1(t);const s=e.getFiberRef(Tt),i=e.getFiberRef(Ke),o=Le(i,ui),a=Le(i,xk),c=e.getFiberRef(Qa),u=e.getFiberRefs(),l=y_(u,r1),h=y_(u,n1),_=r!=null&&r.parent?R(r.parent):r!=null&&r.root?T():It(s,ur),g=h._tag==="Some"?(r==null?void 0:r.links)!==void 0?[...sr(h.value),...(r==null?void 0:r.links)??[]]:sr(h.value):(r==null?void 0:r.links)??Jr(),m=o.span(t,_,(r==null?void 0:r.context)??yt(),g,c?a.unsafeCurrentTimeNanos():RS,(r==null?void 0:r.kind)??"internal");return l._tag==="Some"&&MN(l.value,(b,A)=>m.attribute(A,b)),(r==null?void 0:r.attributes)!==void 0&&Object.entries(r.attributes).forEach(([b,A])=>m.attribute(b,A)),m},ux=(e,...t)=>{const r=t.length===1?void 0:t[0],n=t[t.length-1];return oe(s=>{const i=IS(s,e,r),o=s.getFiberRef(Qa),a=Le(s.getFiberRef(Ke),$r);return nn(n(i),c=>S(()=>{i.status._tag!=="Ended"&&i.end(o?a.unsafeCurrentTimeNanos():RS,c)}))})},lx=f(2,(e,t)=>bS(e,ur,t)),fx=f(e=>typeof e[0]!="string",(e,t,r)=>ux(t,r??{},n=>lx(e,n))),hx=ec,dx=a1,il=c1,_x=u1,px=RE,gx=Oo,mx=l1,Ex=Vr,Sx=qu,yx=f1,MS=hi,PS=W,vx=IE,Tx=h1,$S=d1,ol=_1,bx=p1,Ox=g1,Ax=m1,NS=ME,Rx=Ao,Ix=E1,Mx=S1,Px=y1,wS=tc,$x=PE,Kf=te,Nx=at,wx=v1,Cx=T1,Lx=b1,kx=O1,xx=A1,Dx=R1,CS=hr,Fx=Object.freeze(Object.defineProperty({__proto__:null,all:Ex,as:px,asVoid:gx,causeOption:mx,die:Sx,exists:yx,fail:MS,failCause:PS,flatMap:vx,flatMapEffect:Tx,flatten:$S,forEachEffect:ol,fromEither:bx,fromOption:Ox,getOrElse:Ax,interrupt:NS,isExit:hx,isFailure:dx,isInterrupted:_x,isSuccess:il,map:Rx,mapBoth:Ix,mapError:Mx,mapErrorCause:Px,match:wS,matchEffect:$x,succeed:Kf,void:Nx,zip:wx,zipLeft:Cx,zipPar:kx,zipParLeft:xx,zipParRight:Dx,zipRight:Lx,zipWith:CS},Symbol.toStringTag,{value:"Module"})),qf="InterruptSignal",Wf="Stateful",Xf="Resume",Yf="YieldNow",iu=e=>({_tag:qf,cause:e}),Io=e=>({_tag:Wf,onFiber:e}),vn=e=>({_tag:Xf,effect:e}),Ux=()=>({_tag:Yf}),jx="effect/FiberScope",ia=Symbol.for(jx);var H5;class Bx{constructor(){d(this,H5,ia);d(this,"fiberId",hn);d(this,"roots",new Set)}add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}}H5=ia;var z5;class Gx{constructor(t,r){d(this,"fiberId");d(this,"parent");d(this,z5,ia);this.fiberId=t,this.parent=r}add(t,r){this.parent.tell(Io(n=>{n.addChild(r),r.addObserver(()=>{n.removeChild(r)})}))}}z5=ia;const Vx=e=>new Gx(e.id(),e),ac=K(Symbol.for("effect/FiberScope/Global"),()=>new Bx),Hx="effect/Fiber",Ss=Symbol.for(Hx),cc={_E:e=>e,_A:e=>e},uc={[Ss]:cc,pipe(){return C(this,arguments)}},zx="effect/Fiber",Jf=Symbol.for(zx),Kx=p(MP(gt,gt),Dg(e=>[e.id().startTimeMillis,e.id().id])),qx=e=>D(e,Ss),LS=e=>Jf in e,Qf=e=>e.await,Wx=e=>e.children,ys=e=>({...uc,id:()=>hn,await:y(e),children:y([]),inheritAll:me,poll:y(R(e)),interruptAsFork:()=>me}),Zf=e=>I(e.status,t=>({id:e.id(),status:t})),Xx=e=>Rt(e,Zf),Yx=e=>ys(MS(e)),kS=e=>ys(PS(e)),Jx=e=>I(Et(e),ys),Qx=e=>e.id(),Zx=e=>e.inheritAll,eD=e=>ys(NS(e)),tD=e=>E(qa,t=>p(e,xS(t))),xS=f(2,(e,t)=>p(Rr(e,DS(t)),ge(p(e,Rr(Qf))))),DS=f(2,(e,t)=>e.interruptAsFork(t)),eh=e=>pE(es(e.await),e.inheritAll),al=f(2,(e,t)=>FS(e,r=>S(()=>t(r)))),FS=f(2,(e,t)=>({...uc,id:()=>e.id(),await:E(e.await,ol(t)),children:e.children,inheritAll:e.inheritAll,poll:E(e.poll,r=>{switch(r._tag){case"None":return y(T());case"Some":return p(ol(r.value,t),I(R))}}),interruptAsFork:r=>e.interruptAsFork(r)})),rD=f(2,(e,t)=>I(e.await,wS({onFailure:r=>kS(r),onSuccess:r=>t(r)}))),nD=f(2,(e,{onFiber:t,onRuntimeFiber:r})=>LS(e)?r(e):t(e)),sD={...uc,id:()=>hn,await:Xs,children:y([]),inheritAll:Xs,poll:y(T()),interruptAsFork:()=>Xs},US=f(2,(e,t)=>({...uc,id:()=>vm(e.id(),t.id()),await:sn(e.await,t.await,(r,n)=>il(r)?r:n),children:e.children,inheritAll:ge(t.inheritAll,e.inheritAll),poll:sn(e.poll,t.poll,(r,n)=>{switch(r._tag){case"None":return T();case"Some":return il(r.value)?r:n}}),interruptAsFork:r=>p(li(e,r),ge(p(t,li(r))),nt)})),iD=f(2,(e,t)=>US(al(e,Te),al(t,re))),oD=e=>e.poll,aD=e=>{const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(e*1e3)%1e3,nanoseconds:t(e*1e6)%1e3}},cD=e=>iS(e)?"Done":Sk(e)?"Running":`Suspended(${Qt(e.runtimeFlags)?"interruptible":"uninterruptible"})`,uD=e=>E(zf,t=>I(Zf(e),r=>{const n=t-r.id.startTimeMillis,{days:s,hours:i,milliseconds:o,minutes:a,seconds:c}=aD(n),u=(s===0?"":`${s}d`)+(s===0&&i===0?"":`${i}h`)+(s===0&&i===0&&a===0?"":`${a}m`)+(s===0&&i===0&&a===0&&c===0?"":`${c}s`)+`${o}ms`,l=yk(r.status)?(()=>{const _=TN(r.status.blockingOn);return gf(_)>0?"waiting on "+Array.from(_).map(g=>`${g}`).join(", "):""})():"",h=cD(r.status);return`[Fiber](#${r.id.id}) (${u}) ${l}
   Status: ${h}`})),jS=()=>Array.from(ac.roots),lD=S(jS),fD=e=>e.status,BS=e=>ys(Kf(e)),hD=BS(void 0),mr="effect/FiberCurrent",dD=()=>Ri(globalThis[mr]),_D="effect/Logger",pD=Symbol.for(_D),gD={_Message:e=>e,_Output:e=>e},th=e=>({[pD]:gD,log:e,pipe(){return C(this,arguments)}}),mD=th(({annotations:e,cause:t,date:r,fiberId:n,logLevel:s,message:i,spans:o})=>{const a=r.getTime();let u=[`timestamp=${r.toISOString()}`,`level=${s.label}`,`fiber=${ym(n)}`].join(" ");if(Array.isArray(i))for(let l=0;l<i.length;l++){const h=Ks(i[l]);h.length>0&&(u=u+" message=",u=to(h,u))}else{const l=Ks(i);l.length>0&&(u=u+" message=",u=to(l,u))}if(t!=null&&t._tag!=="Empty"&&(u=u+" cause=",u=to(Qn(t),u)),$m(o)){u=u+" ";let l=!0;for(const h of o)l?l=!1:u=u+" ",u=u+p(h,Fk(a))}if(p(e,RN)>0){u=u+" ";let l=!0;for(const[h,_]of e)l?l=!1:u=u+" ",u=u+yD(h),u=u+"=",u=to(Ks(_),u)}return u}),ED=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,SD=/^[^\s"=]+$/,to=(e,t)=>t+(e.match(SD)?e:ED(e)),yD=e=>e.replace(/[\s="]/g,"_"),GS="effect/MetricBoundaries",cl=Symbol.for(GS);var K5;class vD{constructor(t){d(this,"values");d(this,K5,cl);d(this,"_hash");this.values=t,this._hash=p(Ie(GS),B(Ft(this.values)))}[(K5=cl,U)](){return this._hash}[j](t){return TD(t)&&x(this.values,t.values)}pipe(){return C(this,arguments)}}const TD=e=>D(e,cl),bD=e=>{const t=p(e,Ug(st(Number.POSITIVE_INFINITY)),n$);return new vD(t)},OD=e=>p(FP(e.count-1,t=>e.start*Math.pow(e.factor,t)),af,bD),AD="effect/MetricKeyType",VS=Symbol.for(AD),HS="effect/MetricKeyType/Counter",ul=Symbol.for(HS),RD="effect/MetricKeyType/Frequency",ID=Symbol.for(RD),MD="effect/MetricKeyType/Gauge",PD=Symbol.for(MD),zS="effect/MetricKeyType/Histogram",ll=Symbol.for(zS),$D="effect/MetricKeyType/Summary",ND=Symbol.for($D),KS={_In:e=>e,_Out:e=>e};var q5,W5;class wD{constructor(t,r){d(this,"incremental");d(this,"bigint");d(this,q5,KS);d(this,W5,ul);d(this,"_hash");this.incremental=t,this.bigint=r,this._hash=Ie(HS)}[(q5=VS,W5=ul,U)](){return this._hash}[j](t){return rh(t)}pipe(){return C(this,arguments)}}var X5,Y5;class CD{constructor(t){d(this,"boundaries");d(this,X5,KS);d(this,Y5,ll);d(this,"_hash");this.boundaries=t,this._hash=p(Ie(zS),B(w(this.boundaries)))}[(X5=VS,Y5=ll,U)](){return this._hash}[j](t){return nh(t)&&x(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}}const LD=e=>new wD((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),kD=e=>new CD(e),rh=e=>D(e,ul),qS=e=>D(e,ID),WS=e=>D(e,PD),nh=e=>D(e,ll),xD=e=>D(e,ND),DD="effect/MetricKey",XS=Symbol.for(DD),FD={_Type:e=>e},UD=nf(x);var J5;class sh{constructor(t,r,n,s=[]){d(this,"name");d(this,"keyType");d(this,"description");d(this,"tags");d(this,J5,FD);d(this,"_hash");this.name=t,this.keyType=r,this.description=n,this.tags=s,this._hash=p(Ie(this.name+this.description),B(w(this.keyType)),B(Ft(this.tags)))}[(J5=XS,U)](){return this._hash}[j](t){return jD(t)&&this.name===t.name&&x(this.keyType,t.keyType)&&x(this.description,t.description)&&UD(this.tags,t.tags)}pipe(){return C(this,arguments)}}const jD=e=>D(e,XS),BD=(e,t)=>new sh(e,LD(t),Ri(t==null?void 0:t.description)),GD=(e,t,r)=>new sh(e,kD(t),Ri(r)),VD=f(2,(e,t)=>t.length===0?e:new sh(e.name,e.keyType,e.description,Nu(e.tags,t))),b_=Symbol.for("effect/MutableHashMap"),HD={[b_]:b_,[Symbol.iterator](){return new ih(this)},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(he)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}};class ih{constructor(t){d(this,"self");d(this,"referentialIterator");d(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new zD(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new ih(this.self)}}class zD{constructor(t){d(this,"backing");d(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const oh=()=>{const e=Object.create(HD);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},Ve=f(2,(e,t)=>{if(ri(t)===!1)return e.referential.has(t)?R(e.referential.get(t)):T();const r=t[U](),n=e.buckets.get(r);return n===void 0?T():KD(e,n,t)}),KD=(e,t,r,n=!1)=>{for(let s=0,i=t.length;s<i;s++)if(r[j](t[s][0])){const o=t[s][1];return n&&(t.splice(s,1),e.bucketsSize--),R(o)}return T()},tr=f(2,(e,t)=>_e(Ve(e,t))),Ut=f(3,(e,t,r)=>{if(ri(t)===!1)return e.referential.set(t,r),e;const n=t[U](),s=e.buckets.get(n);return s===void 0?(e.buckets.set(n,[[t,r]]),e.bucketsSize++,e):(YS(e,s,t),s.push([t,r]),e.bucketsSize++,e)}),YS=(e,t,r)=>{for(let n=0,s=t.length;n<s;n++)if(r[j](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},Tn=f(2,(e,t)=>{if(ri(t)===!1)return e.referential.delete(t),e;const r=t[U](),n=e.buckets.get(r);return n===void 0||(YS(e,n,t),n.length===0&&e.buckets.delete(r)),e}),ou=e=>e.referential.size+e.bucketsSize,qD="effect/MetricState",Bi=Symbol.for(qD),JS="effect/MetricState/Counter",fl=Symbol.for(JS),QS="effect/MetricState/Frequency",hl=Symbol.for(QS),ZS="effect/MetricState/Gauge",dl=Symbol.for(ZS),ey="effect/MetricState/Histogram",_l=Symbol.for(ey),ty="effect/MetricState/Summary",pl=Symbol.for(ty),Gi={_A:e=>e};var Q5,Z5;class WD{constructor(t){d(this,"count");d(this,Q5,Gi);d(this,Z5,fl);this.count=t}[(Q5=Bi,Z5=fl,U)](){return p(w(JS),B(w(this.count)),ce(this))}[j](t){return ry(t)&&this.count===t.count}pipe(){return C(this,arguments)}}const XD=nf(x);var e6,t6;class YD{constructor(t){d(this,"occurrences");d(this,e6,Gi);d(this,t6,hl);d(this,"_hash");this.occurrences=t}[(e6=Bi,t6=hl,U)](){return p(Ie(QS),B(Ft(z(this.occurrences.entries()))),ce(this))}[j](t){return ny(t)&&XD(z(this.occurrences.entries()),z(t.occurrences.entries()))}pipe(){return C(this,arguments)}}var r6,n6;class JD{constructor(t){d(this,"value");d(this,r6,Gi);d(this,n6,dl);this.value=t}[(r6=Bi,n6=dl,U)](){return p(w(ZS),B(w(this.value)),ce(this))}[j](t){return sy(t)&&this.value===t.value}pipe(){return C(this,arguments)}}var s6,i6;class QD{constructor(t,r,n,s,i){d(this,"buckets");d(this,"count");d(this,"min");d(this,"max");d(this,"sum");d(this,s6,Gi);d(this,i6,_l);this.buckets=t,this.count=r,this.min=n,this.max=s,this.sum=i}[(s6=Bi,i6=_l,U)](){return p(w(ey),B(w(this.buckets)),B(w(this.count)),B(w(this.min)),B(w(this.max)),B(w(this.sum)),ce(this))}[j](t){return iy(t)&&x(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}}var o6,a6;class ZD{constructor(t,r,n,s,i,o){d(this,"error");d(this,"quantiles");d(this,"count");d(this,"min");d(this,"max");d(this,"sum");d(this,o6,Gi);d(this,a6,pl);this.error=t,this.quantiles=r,this.count=n,this.min=s,this.max=i,this.sum=o}[(o6=Bi,a6=pl,U)](){return p(w(ty),B(w(this.error)),B(w(this.quantiles)),B(w(this.count)),B(w(this.min)),B(w(this.max)),B(w(this.sum)),ce(this))}[j](t){return oy(t)&&this.error===t.error&&x(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}}const eF=e=>new WD(e),tF=e=>new YD(e),rF=e=>new JD(e),nF=e=>new QD(e.buckets,e.count,e.min,e.max,e.sum),sF=e=>new ZD(e.error,e.quantiles,e.count,e.min,e.max,e.sum),ry=e=>D(e,fl),ny=e=>D(e,hl),sy=e=>D(e,dl),iy=e=>D(e,_l),oy=e=>D(e,pl),iF="effect/MetricHook",oF=Symbol.for(iF),aF={_In:e=>e,_Out:e=>e},Vi=e=>({[oF]:aF,pipe(){return C(this,arguments)},...e}),O_=BigInt(0),cF=e=>{let t=e.keyType.bigint?O_:0;const r=e.keyType.incremental?e.keyType.bigint?n=>n>=O_:n=>n>=0:n=>!0;return Vi({get:()=>eF(t),update:n=>{r(n)&&(t=t+n)}})},uF=e=>{const t=new Map;for(const n of e.keyType.preregisteredWords)t.set(n,0);return Vi({get:()=>tF(t),update:n=>{const s=t.get(n)??0;t.set(n,s+1)}})},lF=(e,t)=>{let r=t;return Vi({get:()=>rF(r),update:n=>{r=n}})},fF=e=>{const t=e.keyType.boundaries.values,r=t.length,n=new Uint32Array(r+1),s=new Float32Array(r);let i=0,o=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;p(t,er(gt),Dn((h,_)=>{s[_]=h}));const u=h=>{let _=0,g=r;for(;_!==g;){const m=Math.floor(_+(g-_)/2),b=s[m];h<=b?g=m:_=m,g===_+1&&(h<=s[_]?g=_:_=g)}n[_]=n[_]+1,i=i+1,o=o+h,h<a&&(a=h),h>c&&(c=h)},l=()=>{const h=ni(r);let _=0;for(let g=0;g<r;g++){const m=s[g],b=n[g];_=_+b,h[g]=[m,_]}return h};return Vi({get:()=>nF({buckets:l(),count:i,min:a,max:c,sum:o}),update:u})},hF=e=>{const{error:t,maxAge:r,maxSize:n,quantiles:s}=e.keyType,i=p(s,er(gt)),o=ni(n);let a=0,c=0,u=0,l=Number.MAX_VALUE,h=Number.MIN_VALUE;const _=m=>{const b=[];let A=0;for(;A!==n-1;){const L=o[A];if(L!=null){const[P,X]=L,V=Gt(m-P);FE(V,on)&&V<=r&&b.push(X)}A=A+1}return dF(t,i,er(b,gt))},g=(m,b)=>{if(n>0){a=a+1;const A=a%n;o[A]=[b,m]}c=c+1,u=u+m,m<l&&(l=m),m>h&&(h=m)};return Vi({get:()=>sF({error:t,quantiles:_(Date.now()),count:c,min:l,max:h,sum:u}),update:([m,b])=>g(m,b)})},dF=(e,t,r)=>{const n=r.length;if(!ft(t))return Jr();const s=t[0],i=t.slice(1),o=A_(e,n,T(),0,s,r),a=bt(o);return i.forEach(c=>{a.push(A_(e,n,o.value,o.consumed,c,o.rest))}),Dn(a,c=>[c.quantile,c.value])},A_=(e,t,r,n,s,i)=>{let o=e,a=t,c=r,u=n,l=s,h=i,_=e,g=t,m=r,b=n,A=s,L=i;for(;;){if(!ft(h))return{quantile:l,value:T(),consumed:u,rest:[]};if(l===1)return{quantile:l,value:R(Gg(h)),consumed:u+h.length,rest:[]};const P=qP(h,ye=>ye<=h[0]),X=l*a,V=o/2*X,Se=u+P[0].length,Ue=Math.abs(Se-X);if(Se<X-V){_=o,g=a,m=qs(h),b=Se,A=l,L=P[1],o=_,a=g,c=m,u=b,l=A,h=L;continue}if(Se>X+V)return{quantile:l,value:c,consumed:u,rest:h};switch(c._tag){case"None":{_=o,g=a,m=qs(h),b=Se,A=l,L=P[1],o=_,a=g,c=m,u=b,l=A,h=L;continue}case"Some":{const ye=Math.abs(X-c.value);if(Ue<ye){_=o,g=a,m=qs(h),b=Se,A=l,L=P[1],o=_,a=g,c=m,u=b,l=A,h=L;continue}return{quantile:l,value:R(c.value),consumed:u,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},_F="effect/MetricPair",pF=Symbol.for(_F),gF={_Type:e=>e},mF=(e,t)=>({[pF]:gF,metricKey:e,metricState:t,pipe(){return C(this,arguments)}}),EF="effect/MetricRegistry",R_=Symbol.for(EF);var c6;class SF{constructor(){d(this,c6,R_);d(this,"map",oh())}snapshot(){const t=[];for(const[r,n]of this.map)t.push(mF(r,n.get()));return t}get(t){const r=p(this.map,Ve(t),tt);if(r==null){if(rh(t.keyType))return this.getCounter(t);if(WS(t.keyType))return this.getGauge(t);if(qS(t.keyType))return this.getFrequency(t);if(nh(t.keyType))return this.getHistogram(t);if(xD(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=p(this.map,Ve(t),tt);if(r==null){const n=cF(t);p(this.map,tr(t))||p(this.map,Ut(t,n)),r=n}return r}getFrequency(t){let r=p(this.map,Ve(t),tt);if(r==null){const n=uF(t);p(this.map,tr(t))||p(this.map,Ut(t,n)),r=n}return r}getGauge(t){let r=p(this.map,Ve(t),tt);if(r==null){const n=lF(t,t.keyType.bigint?BigInt(0):0);p(this.map,tr(t))||p(this.map,Ut(t,n)),r=n}return r}getHistogram(t){let r=p(this.map,Ve(t),tt);if(r==null){const n=fF(t);p(this.map,tr(t))||p(this.map,Ut(t,n)),r=n}return r}getSummary(t){let r=p(this.map,Ve(t),tt);if(r==null){const n=hF(t);p(this.map,tr(t))||p(this.map,Ut(t,n)),r=n}return r}}c6=R_;const yF=()=>new SF,vF="effect/Metric",TF=Symbol.for(vF),bF={_Type:e=>e,_In:e=>e,_Out:e=>e},gl=K(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yF()),ay=function(e,t,r){const n=Object.assign(s=>dn(s,i=>IF(n,i)),{[TF]:bF,keyType:e,unsafeUpdate:t,unsafeValue:r,register(){return this.unsafeValue([]),this},pipe(){return C(this,arguments)}});return n},lc=(e,t)=>cy(BD(e,t)),cy=e=>{let t;const r=new WeakMap,n=s=>{if(s.length===0)return t!==void 0||(t=gl.get(e)),t;let i=r.get(s);return i!==void 0||(i=gl.get(VD(e,s)),r.set(s,i)),i};return ay(e.keyType,(s,i)=>n(i).update(s),s=>n(s).get())},OF=(e,t,r)=>cy(GD(e,t,r)),AF=f(3,(e,t,r)=>RF(e,[Gk(t,r)])),RF=f(2,(e,t)=>ay(e.keyType,(r,n)=>e.unsafeUpdate(r,Nu(t,n)),r=>e.unsafeValue(Nu(t,r)))),IF=f(2,(e,t)=>fr(Vu,r=>S(()=>e.unsafeUpdate(t,r)))),MF=()=>gl.snapshot(),PF="effect/Request",$F=Symbol.for(PF),NF={_E:e=>e,_A:e=>e};({...Ma,[$F]:0});const wF=f(2,(e,t)=>fr(pS,r=>S(()=>{if(r.has(e)){const n=r.get(e);n.state.completed||(n.state.completed=!0,NE(n.result,t))}})));class CF{constructor(){d(this,"count",0);d(this,"observers",new Set);d(this,"interrupted",!1)}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}}const LF="effect/Supervisor",fc=Symbol.for(LF),ah={_T:e=>e};var u6;const dd=class dd{constructor(t,r){d(this,"underlying");d(this,"value0");d(this,u6,ah);this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,n,s){this.underlying.onStart(t,r,n,s)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new dd(this,p(this.value,I(t)))}zip(t){return new aa(this,t)}};u6=fc;let oa=dd;var l6;const _d=class _d{constructor(t,r){d(this,"left");d(this,"right");d(this,"_tag","Zip");d(this,l6,ah);this.left=t,this.right=r}get value(){return Ya(this.left.value,this.right.value)}onStart(t,r,n,s){this.left.onStart(t,r,n,s),this.right.onStart(t,r,n,s)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new oa(this,p(this.value,I(t)))}zip(t){return new _d(this,t)}};l6=fc;let aa=_d;const uy=e=>D(e,fc)&&Wl(e,"Zip");var f6;class kF{constructor(t){d(this,"effect");d(this,f6,ah);this.effect=t}get value(){return this.effect}onStart(t,r,n,s){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new oa(this,p(this.value,I(t)))}zip(t){return new aa(this,t)}onRun(t,r){return t()}}f6=fc;const xF=e=>new kF(e),hc=K("effect/Supervisor/none",()=>xF(me)),DF=cs,ly="Empty",fy="AddSupervisor",hy="RemoveSupervisor",dy="AndThen",Ys={_tag:ly},Mo=(e,t)=>({_tag:dy,first:e,second:t}),FF=(e,t)=>UF(t,st(e)),UF=(e,t)=>{let r=e,n=t;for(;Ne(n);){const s=Z(n);switch(s._tag){case ly:{n=Re(n);break}case fy:{r=r.zip(s.supervisor),n=Re(n);break}case hy:{r=ml(r,s.supervisor),n=Re(n);break}case dy:{n=we(s.first)(we(s.second)(Re(n)));break}}}return r},ml=(e,t)=>x(e,t)?hc:uy(e)?ml(e.left,t).zip(ml(e.right,t)):e,ca=e=>x(e,hc)?Or():uy(e)?p(ca(e.left),Kn(ca(e.right))):Da(e),jF=(e,t)=>{if(x(e,t))return Ys;const r=ca(e),n=ca(t),s=p(n,Ud(r),zo(Ys,(o,a)=>Mo(o,{_tag:fy,supervisor:a}))),i=p(r,Ud(n),zo(Ys,(o,a)=>Mo(o,{_tag:hy,supervisor:a})));return Mo(s,i)},BF=DF({empty:Ys,patch:FF,combine:Mo,diff:jF}),GF=lc("effect_fiber_started",{incremental:!0}),I_=lc("effect_fiber_active"),VF=lc("effect_fiber_successes",{incremental:!0}),HF=lc("effect_fiber_failures",{incremental:!0}),zF=AF(OF("effect_fiber_lifetimes",OD({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Us="Continue",KF="Done",M_="Yield",qF={_E:e=>e,_A:e=>e},js=e=>{throw new Error(`BUG: FiberRuntime - ${Ks(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},gr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Wt=K("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),ro={[Uo]:(e,t,r)=>t.effect_instruction_i1(r),OnStep:(e,t,r)=>te(te(r)),[jo]:(e,t,r)=>t.effect_instruction_i2(r),[Zl]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),Qt(e._runtimeFlags)&&e.isInterrupted()?W(e.getInterruptedCause()):te(r)),[Bo]:(e,t,r)=>(t.effect_instruction_i2(r),t.effect_instruction_i0()?(e.pushStack(t),t.effect_instruction_i1()):me)},WF={[qf]:(e,t,r,n)=>(e.processNewInterruptSignal(n.cause),Qt(t)?W(n.cause):r),[Xf]:(e,t,r,n)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Wf]:(e,t,r,n)=>(n.onFiber(e,sS(t)),r),[Yf]:(e,t,r,n)=>E(If(),()=>r)},XF=e=>Rr(Gw(e),t=>zr(rC(t),([r,n])=>{const s=new Map,i=[];for(const a of n){i.push(sr(a));for(const c of a)s.set(c.request,c)}const o=i.flat();return ps(m2(r.runAll(i),o,()=>o.forEach(a=>{a.listeners.interrupted=!0})),pS,s)},!1,!1));var h6,d6;class _y{constructor(t,r,n){d(this,h6,cc);d(this,d6,qF);d(this,"_fiberRefs");d(this,"_fiberId");d(this,"_runtimeFlags");d(this,"_queue",new Array);d(this,"_children",null);d(this,"_observers",new Array);d(this,"_running",!1);d(this,"_stack",[]);d(this,"_asyncInterruptor",null);d(this,"_asyncBlockingOn",null);d(this,"_exitValue",null);d(this,"_steps",[]);d(this,"_supervisor");d(this,"_scheduler");d(this,"_tracer");d(this,"currentOpCount",0);d(this,"isYielding",!1);d(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this._runtimeFlags=n,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(C_),this._scheduler=this.getFiberRef(pi),Hd(n)){const s=this.getFiberRef(Vu);GF.unsafeUpdate(1,s),I_.unsafeUpdate(1,s)}this._tracer=Le(this.getFiberRef(Ke),ui)}pipe(){return C(this,arguments)}id(){return this._fiberId}resume(t){this.tell(vn(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>iS(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return Vx(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Qi)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return Q(()=>{const r=$f(this._fiberId);return this.tell(Io((n,s)=>{NE(r,S(()=>t(n,s)))})),rc(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Qe(t=>{const r=n=>t(y(n));return this.tell(Io((n,s)=>{n._exitValue!==null?r(this._exitValue):n.addObserver(r)})),S(()=>this.tell(Io((n,s)=>{n.removeObserver(r)})))},this.id())}get inheritAll(){return oe((t,r)=>{const n=t.id(),s=t.getFiberRefs(),i=r.runtimeFlags,o=this.getFiberRefs(),a=ek(s,n,o);t.setFiberRefs(a);const c=t.getFiberRef(w_),u=p(Tr(i,c),Kd(us),Kd(Bu));return dE(u)})}get poll(){return S(()=>Ri(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return S(()=>this.tell(iu(nr(t))))}unsafeInterruptAsFork(t){this.tell(iu(nr(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef(w_,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=JE(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=el(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this._tracer=Le(this.getFiberRef(Ke),ui),this._supervisor=this.getFiberRef(C_),this._scheduler=this.getFiberRef(pi)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Us;const n=globalThis[mr];globalThis[mr]=this;try{for(;r===Us;)r=this._queue.length===0?KF:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[mr]=n}this._queue.length>0&&!this._running?(this._running=!0,r===M_?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(Di))}drainQueueWhileRunning(t,r){let n=r;for(;this._queue.length>0;){const s=this._queue.splice(0,1)[0];n=WF[s._tag](this,t,n,s)}return n}isInterrupted(){return!iC(this.getFiberRef(Qi))}addInterruptedCause(t){const r=this.getFiberRef(Qi);this.setFiberRef(Qi,Ge(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(const r of this._children)r.tell(iu(nr(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const t=this._children.values();this._children=null;let r=!1;return Rf({while:()=>!r,body:()=>{const s=t.next();return s.done?S(()=>{r=!0}):nt(s.value.await)},step:()=>{}})}return null}reportExitValue(t){if(Hd(this._runtimeFlags)){const r=this.getFiberRef(Vu),n=this.id().startTimeMillis,s=Date.now();switch(zF.unsafeUpdate(s-n,r),I_.unsafeUpdate(-1,r),t._tag){case se:{VF.unsafeUpdate(1,r);break}case ne:{HF.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){const r=this.getFiberRef(TE);!Va(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(e2)}log(t,r,n){const s=_e(n)?n.value:this.getFiberRef(QC),i=this.getFiberRef(YF);if(Rk(i,s))return;const o=this.getFiberRef(ZC),a=this.getFiberRef(JC),c=this.getLoggers(),u=this.getFiberRefs();if(gf(c)>0){const l=Le(this.getFiberRef(Ke),$r),h=new Date(l.unsafeCurrentTimeMillis());for(const _ of c)_.log({fiberId:this.id(),logLevel:s,message:t,cause:r,context:u,spans:o,annotations:a,date:h})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Yf:return M_;case qf:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(W(t.cause)),this._asyncInterruptor=null),Us;case Xf:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Us;case Wf:return t.onFiber(this,this._exitValue!==null?mk:Ek(this._runtimeFlags,this._asyncBlockingOn)),Us;default:return js(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=Qt(this._runtimeFlags)&&this.isInterrupted()?W(this.getInterruptedCause()):t;for(;r!==null;){const n=r,s=this.runLoop(n);if(s===gr){const i=Wt.currentOp;Wt.currentOp=null,i._op===vo?Dw(this._runtimeFlags)?(this.tell(Ux()),this.tell(vn(at)),r=null):r=at:i._op===So&&(r=null)}else{this._runtimeFlags=p(this._runtimeFlags,Fw(Bu));const i=this.interruptAllChildren();i!==null?r=E(i,()=>s):(this._queue.length===0?this.setExitValue(s):this.tell(vn(s)),r=null)}}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(vn(t));else{this._running=!0;const r=globalThis[mr];globalThis[mr]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[mr]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(vn(t))}patchRuntimeFlags(t,r){const n=Un(t,r);return globalThis[mr]=this,this._runtimeFlags=n,n}initiateAsync(t,r){let n=!1;const s=i=>{n||(n=!0,this.tell(vn(i)))};Qt(t)&&(this._asyncInterruptor=s);try{r(s)}catch(i){s(Ee(Je(i)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==yo)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==Uo&&t._op!==Bo)return t;t=this.popStack()}}[(h6=Ss,d6=Jf,uP)](t){return I(xi(Tt),r=>$a(r,t))}Left(t){return ee(t.left)}None(t){return ee(new Ui)}Right(t){return te(t.right)}Some(t){return te(t.value)}[yg](t){const r=t.effect_instruction_i0(),n=this.getNextSuccessCont();return n!==void 0?(n._op in ro||js(n),ro[n._op](this,n,r)):(Wt.currentOp=te(r),gr)}[se](t){const r=t,n=this.getNextSuccessCont();return n!==void 0?(n._op in ro||js(n),ro[n._op](this,n,r.effect_instruction_i0)):(Wt.currentOp=r,gr)}[ne](t){const r=t.effect_instruction_i0,n=this.getNextFailCont();if(n!==void 0)switch(n._op){case yo:case jo:return Qt(this._runtimeFlags)&&this.isInterrupted()?W(qd(r)):n.effect_instruction_i1(r);case"OnStep":return Qt(this._runtimeFlags)&&this.isInterrupted()?W(qd(r)):te(W(r));case Zl:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),Qt(this._runtimeFlags)&&this.isInterrupted()?W(Ge(r,this.getInterruptedCause())):W(r);default:js(n)}else return Wt.currentOp=W(r),gr}[vg](t){return t.effect_instruction_i0(this,sS(this._runtimeFlags))}Blocked(t){const r=this.getFiberRefs(),n=this._runtimeFlags;if(this._steps.length>0){const s=[],i=this._steps[this._steps.length-1];let o=this.popStack();for(;o&&o._op!=="OnStep";)s.push(o),o=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;const a=di(i.refs,r),c=Tr(i.flags,n);return te(Zm(t.effect_instruction_i0,oe(u=>{for(;s.length>0;)u.pushStack(s.pop());return u.setFiberRefs(_i(u.id(),u.getFiberRefs())(a)),u._runtimeFlags=Un(c)(u._runtimeFlags),t.effect_instruction_i1})))}return lr(s=>E(ch(IC(t.effect_instruction_i0)),()=>s(t.effect_instruction_i1)))}RunBlocked(t){return XF(t.effect_instruction_i0)}[is](t){const r=t.effect_instruction_i0,n=this._runtimeFlags,s=Un(n,r);if(Qt(s)&&this.isInterrupted())return W(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.effect_instruction_i1){const i=Tr(s,n);return this.pushStack(new MC(i,t)),t.effect_instruction_i1(n)}else return at}[Uo](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[yo](t){return this.pushStack(t),t.effect_instruction_i0}[jo](t){return this.pushStack(t),t.effect_instruction_i0}[So](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,t.effect_instruction_i0),Wt.currentOp=t,gr}[vo](t){return this.isYielding=!1,Wt.currentOp=t,gr}[Bo](t){const r=t.effect_instruction_i0,n=t.effect_instruction_i1;return r()?(this.pushStack(t),n()):at}[Ql](t){return t.commit()}runLoop(t){let r=t;for(this.currentOpCount=0;;){if(this._runtimeFlags&xw&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),!this.isYielding){this.currentOpCount+=1;const n=this._scheduler.shouldYield(this);if(n!==!1){this.isYielding=!0,this.currentOpCount=0;const s=r;r=E(If({priority:n}),()=>s)}}try{if((!("_op"in r)||!(r._op in this))&&js(r),r=this._tracer.context(()=>Do()!==r[E_]._V?PC(`Cannot execute an Effect versioned ${r[E_]._V} with a Runtime of version ${Do()}`):this[r._op](r),this),r===gr){const n=Wt.currentOp;return n._op===vo||n._op===So?gr:(Wt.currentOp=null,n._op===se||n._op===ne?n:W(Je(n)))}}catch(n){RC(n)?r=W(n.cause):o1(n)?r=W(Ge(Je(n),nr(hn))):r=W(Je(n))}}}}const YF=K("effect/FiberRef/currentMinimumLogLevel",()=>De(Ik("Info"))),JF=e=>th(t=>{const r=nk(t.context,Ke);Le(r,Es).unsafe.log(e.log(t))}),QF=K(Symbol.for("effect/Logger/defaultLogger"),()=>JF(mD)),ZF=K(Symbol.for("effect/Logger/tracerLogger"),()=>th(({annotations:e,cause:t,context:r,fiberId:n,logLevel:s,message:i})=>{const o=rf(ta(r,Tt),It(ur)),a=xn(ta(r,Ke),u=>Le(u,$r));if(o._tag==="None"||o.value._tag==="ExternalSpan"||a._tag==="None")return;const c=Object.fromEntries(Rm(e,Ks));c["effect.fiberId"]=bN(n),c["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=Qn(t)),o.value.event(String(i),a.value.unsafeCurrentTimeNanos(),c)})),e2=K(Symbol.for("effect/FiberRef/currentLoggers"),()=>WC(Da(QF,ZF))),vs=f(e=>zt(e[0]),(e,t)=>Xa(dn(e,r=>dc(n=>t(r,n))))),dc=e=>oe(t=>{const r=t.getFiberRefs(),n=t._runtimeFlags;return E(u2,s=>fi(s,i=>oe(o=>{const a=o.getFiberRefs(),c=o._runtimeFlags,u=di(a,r),l=Tr(c,n),h=di(r,a);return o.setFiberRefs(_i(u,o.id(),r)),fh(FC(e(i),l),S(()=>{o.setFiberRefs(_i(h,o.id(),o.getFiberRefs()))}))})))}),t2=e=>{if(Array.isArray(e)||pg(e))return[e,T()];const t=Object.keys(e),r=t.length;return[t.map(n=>e[n]),R(n=>{const s={};for(let i=0;i<r;i++)s[t[i]]=n[i];return s})]},r2=(e,t,r)=>{const n=[];for(const s of e)n.push(Zn(s));return E(gi(n,Me,{concurrency:r==null?void 0:r.concurrency,batching:r==null?void 0:r.batching}),s=>{const i=T(),o=s.length,a=new Array(o),c=new Array(o);let u=!1;for(let l=0;l<o;l++){const h=s[l];h._tag==="Left"?(a[l]=R(h.left),u=!0):(c[l]=h.right,a[l]=i)}return u?t._tag==="Some"?ee(t.value(a)):ee(a):r!=null&&r.discard?me:t._tag==="Some"?y(t.value(c)):y(c)})},n2=(e,t,r)=>{const n=[];for(const s of e)n.push(Zn(s));return r!=null&&r.discard?gi(n,Me,{concurrency:r==null?void 0:r.concurrency,batching:r==null?void 0:r.batching,discard:!0}):I(gi(n,Me,{concurrency:r==null?void 0:r.concurrency,batching:r==null?void 0:r.batching}),s=>t._tag==="Some"?t.value(s):s)},py=(e,t)=>{const[r,n]=t2(e);return(t==null?void 0:t.mode)==="validate"?r2(r,n,t):(t==null?void 0:t.mode)==="either"?n2(r,n,t):n._tag==="Some"?I(gi(r,Me,t),n.value):gi(r,Me,t)},gi=f(e=>pg(e[0]),(e,t,r)=>oe(n=>{const s=(r==null?void 0:r.batching)===!0||(r==null?void 0:r.batching)==="inherit"&&n.getFiberRef(vE);return r!=null&&r.discard?T_(r.concurrency,()=>bn(Ju)(i=>s?zr(e,(o,a)=>i(t(o,a)),!0,!1,1):Rr(e,(o,a)=>i(t(o,a)))),()=>bn(Qu)(i=>zr(e,(o,a)=>i(t(o,a)),s,!1)),i=>bn(Zu(i))(o=>zr(e,(a,c)=>o(t(a,c)),s,!1,i))):T_(r==null?void 0:r.concurrency,()=>bn(Ju)(i=>s?El(e,1,(o,a)=>i(t(o,a)),!0):Rt(e,(o,a)=>i(t(o,a)))),()=>bn(Qu)(i=>ua(e,(o,a)=>i(t(o,a)),s)),i=>bn(Zu(i))(o=>El(e,i,(a,c)=>o(t(a,c)),s)))})),ua=(e,t,r)=>Q(()=>{const n=z(e),s=new Array(n.length);return ge(zr(n,(o,a)=>E(t(o,a),c=>S(()=>s[a]=c)),r,!1),y(s))}),zr=(e,t,r,n,s)=>lr(i=>xC(o=>oe(a=>{let c=Array.from(e).reverse(),u=c.length;if(u===0)return me;let l=0,h=!1;const _=s?Math.min(c.length,s):c.length,g=new Set,m=new Array,b=()=>g.forEach($e=>{$e._scheduler.scheduleTask(()=>{$e.unsafeInterruptAsFork(a.id())},0)}),A=new Array,L=new Array,P=new Array,X=()=>{const $e=m.filter(({exit:J})=>J._tag==="Failure").sort((J,ve)=>J.index<ve.index?-1:J.index===ve.index?0:1).map(({exit:J})=>J);return $e.length===0&&$e.push(at),$e},V=($e,J=!1)=>{const ve=Xa(o($e)),le=i2(ve,a,a._runtimeFlags,ac);return a._scheduler.scheduleTask(()=>{J&&le.unsafeInterruptAsFork(a.id()),le.resume(ve)},0),le},Se=()=>{n||(u-=c.length,c=[]),h=!0,b()},Ue=r?$C:Et,ye=V(Qe($e=>{const J=(le,We)=>{le._op==="Blocked"?P.push(le):(m.push({index:We,exit:le}),le._op==="Failure"&&!h&&Se())},ve=()=>{if(c.length>0){const le=c.pop();let We=l++;const O=()=>{const M=c.pop();return We=l++,E(If(),()=>E(Ue(i(t(M,We))),v))},v=M=>c.length>0&&(J(M,We),c.length>0)?O():y(M),k=E(Ue(i(t(le,We))),v),$=V(k);A.push($),g.add($),h&&$._scheduler.scheduleTask(()=>{$.unsafeInterruptAsFork(a.id())},0),$.addObserver(M=>{let N;if(M._op==="Failure"?N=M:N=M.effect_instruction_i0,L.push($),g.delete($),J(N,We),m.length===u)$e(y(rt(Vr(X(),{parallel:!0}),()=>at)));else if(P.length+m.length===u){const F=P.map(H=>H.effect_instruction_i0).reduce(Bm);$e(y(Zm(F,zr([rt(Vr(X(),{parallel:!0}),()=>at),...P.map(H=>H.effect_instruction_i1)],H=>H,r,!0,s))))}else ve()})}};for(let le=0;le<_;le++)ve()}));return nt(nn(es(i(eh(ye))),tc({onFailure:()=>{Se();const $e=P.length+1,J=Math.min(typeof s=="number"?s:P.length,P.length),ve=Array.from(P);return Qe(le=>{const We=[];let O=0,v=0;const k=(M,N)=>F=>{We[M]=F,O++,O===$e&&le(Fg(Vr(We,{parallel:!0}))),ve.length>0&&N&&$()},$=()=>{V(ve.pop(),!0).addObserver(k(v,!0)),v++};ye.addObserver(k(v,!1)),v++;for(let M=0;M<J;M++)$()})},onSuccess:()=>Rt(L,$e=>$e.inheritAll)})))}))),El=(e,t,r,n)=>Q(()=>{const s=z(e),i=new Array(s.length);return ge(zr(s,(a,c)=>I(r(a,c),u=>i[c]=u),n,!1,t),y(i))}),s2=e=>oe((t,r)=>y(gy(e,t,r.runtimeFlags))),ch=e=>o2(e,ac),gy=(e,t,r,n=null)=>{const s=my(e,t,r,n);return s.resume(e),s},i2=(e,t,r,n=null)=>my(e,t,r,n),my=(e,t,r,n=null)=>{const s=Tm(),i=t.getFiberRefs(),o=tk(i,s),a=new _y(s,o,r),c=Gf(o,Tt),u=a._supervisor;return u.onStart(c,e,R(t),a),a.addObserver(h=>u.onEnd(h,a)),(n!==null?n:p(t.getFiberRef(Hu),rt(()=>t.scope()))).add(r,a),a},o2=(e,t)=>oe((r,n)=>y(gy(e,r,n.runtimeFlags,t))),P_=e=>Pr(t=>mt(It(t,dr),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return E(Za(r,Qu),n=>Os(e,n))}}})),$_=e=>t=>Pr(r=>mt(It(r,dr),{onNone:()=>t,onSome:n=>n.strategy._tag==="ParallelN"&&n.strategy.parallelism===e?t:E(Za(n,Zu(e)),s=>Os(t,s))})),bn=e=>t=>Pr(r=>mt(It(r,dr),{onNone:()=>t(Me),onSome:n=>{const s=e._tag==="Parallel"?P_:e._tag==="Sequential"?N_:$_(e.parallelism);switch(n.strategy._tag){case"Parallel":return s(t(P_));case"Sequential":return s(t(N_));case"ParallelN":return s(t($_(n.strategy.parallelism)))}}})),Ts=e=>E(dr,e),Ey=e=>E(bs(),t=>yy(e,t)),N_=e=>Pr(t=>mt(It(t,dr),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return E(Za(r,Ju),n=>Os(e,n))}}})),a2=e=>Hi(Ke,He(jf,e)),c2=f(e=>zt(e[1]),(e,t,r)=>uh(e,t,(n,s)=>[n,s],r)),uh=f(e=>zt(e[1]),(e,t,r,n)=>I(py([e,t],{concurrency:n!=null&&n.concurrent?2:1,batching:n==null?void 0:n.batching}),([s,i])=>r(s,i))),dr=Xe("effect/Scope"),u2=dr,l2=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.add(t)},f2={[zu]:zu,[Ku]:Ku,pipe(){return C(this,arguments)},fork(e){return S(()=>{const t=Sy(e);if(this.state._tag==="Closed")return t.state=this.state,t;const r=n=>t.close(n);return this.state.finalizers.add(r),l2(t,n=>S(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return Q(()=>{if(this.state._tag==="Closed")return me;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?me:XL(this.strategy)?p(Rt(t,r=>Et(r(e))),E(r=>p(Vr(r),xn(Oo),rt(()=>at)))):YL(this.strategy)?p(ua(t,r=>Et(r(e)),!1),E(r=>p(Vr(r,{parallel:!0}),xn(Oo),rt(()=>at)))):p(El(t,this.strategy.parallelism,r=>Et(r(e)),!1),E(r=>p(Vr(r,{parallel:!0}),xn(Oo),rt(()=>at))))})},addFinalizer(e){return Q(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.add(e),me))}},Sy=(e=ic)=>{const t=Object.create(f2);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},bs=(e=ic)=>S(()=>Sy(e)),Os=f(2,(e,t)=>wE(e,as(Nt(dr,t)))),yy=f(2,(e,t)=>p(e,Os(t),nn(r=>t.close(r)))),h2=e=>gs(e,{differ:BF,fork:Ys}),Vt=f(2,(e,t)=>nt(vs(E(xi(e),r=>ke(Qo(e,t),r)),r=>Qo(e,r)))),Hi=f(2,(e,t)=>fr(e,r=>Vt(e,t(r)))),w_=YC(Uw),C_=h2(hc),d2=e=>nt(Qf(lh(e))),lh=e=>({[Ss]:cc,id:()=>z(e).reduce((t,r)=>vN(t,r.id()),hn),await:Et(ua(e,t=>es(t.await),!1)),children:I(ua(e,t=>t.children,!1),Vg),inheritAll:Rr(e,t=>t.inheritAll),poll:I(Rt(e,t=>t.poll),r$(R(te(new Array)),(t,r)=>{switch(r._tag){case"None":return T();case"Some":switch(t._tag){case"None":return T();case"Some":return R(hr(r.value,t.value,{onSuccess:(n,s)=>[n,...s],onFailure:vt}))}}})),interruptAsFork:t=>Rr(e,r=>r.interruptAsFork(t)),pipe(){return C(this,arguments)}}),_2=e=>nt(ch(Ja(e))),p2=e=>eh(lh(e)),g2=e=>vs(y(e),Ja),fh=f(2,(e,t)=>lr(r=>Mt(r(e),{onFailure:n=>Mt(t,{onFailure:s=>Ee(Ge(n,s)),onSuccess:()=>Ee(n)}),onSuccess:n=>ke(t,n)}))),m2=(e,t,r)=>aE(n=>E(E(ch(cE(e)),s=>Qe(i=>{const o=t.map(u=>u.listeners.count),a=()=>{o.every(u=>u===0)&&t.every(u=>u.result.state.current._tag==="Pending"?!0:!!(u.result.state.current._tag==="Done"&&ec(u.result.state.current.effect)&&u.result.state.current.effect._tag==="Failure"&&qm(u.result.state.current.effect.cause)))&&(c.forEach(u=>u()),r==null||r(),i(Ja(s)))};s.addObserver(u=>{c.forEach(l=>l()),i(u)});const c=t.map((u,l)=>{const h=_=>{o[l]=_,a()};return u.listeners.addObserver(h),()=>u.listeners.removeObserver(h)});return a(),S(()=>{c.forEach(u=>u())})})),()=>Q(()=>{const s=t.flatMap(i=>i.state.completed?[]:[i]);return Rr(s,i=>wF(i.request,ME(n)))}))),la=(e,t)=>Xa(oe(r=>{const n=$a(r.getFiberRef(Tt),dr),s=IS(r,e,t),i=r.getFiberRef(Qa),o=Le(r.getFiberRef(Ke),$r);return ke(fi(n,a=>S(()=>{s.status._tag!=="Ended"&&s.end(i?o.unsafeCurrentTimeNanos():BigInt(0),a)})),s)})),E2=e=>Hi(Ke,He(ui,e)),vy=ci,Ty=Je,S2=Va,y2=Tf,v2=Ui,L_=Qn,T2="effect/ScheduleInterval",fa=Symbol.for(T2),by={[fa]:fa,startMillis:0,endMillis:0},hh=(e,t)=>e>t?by:{[fa]:fa,startMillis:e,endMillis:t},b2=f(2,(e,t)=>O2(e,t)===e),O2=f(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),A2=e=>e.startMillis>=e.endMillis,R2=f(2,(e,t)=>{const r=Math.max(e.startMillis,t.startMillis),n=Math.min(e.endMillis,t.endMillis);return hh(r,n)}),I2=e=>Gt(e.endMillis-e.startMillis),M2=e=>hh(e,Number.POSITIVE_INFINITY),ct=hh,Oy=by,P2=b2,$2=A2,N2=R2,w2=I2,Ht=M2,C2="effect/ScheduleIntervals",k_=Symbol.for(C2),dh=e=>({[k_]:k_,intervals:e}),L2=f(2,(e,t)=>Ne(t.intervals)?Ne(e.intervals)?Z(e.intervals).startMillis<Z(t.intervals).startMillis?x_(Re(e.intervals),t.intervals,Z(e.intervals),Be()):x_(e.intervals,Re(t.intervals),Z(t.intervals),Be()):t:e),x_=(e,t,r,n)=>{let s=e,i=t,o=r,a=n;for(;Ne(s)||Ne(i);)if(!Ne(s)&&Ne(i))o.endMillis<Z(i).startMillis?(a=p(a,we(o)),o=Z(i),i=Re(i),s=Be()):(o=ct(o.startMillis,Z(i).endMillis),i=Re(i),s=Be());else if(Ne(s)&&rm(i))o.endMillis<Z(s).startMillis?(a=p(a,we(o)),o=Z(s),i=Be(),s=Re(s)):(o=ct(o.startMillis,Z(s).endMillis),i=Be(),s=Re(s));else if(Ne(s)&&Ne(i))Z(s).startMillis<Z(i).startMillis?o.endMillis<Z(s).startMillis?(a=p(a,we(o)),o=Z(s),s=Re(s)):(o=ct(o.startMillis,Z(s).endMillis),s=Re(s)):o.endMillis<Z(i).startMillis?(a=p(a,we(o)),o=Z(i),i=Re(i)):(o=ct(o.startMillis,Z(i).endMillis),i=Re(i));else throw new Error(Ai("Intervals.unionLoop"));return dh(p(a,we(o),ar))},k2=f(2,(e,t)=>x2(e.intervals,t.intervals,Be())),x2=(e,t,r)=>{let n=e,s=t,i=r;for(;Ne(n)&&Ne(s);){const o=p(Z(n),N2(Z(s))),a=$2(o)?i:p(i,we(o));p(Z(n),P2(Z(s)))?n=Re(n):s=Re(s),i=a}return dh(ar(i))},Sl=e=>p(e.intervals,nm,rt(()=>Oy)).startMillis,D2=e=>p(e.intervals,nm,rt(()=>Oy)).endMillis,Ay=f(2,(e,t)=>Sl(e)<Sl(t)),F2=e=>Ne(e.intervals),U2=f(2,(e,t)=>Ay(e,t)?t:e),j2=dh,Ry=L2,B2=k2,ts=Sl,yl=D2,G2=Ay,V2=F2,H2=U2,_h="Continue",Iy="Done",z2=e=>({_tag:_h,intervals:e}),K2=e=>({_tag:_h,intervals:j2(st(e))}),q2={_tag:Iy},W2=e=>e._tag===_h,X2=e=>e._tag===Iy,Bn=z2,xe=K2,Pt=q2,vr=W2,ze=X2,Y2=zu,J2=Ku,My=dr,Q2=OE,Z2=fi,ph=Zo,Py=Os,$y=Za,eU=yy,tU=bs,rU=Object.freeze(Object.defineProperty({__proto__:null,CloseableScopeTypeId:J2,Scope:My,ScopeTypeId:Y2,addFinalizer:Q2,addFinalizerExit:Z2,close:ph,extend:Py,fork:$y,make:tU,use:eU},Symbol.toStringTag,{value:"Module"})),nU=e=>e.length>0,vl=Symbol.for("effect/Cron"),sU={[vl]:vl,[j](e){return Ny(e)&&hU(this,e)},[U](){return p(Ft(z(this.minutes)),B(Ft(z(this.hours))),B(Ft(z(this.days))),B(Ft(z(this.months))),B(Ft(z(this.weekdays))),ce(this))},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"Cron",minutes:z(this.minutes),hours:z(this.hours),days:z(this.days),months:z(this.months),weekdays:z(this.weekdays)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},Ny=e=>D(e,vl),iU=({days:e,hours:t,minutes:r,months:n,weekdays:s})=>{const i=Object.create(sU);return i.minutes=new Set(er(r,gt)),i.hours=new Set(er(t,gt)),i.days=new Set(er(e,gt)),i.months=new Set(er(n,gt)),i.weekdays=new Set(er(s,gt)),i},D_=Symbol.for("effect/Cron/errors/ParseError"),oU={_tag:"ParseError",[D_]:D_},Xt=(e,t)=>{const r=Object.create(oU);return r.message=e,t!==void 0&&(r.input=t),r},aU=e=>{const t=e.split(" ").filter(nU);if(t.length!==5)return Te(Xt("Invalid number of segments in cron expression",e));const[r,n,s,i,o]=t;return AP({minutes:Gs(r,dU),hours:Gs(n,_U),days:Gs(s,pU),months:Gs(i,gU),weekdays:Gs(o,mU)}).pipe(bP(a=>iU(a)))},cU=(e,t)=>{const{days:r,hours:n,minutes:s,months:i,weekdays:o}=e,a=t.getMinutes();if(s.size!==0&&!s.has(a))return!1;const c=t.getHours();if(n.size!==0&&!n.has(c))return!1;const u=t.getMonth()+1;if(i.size!==0&&!i.has(u))return!1;if(r.size===0&&o.size===0)return!0;const l=t.getDate();if(o.size===0)return r.has(l);const h=t.getDay();return r.size===0?o.has(h):r.has(l)||o.has(h)},uU=(e,t)=>{const{days:r,hours:n,minutes:s,months:i,weekdays:o}=e,a=s.size!==0,c=n.size!==0,u=r.size!==0,l=i.size!==0,h=o.size!==0,_=t?new Date(t.getTime()):new Date;_.setMinutes(_.getMinutes()+1),_.setSeconds(0),_.setMilliseconds(0);const g=new Date(_).setFullYear(_.getFullYear()+8);for(;_.getTime()<=g;){if(l&&!i.has(_.getMonth()+1)){_.setMonth(_.getMonth()+1),_.setDate(1),_.setHours(0),_.setMinutes(0);continue}if(u&&h){if(!r.has(_.getDate())&&!o.has(_.getDay())){_.setDate(_.getDate()+1),_.setHours(0),_.setMinutes(0);continue}}else if(u){if(!r.has(_.getDate())){_.setDate(_.getDate()+1),_.setHours(0),_.setMinutes(0);continue}}else if(h&&!o.has(_.getDay())){_.setDate(_.getDate()+1),_.setHours(0),_.setMinutes(0);continue}if(c&&!n.has(_.getHours())){_.setHours(_.getHours()+1),_.setMinutes(0);continue}if(a&&!s.has(_.getMinutes())){_.setMinutes(_.getMinutes()+1);continue}return _}throw new Error("Unable to find next cron date")},lU=ba((e,t)=>Bs(e.minutes,t.minutes)&&Bs(e.hours,t.hours)&&Bs(e.days,t.days)&&Bs(e.months,t.months)&&Bs(e.weekdays,t.weekdays)),fU=_g(zM),Bs=(e,t)=>fU(z(e),z(t)),hU=f(2,(e,t)=>lU(e,t)),dU={segment:"minute",min:0,max:59},_U={segment:"hour",min:0,max:23},pU={segment:"day",min:1,max:31},gU={segment:"month",min:1,max:12,aliases:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}},mU={segment:"weekday",min:0,max:6,aliases:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},Gs=(e,t)=>{const r=t.max-t.min+1,n=new Set,s=e.split(",");for(const i of s){const[o,a]=EU(i);if(o==="*"&&a===void 0)return re(new Set);if(a!==void 0){if(!Number.isInteger(a))return Te(Xt("Expected step value to be a positive integer",e));if(a<1)return Te(Xt("Expected step value to be greater than 0",e));if(a>t.max)return Te(Xt(`Expected step value to be less than ${t.max}`,e))}if(o==="*")for(let c=t.min;c<=t.max;c+=a??1)n.add(c);else{const[c,u]=SU(o,t.aliases);if(!Number.isInteger(c))return Te(Xt("Expected a positive integer",e));if(c<t.min||c>t.max)return Te(Xt(`Expected a value between ${t.min} and ${t.max}`,e));if(u===void 0)n.add(c);else{if(!Number.isInteger(u))return Te(Xt("Expected a positive integer",e));if(u<t.min||u>t.max)return Te(Xt(`Expected a value between ${t.min} and ${t.max}`,e));if(c>u)return Te(Xt("Invalid value range",e));for(let l=c;l<=u;l+=a??1)n.add(l)}}if(n.size>=r)return re(new Set)}return re(n)},EU=e=>{const t=e.indexOf("/");return t!==-1?[e.slice(0,t),Number(e.slice(t+1))]:[e,void 0]},SU=(e,t)=>{const r=e.indexOf("-");return r!==-1?[au(e.slice(0,r),t),au(e.slice(r+1),t)]:[au(e,t),void 0]};function au(e,t){return(t==null?void 0:t[e.toLocaleLowerCase()])??Number(e)}const yU=VL,vU="effect/Schedule",gh=Symbol.for(vU),TU=e=>D(e,gh),bU="effect/ScheduleDriver",wy=Symbol.for(bU),OU={_Out:e=>e,_In:e=>e,_R:e=>e},AU={_Out:e=>e,_In:e=>e,_R:e=>e};var _6;class RU{constructor(t,r){d(this,"initial");d(this,"step");d(this,_6,OU);this.initial=t,this.step=r}pipe(){return C(this,arguments)}}_6=gh;var p6;class IU{constructor(t,r){d(this,"schedule");d(this,"ref");d(this,p6,AU);this.schedule=t,this.ref=r}get state(){return I(Hr(this.ref),t=>t[1])}get last(){return E(Hr(this.ref),([t,r])=>{switch(t._tag){case"None":return Ka(()=>new Ui);case"Some":return y(t.value)}})}get reset(){return sa(this.ref,[T(),this.schedule.initial])}next(t){return p(I(Hr(this.ref),r=>r[1]),E(r=>p(zf,E(n=>p(Q(()=>this.schedule.step(n,t,r)),E(([s,i,o])=>{const a=sa(this.ref,[R(i),s]);if(ze(o))return ge(a,ee(T()));const c=ts(o.intervals)-n;return c<=0?ke(a,i):p(a,ge(OS(Gt(c))),ke(i))}))))))}}p6=wy;const q=(e,t)=>new RU(e,t),mh=f(2,(e,t)=>Cy(e,r=>S(()=>t(r)))),Cy=f(2,(e,t)=>pc(e,(r,n)=>I(t(r),s=>DE(n,ae(s))))),MU=f(2,(e,t)=>Ye(Ly(e,t),ef)),Ly=f(2,(e,t)=>q([e.initial,t.initial,!0],(r,n,s)=>s[2]?E(e.step(r,n,s[0]),([i,o,a])=>ze(a)?I(t.step(r,n,s[1]),([c,u,l])=>[[i,c,!1],re(u),l]):y([[i,s[1],!0],Te(o),a])):I(t.step(r,n,s[1]),([i,o,a])=>[[s[0],i,!1],re(o),a]))),PU=f(2,(e,t)=>Ye(e,()=>t)),Eh=e=>Ye(e,BM),$U=f(2,(e,t)=>q([e.initial,t.initial],(r,[n,s],i)=>sn(e.step(r,n,i[0]),t.step(r,s,i[1]),([o,a,c],[u,l,h])=>{if(vr(c)&&vr(h)){const _=p(c.intervals,Ry(h.intervals));return[[o,u],[a,l],Bn(_)]}return[[o,u],[a,l],Pt]}))),zi=f(2,(e,t)=>As(e,(r,n)=>S(()=>t(r,n)))),As=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>ze(a)?y([i,o,Pt]):I(t(n,o),c=>c?[i,o,a]:[i,o,Pt])))),NU=()=>Rs(Nr()),Rs=e=>Th(e,Be(),(t,r)=>p(t,tm(r))),wU=e=>Rs(By(e)),CU=e=>Rs(Gy(e)),LU=e=>Rs(Hy(e)),kU=e=>Rs(zy(e)),xU=f(2,(e,t)=>q([e.initial,t.initial],(r,n,s)=>E(e.step(r,n,s[0]),([i,o,a])=>I(t.step(r,o,s[1]),([c,u,l])=>ze(a)?[[i,c],u,Pt]:ze(l)?[[i,c],u,Pt]:[[i,c],u,Bn(p(a.intervals,H2(l.intervals)))])))),ky=f(2,(e,t)=>Sh(e,r=>S(()=>t(r)))),DU=f(2,(e,t)=>q(e.initial,(r,n,s)=>wE(e.step(r,n,s),t))),Sh=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(t(n),i=>e.step(r,i,s)))),FU=e=>{const t=Ny(e)?re(e):aU(e);return q([!0,[Number.MIN_SAFE_INTEGER,0,0]],(r,n,[s,i])=>{if(r<i[0])return y([[!1,i],[i[1],i[2]],xe(ct(i[1],i[2]))]);if(rr(t))return _s(t.left);const o=t.right,a=new Date(r);let c;s&&cU(o,a)?c=r:c=uU(o,a).getTime();const u=Ih(c),l=tv(c),h=ct(u,l);return y([[!1,[c,u,l]],[u,l],xe(h)])})},UU=e=>q([Number.NEGATIVE_INFINITY,0],(t,r,n)=>{if(!Number.isInteger(e)||e<1||31<e)return ki(()=>new Fi(`Invalid argument in: dayOfMonth(${e}). Must be in range 1...31`));const s=n[1],o=$j(t,e,s===0),a=Mh(o),c=nv(o),u=ct(a,c);return y([[c,s+1],s,xe(u)])}),jU=e=>q([Number.MIN_SAFE_INTEGER,0],(t,r,n)=>{if(!Number.isInteger(e)||e<1||7<e)return ki(()=>new Fi(`Invalid argument in: dayOfWeek(${e}). Must be in range 1 (Monday)...7 (Sunday)`));const s=n[1],o=Pj(t,e,s===0),a=Mh(o),c=nv(o),u=ct(a,c);return y([[c,s+1],s,xe(u)])}),BU=f(2,(e,t)=>yh(e,r=>S(()=>t(r)))),yh=f(2,(e,t)=>pc(e,(r,n)=>t(n))),_c=e=>mh(e,t=>t),GU=e=>q(e.initial,(t,r,n)=>p(e.step(t,r,n),E(([s,i,o])=>ze(o)?y([s,on,o]):y([s,Gt(ts(o.intervals)-t),o])))),VU=f(2,(e,{onInput:t,onOutput:r})=>Ye(ky(e,t),r)),HU=f(2,(e,{onInput:t,onOutput:r})=>vh(Sh(e,t),r)),xy=e=>p(na([T(),e.initial]),I(t=>new IU(e,t))),Dy=e=>{const t=ae(e),r=St(t);return q(!0,(n,s,i)=>y(i?[!1,t,xe(Ht(n+r))]:[!1,on,Pt]))},zU=f(2,(e,t)=>Xy(e,t)),KU=f(3,(e,t,r)=>bh(e,t,r)),qU=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>ze(a)?ke(t,[i,o,a]):y([i,o,a])))),WU=(e,t=2)=>{const r=ae(e);return _c(Ye(_r,n=>xE(r,Math.pow(t,n))))},XU=e=>{const t=ae(e);return _c(p(mc([t,t],([r,n])=>[n,DE(r,n)]),Ye(r=>r[0])))},YU=e=>{const t=ae(e),r=St(t);return q([T(),0],(n,s,[i,o])=>S(()=>{switch(i._tag){case"None":return[[R([n,n+r]),o+1],o,xe(Ht(n+r))];case"Some":{const[a,c]=i.value,u=n>c+r,l=x(t,on)?t:Gt(r-(n-a)%r),h=x(l,on)?t:l,_=u?n:n+St(h);return[[R([a,_]),o+1],o,xe(Ht(_))]}}}))},JU=e=>Dy(e),QU=(e,...t)=>q([[e,...t].map(r=>ae(r)),!0],(r,n,[s,i])=>S(()=>{if(i){const o=s[0],a=Ht(r+St(o));if(s.length>=2)return[[s.slice(1),!0],o,xe(a)];const c=s.slice(1);return[[[o,...c],!1],o,xe(a)]}return[[s,!1],on,Pt]})),ZU=e=>Ye(Nr(),e),ej=e=>q([Number.NEGATIVE_INFINITY,0],(t,r,n)=>{if(!Number.isInteger(e)||e<0||23<e)return ki(()=>new Fi(`Invalid argument in: hourOfDay(${e}). Must be in range 0...23`));const s=n[1],o=Mj(t,e,s===0),a=rv(o),c=Ij(o),u=ct(a,c);return y([[c,s+1],s,xe(u)])}),Nr=()=>q(void 0,(e,t,r)=>y([r,t,xe(Ht(e))])),Is=f(2,(e,t)=>Fy(e,t,B2)),Fy=f(3,(e,t,r)=>q([e.initial,t.initial],(n,s,i)=>p(sn(e.step(n,s,i[0]),t.step(n,s,i[1]),(o,a)=>[o,a]),E(([[o,a,c],[u,l,h]])=>vr(c)&&vr(h)?Tl(e,t,s,o,a,c.intervals,u,l,h.intervals,r):y([[o,u],[a,l],Pt]))))),Tl=(e,t,r,n,s,i,o,a,c,u)=>{const l=u(i,c);return V2(l)?y([[n,o],[s,a],Bn(l)]):p(i,G2(c))?E(e.step(yl(i),r,n),([h,_,g])=>ze(g)?y([[h,o],[_,a],Pt]):Tl(e,t,r,h,_,g.intervals,o,a,c,u)):E(t.step(yl(c),r,o),([h,_,g])=>ze(g)?y([[n,h],[s,_],Pt]):Tl(e,t,r,n,s,i,h,_,g.intervals,u))},tj=e=>Uy(e,{min:.8,max:1.2}),Uy=f(2,(e,t)=>{const{max:r,min:n}=Object.assign({min:.8,max:1.2},t);return yh(e,s=>I(yU,i=>{const o=St(s),a=o*n*(1-i)+o*r*i;return Gt(a)}))}),rj=e=>{const t=ae(e);return _c(Ye(_r,r=>xE(t,r+1)))},Ye=f(2,(e,t)=>vh(e,r=>S(()=>t(r)))),vh=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>I(t(o),c=>[i,c,a])))),nj=e=>q([Number.MIN_SAFE_INTEGER,0],(t,r,n)=>{if(!Number.isInteger(e)||e<0||59<e)return ki(()=>new Fi(`Invalid argument in: minuteOfHour(${e}). Must be in range 0...59`));const s=n[1],o=Rj(t,e,s===0),a=Ih(o),c=tv(o),u=ct(a,c);return y([[c,s+1],s,xe(u)])}),sj=f(2,(e,t)=>pc(e,(r,n)=>S(()=>t(r,n)))),pc=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>{if(ze(a))return y([i,o,a]);const c=a.intervals,u=w2(ct(r,ts(c)));return I(t(o,u),l=>{const h=ae(l),_=ts(c),g=r+St(h),m=g-_,b=Math.min(Math.max(0,yl(c)+m),Number.MAX_SAFE_INTEGER),A=ct(g,b);return[i,o,xe(A)]})}))),ij=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>ke(t(o,a),[i,o,a])))),jy=e=>q(e.initial,(t,r,n)=>p(e.step(t,r,n),I(([s,i,o])=>[s,r,o]))),oj=f(2,(e,t)=>q(e.initial,(r,n,s)=>Kt(e.step(r,n,s),t))),aj=f(3,(e,t,r)=>q(e.initial,(n,s,i)=>Pr(o=>Kt(e.step(n,s,i),He(o,t,r))))),By=e=>Yy(Nr(),e),Gy=e=>Oh(Nr(),e),cj=e=>Jy(Ye(Nr(),e),_e),Vy=e=>{const t=ae(e);return Rh(Ph,r=>q1(r,t))},Hy=e=>Qy(Nr(),e),zy=e=>Ah(Nr(),e),gc=e=>Rh(_r,t=>t<e),Th=f(3,(e,t,r)=>Ky(e,t,(n,s)=>S(()=>r(n,s)))),Ky=f(3,(e,t,r)=>q([e.initial,t],(n,s,[i,o])=>E(e.step(n,s,i),([a,c,u])=>ze(u)?y([[a,o],o,u]):I(r(o,c),l=>[[a,l],o,u])))),uj=e=>Th(e,0,(t,r)=>t+1),lj=f(2,(e,t)=>{const r=ae(t);return p(e,Is(Ph),qy(([,n])=>FE(n,r)),Ye(n=>n[0]))}),qy=f(2,(e,t)=>q(e.initial,(r,n,s)=>E(e.step(r,n,s),([i,o,a])=>t(o)?e.step(r,n,e.initial):y([i,o,a])))),fj=f(3,(e,t,r)=>p(Wy(e,t,of(r),e.initial,Be()),I(n=>ar(n)))),Wy=(e,t,r,n,s)=>{if(!Ne(r))return y(s);const i=Z(r),o=Re(r);return E(e.step(t,i,n),([a,c,u])=>ze(u)?S(()=>p(s,we(c))):Wy(e,ts(u.intervals),o,a,we(s,c)))},hj=e=>q([Number.NEGATIVE_INFINITY,0],(t,r,n)=>{if(!Number.isInteger(e)||e<0||59<e)return ki(()=>new Fi(`Invalid argument in: secondOfMinute(${e}). Must be in range 0...59`));const s=n[1],o=Aj(t,e,s===0),a=ev(o),c=Oj(o),u=ct(a,c);return y([[c,s+1],s,xe(u)])}),dj=e=>mh(_r,()=>e),_j=e=>Ye(_r,()=>e),pj=e=>Ye(_r,e),gj=f(2,(e,t)=>q(e.initial,(r,n,s)=>ge(t(n),e.step(r,n,s)))),mj=f(2,(e,t)=>q(e.initial,(r,n,s)=>dn(e.step(r,n,s),([,i])=>t(i)))),mc=(e,t)=>q(e,(r,n,s)=>S(()=>[t(s),s,xe(Ht(r))])),Xy=f(2,(e,t)=>bh(e,t,Ry)),bh=f(3,(e,t,r)=>q([e.initial,t.initial],(n,s,i)=>sn(e.step(n,s,i[0]),t.step(n,s,i[1]),([o,a,c],[u,l,h])=>{if(ze(c)&&ze(h))return[[o,u],[a,l],Pt];if(ze(c)&&vr(h))return[[o,u],[a,l],Bn(h.intervals)];if(vr(c)&&ze(h))return[[o,u],[a,l],Bn(c.intervals)];if(vr(c)&&vr(h)){const _=r(c.intervals,h.intervals);return[[o,u],[a,l],Bn(_)]}throw new Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),Yy=f(2,(e,t)=>zi(e,(r,n)=>!t(r))),Oh=f(2,(e,t)=>As(e,(r,n)=>vS(t(r)))),Jy=f(2,(e,t)=>zi(e,(r,n)=>!t(n))),Ej=f(2,(e,t)=>As(e,(r,n)=>vS(t(n)))),Sj=f(2,(e,t)=>Zy(e,Vy(t))),Qy=f(2,(e,t)=>zi(e,(r,n)=>t(r))),Ah=f(2,(e,t)=>As(e,(r,n)=>t(r))),Rh=f(2,(e,t)=>zi(e,(r,n)=>t(n))),yj=f(2,(e,t)=>As(e,(r,n)=>t(n))),vj=e=>{const t=ae(e),r=St(t);return q([T(),0],(n,s,[i,o])=>{switch(i._tag){case"None":return y([[R(n),o+1],o,xe(Ht(n+r))]);case"Some":return y([[R(i.value),o+1],o,xe(Ht(n+(r-(n-i.value)%r)))])}})},Zy=f(2,(e,t)=>Ye(Is(e,t),r=>r[0])),Tj=f(2,(e,t)=>Ye(Is(e,t),r=>r[1])),bj=f(3,(e,t,r)=>Ye(Is(e,t),([n,s])=>r(n,s))),ev=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0).getTime()},Oj=e=>{const t=new Date(ev(e));return t.setSeconds(t.getSeconds()+1)},Aj=(e,t,r)=>{const n=new Date(e);if(n.getSeconds()===t&&r)return e;if(n.getSeconds()<t)return n.setSeconds(t);const s=new Date(n.setSeconds(t));return s.setTime(s.getTime()+1e3*60)},Ih=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0).getTime()},tv=e=>{const t=new Date(Ih(e));return t.setMinutes(t.getMinutes()+1)},Rj=(e,t,r)=>{const n=new Date(e);if(n.getMinutes()===t&&r)return e;if(n.getMinutes()<t)return n.setMinutes(t);const s=new Date(n.setMinutes(t));return s.setTime(s.getTime()+1e3*60*60)},rv=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime()},Ij=e=>{const t=new Date(rv(e));return t.setHours(t.getHours()+1)},Mj=(e,t,r)=>{const n=new Date(e);if(n.getHours()===t&&r)return e;if(n.getHours()<t)return n.setHours(t);const s=new Date(n.setHours(t));return s.setTime(s.getTime()+1e3*60*60*24)},Mh=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime()},nv=e=>{const t=new Date(Mh(e));return t.setDate(t.getDate()+1)},Pj=(e,t,r)=>{const n=new Date(e);if(n.getDay()===t&&r)return e;const s=(7+t-n.getDay())%7;return n.setDate(n.getDate()+(s===0?7:s))},$j=(e,t,r)=>{const n=new Date(e);return n.getDate()===t&&r?e:n.getDate()<t?n.setDate(t):sv(e,t,1)},sv=(e,t,r)=>{const n=new Date(e),s=new Date(n.setDate(t));if(new Date(s.setMonth(s.getMonth()+r)).getDate()===t){const o=new Date(e),a=new Date(o.setDate(t));return a.setMonth(a.getMonth()+r)}return sv(e,t,r+1)},Po=Symbol.for("effect/Schedule/ScheduleDefect");var g6;class Nj{constructor(t){d(this,"error");d(this,g6);this.error=t,this[Po]=Po}}g6=Po;const wj=e=>D(e,Po),F_=e=>Yo(e,t=>_s(new Nj(t))),Cj=e=>nE(e,t=>mt(bf(t,r=>sC(r)&&wj(r.defect)?R(r.defect):T()),{onNone:()=>Ee(t),onSome:r=>ee(r.error)})),U_=f(2,(e,t)=>kj(e,t,(r,n)=>ee(r))),Lj=f(2,(e,t)=>{if(TU(t))return U_(e,t);const r=t.schedule??jy(_r),n=t.while?Ah(r,o=>{const a=t.while(o);return typeof a=="boolean"?y(a):F_(a)}):r,s=t.until?Oh(n,o=>{const a=t.until(o);return typeof a=="boolean"?y(a):F_(a)}):n,i=t.times?Is(s,gc(t.times)):s;return Cj(U_(e,i))}),kj=f(3,(e,t,r)=>E(xy(t),n=>cr(e,{onFailure:s=>r(s,T()),onSuccess:s=>iv(e,n,r,s)}))),iv=(e,t,r,n)=>cr(t.next(n),{onFailure:()=>hE(t.last),onSuccess:s=>cr(e,{onFailure:i=>r(i,R(s)),onSuccess:i=>iv(e,t,r,i)})}),xj=mc(0,e=>e+1),Ph=q(T(),(e,t,r)=>{switch(r._tag){case"None":return y([R(e),on,xe(Ht(e))]);case"Some":return y([R(r.value),Gt(e-r.value),xe(Ht(e))])}}),_r=mc(0,e=>e+1),Dj=Eh(gc(1)),Fj=Eh(gc(0));class Uj{constructor(t){d(this,"permits");d(this,"waiters",new Set);d(this,"taken",0);d(this,"take",t=>Qe(r=>{if(this.free<t){const n=()=>{this.free<t||(this.waiters.delete(n),this.taken+=t,r(y(t)))};return this.waiters.add(n),S(()=>{this.waiters.delete(n)})}return this.taken+=t,r(y(t))}));d(this,"updateTaken",t=>oe(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(pi).scheduleTask(()=>{const n=this.waiters.values();let s=n.next();for(;s.done===!1&&this.free>0;)s.value(),s=n.next()},r.getFiberRef(Di)),y(this.free))));d(this,"release",t=>this.updateTaken(r=>r-t));d(this,"releaseAll",this.updateTaken(t=>0));d(this,"withPermits",t=>r=>lr(n=>E(n(this.take(t)),s=>fh(n(r),this.release(s)))));this.permits=t}get free(){return this.permits-this.taken}}const jj=e=>new Uj(e),Bj="effect/Ref/SynchronizedRef",Gj=Symbol.for(Bj),Vj={_A:e=>e};var m6,E6,S6;class Hj{constructor(t,r){d(this,"ref");d(this,"withLock");d(this,m6,Vj);d(this,E6,fS);d(this,S6);d(this,"get");this.ref=t,this.withLock=r,this[jn]=jn,this.get=Hr(this.ref)}modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(p(E(Hr(this.ref),t),E(([r,n])=>ke(sa(this.ref,n),r))))}pipe(){return C(this,arguments)}}m6=Gj,E6=lS,S6=jn;const zj=e=>S(()=>ov(e)),ov=e=>{const t=hS(e),r=jj(1);return new Hj(t,r.withPermits(1))},Kj=f(2,(e,t)=>Ec(e,t,(r,n)=>[r,n])),qj=f(2,(e,t)=>Ec(e,t,(r,n)=>r)),Wj=f(2,(e,t)=>Ec(e,t,(r,n)=>n)),Ec=f(3,(e,t,r)=>({[Ss]:cc,id:()=>p(e.id(),vm(t.id())),await:p(e.await,es,uh(es(t.await),r,{concurrent:!0}),Et),children:e.children,inheritAll:ge(t.inheritAll,e.inheritAll),poll:sn(e.poll,t.poll,(n,s)=>p(n,rf(i=>p(s,xn(o=>CS(i,o,{onSuccess:r,onFailure:vt})))))),interruptAsFork:n=>ge(e.interruptAsFork(n),t.interruptAsFork(n)),pipe(){return C(this,arguments)}})),Xj="ExtendScope",Yj="Fold",av="Fresh",Jj="FromEffect",Qj="Scoped",Zj="Suspend",eB="Provide",cv="ProvideMerge",tB="ZipWith",rB=Ss,nB=Jf,sB=Kx,iB=qx,oB=LS,aB=Qx,cB=Qf,uB=d2,lB=Wx,fB=lh,hB=ys,dB=Zf,_B=Xx,pB=Yx,gB=kS,mB=Jx,EB=dD,SB=Zx,yB=Ja,vB=eD,uv=li,TB=DS,bB=tD,OB=xS,AB=_2,RB=eh,IB=p2,MB=al,PB=FS,$B=rD,NB=nD,wB=sD,CB=US,LB=iD,kB=oD,xB=uD,DB=lD,FB=jS,UB=g2,jB=fD,BB=BS,GB=hD,VB=Kj,HB=qj,zB=Wj,KB=Ec,qB=Object.freeze(Object.defineProperty({__proto__:null,FiberTypeId:rB,Order:sB,RuntimeFiberTypeId:nB,all:fB,await:cB,awaitAll:uB,children:lB,done:hB,dump:dB,dumpAll:_B,fail:pB,failCause:gB,fromEffect:mB,getCurrentFiber:EB,id:aB,inheritAll:SB,interrupt:yB,interruptAll:bB,interruptAllAs:OB,interruptAs:uv,interruptAsFork:TB,interruptFork:AB,interrupted:vB,isFiber:iB,isRuntimeFiber:oB,join:RB,joinAll:IB,map:MB,mapEffect:PB,mapFiber:$B,match:NB,never:wB,orElse:CB,orElseEither:LB,poll:kB,pretty:xB,roots:DB,scoped:UB,status:jB,succeed:BB,unsafeRoots:FB,void:GB,zip:VB,zipLeft:HB,zipRight:zB,zipWith:KB},Symbol.toStringTag,{value:"Module"})),Ki=e=>(t,r)=>{const n=Tm(),s=[[Tt,[[n,e.context]]]];r!=null&&r.scheduler&&s.push([pi,[[n,r.scheduler]]]);let i=sk(e.fiberRefs,{entries:s,forkAs:n});r!=null&&r.updateRefs&&(i=r.updateRefs(i,n));const o=new _y(n,i,e.runtimeFlags);let a=t;r!=null&&r.scope&&(a=E($y(r.scope,ic),u=>ge(OE(u,aE(l=>x(l,o.id())?me:li(o,l))),nn(t,l=>ph(u,l)))));const c=o._supervisor;return c!==hc&&(c.onStart(e.context,a,T(),o),o.addObserver(u=>c.onEnd(u,o))),ac.add(e.runtimeFlags,o),(r==null?void 0:r.immediate)===!1?o.resume(a):o.start(a),o},bl=e=>(t,r={})=>{const n=Ki(e)(t,r);return r.onExit&&n.addObserver(s=>{r.onExit(s)}),(s,i)=>bl(e)(p(n,uv(s??hn)),{...i,onExit:i!=null&&i.onExit?o=>i.onExit($S(o)):void 0})},lv=e=>t=>{const r=$h(e)(t);if(r._tag==="Failure")throw fv(r.effect_instruction_i0);return r.effect_instruction_i0};class WB extends Error{constructor(r){super(`Fiber #${r.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);d(this,"fiber");d(this,"_tag","AsyncFiberException");this.fiber=r,this.name=this._tag,this.stack=this.message}}const XB=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new WB(e);return Error.stackTraceLimit=t,r},cu=Symbol.for("effect/Runtime/FiberFailure"),no=Symbol.for("effect/Runtime/FiberFailure/Cause");var y6,v6;class YB extends Error{constructor(r){super();d(this,y6);d(this,v6);this[cu]=cu,this[no]=r;const n=Ym(r);if(n.length>0){const s=n[0];this.name=s.message.split(":")[0],this.message=s.message.substring(this.name.length+2),this.stack=Qn(r)}this.name=`(FiberFailure) ${this.name}`}toJSON(){return{_id:"FiberFailure",cause:this[no].toJSON()}}toString(){return"(FiberFailure) "+Qn(this[no])}[(y6=cu,v6=no,ue)](){return this.toString()}}const fv=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new YB(e);return Error.stackTraceLimit=t,r},hv=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return hi(t.left);case"Right":return te(t.right);case"Some":return te(t.value);case"None":return hi(Ui())}},$h=e=>t=>{const r=hv(t);if(r)return r;const n=new Lk,s=Ki(e)(t,{scheduler:n});n.flush();const i=s.unsafePoll();if(i)return i;throw XB(s)},dv=e=>(t,r)=>Nh(e)(t,r).then(n=>{switch(n._tag){case se:return n.effect_instruction_i0;case ne:throw fv(n.effect_instruction_i0)}}),Nh=e=>(t,r)=>new Promise(n=>{const s=hv(t);s&&n(s);const i=Ki(e)(t);i.addObserver(o=>{n(o)}),(r==null?void 0:r.signal)!==void 0&&(r.signal.aborted?i.unsafeInterruptAsFork(i.id()):r.signal.addEventListener("abort",()=>{i.unsafeInterruptAsFork(i.id())}))});class _v{constructor(t,r,n){d(this,"context");d(this,"runtimeFlags");d(this,"fiberRefs");this.context=t,this.runtimeFlags=r,this.fiberRefs=n}pipe(){return C(this,arguments)}}const JB=e=>new _v(e.context,e.runtimeFlags,e.fiberRefs),pv=()=>oe((e,t)=>y(new _v(e.getFiberRef(Tt),t.runtimeFlags,e.getFiberRefs()))),QB=Um(us,Dm,xm),Mr=JB({context:yt(),runtimeFlags:QB,fiberRefs:ik()}),ZB=Ki(Mr),$o=dv(Mr),gv=Nh(Mr),No=lv(Mr),mv=$h(Mr),eG=f(2,(e,t)=>e.modifyEffect(t)),tG="effect/Layer",wh=Symbol.for(tG),rG={_RIn:e=>e,_E:e=>e,_ROut:e=>e},$t={[wh]:rG,pipe(){return C(this,arguments)}},nG="effect/Layer/MemoMap",wo=Symbol.for(nG),Ch=e=>D(e,wh),Ev=e=>e._tag===av;var T6;class Sv{constructor(t){d(this,"ref");d(this,T6);this.ref=t,this[wo]=wo}getOrElseMemoize(t,r){return p(eG(this.ref,n=>{const s=n.get(t);if(s!==void 0){const[i,o]=s,a=p(i,E(([c,u])=>p(TS(c),ke(u))),nn(tc({onFailure:()=>me,onSuccess:()=>fi(r,o)})));return y([a,n])}return p(na(0),E(i=>p(Nf(),E(o=>p(na(()=>me),I(a=>{const c=lr(l=>p(bs(),E(h=>p(l(E(Lh(t,h,!0),_=>Kk(_(this)))),Et,E(_=>{switch(_._tag){case ne:return p(P1(o,_.effect_instruction_i0),ge(Zo(h,_)),ge(Ee(_.effect_instruction_i0)));case se:return p(sa(a,g=>p(Zo(h,g),_E($k(i,m=>[m===1,m-1])),nt)),ge(v_(i,g=>g+1)),ge(fi(r,g=>p(S(()=>n.delete(t)),ge(Hr(a)),E(m=>m(g))))),ge(N1(o,_.effect_instruction_i0)),ke(_.effect_instruction_i0[1]))}}))))),u=[p(rc(o),nn(PE({onFailure:()=>me,onSuccess:()=>v_(i,l=>l+1)}))),l=>p(Hr(a),E(h=>h(l)))];return[c,Ev(t)?n:n.set(t,u)]}))))))}),es)}}T6=wo;const yv=Q(()=>I(zj(new Map),e=>new Sv(e))),sG=()=>new Sv(ov(new Map)),iG=e=>Ts(t=>_n(e,t)),_n=f(2,(e,t)=>E(yv,r=>E(Lh(e,t),n=>n(r)))),vv=f(3,(e,t,r)=>E(Lh(e,r),n=>n(t))),Lh=(e,t,r=!1)=>{const n=e;switch(n._tag){case"Locally":return S(()=>s=>n.f(s.getOrElseMemoize(n.self,t)));case"ExtendScope":return S(()=>s=>Ts(i=>s.getOrElseMemoize(n.layer,i)));case"Fold":return S(()=>s=>p(s.getOrElseMemoize(n.layer,t),Mt({onFailure:i=>s.getOrElseMemoize(n.failureK(i),t),onSuccess:i=>s.getOrElseMemoize(n.successK(i),t)})));case"Fresh":return S(()=>s=>p(n.layer,_n(t)));case"FromEffect":return S(r?()=>s=>n.effect:()=>s=>s.getOrElseMemoize(e,t));case"Provide":return S(()=>s=>p(s.getOrElseMemoize(n.first,t),E(i=>p(s.getOrElseMemoize(n.second,t),Kt(i)))));case"Scoped":return S(r?()=>s=>Os(n.effect,t):()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return S(()=>s=>s.getOrElseMemoize(n.evaluate(),t));case"ProvideMerge":return S(()=>s=>p(s.getOrElseMemoize(n.first,t),sn(s.getOrElseMemoize(n.second,t),n.zipK)));case"ZipWith":return S(()=>s=>p(s.getOrElseMemoize(n.first,t),uh(s.getOrElseMemoize(n.second,t),n.zipK,{concurrent:!0})))}},Ms=f(2,(e,t)=>jh(e,{onFailure:t,onSuccess:pn})),Tv=f(2,(e,t)=>Uh(e,{onFailure:t,onSuccess:pn})),bv=e=>Sc(Ty(e)),oG=e=>xh(()=>Ty(e())),aG=e=>Fh(e,()=>yt()),kh=()=>Ze(wf()),cG=e=>{const t=Object.create($t);return t._tag=Xj,t.layer=e,t},Ov=e=>Sc(vy(e)),Av=e=>xh(()=>vy(e())),Sc=e=>Ze(Ee(e)),xh=e=>Ze(oE(e)),wr=f(2,(e,t)=>jh(e,{onFailure:Ov,onSuccess:t})),uG=f(2,(e,t)=>wr(e,Le(t))),Rv=e=>{const t=Object.create($t);return t._tag=av,t.layer=e,t},yc=f(2,(e,t)=>{const r=Ii(e),n=r?e:t;return Ze(I(r?t:e,i=>Nt(n,i)))}),lG=e=>Ze(I(e,()=>yt()));function Ze(e){const t=Object.create($t);return t._tag=Jj,t.effect=e,t}const fG=f(3,(e,t,r)=>Dh(e,ps(t,r))),Dh=f(2,(e,t)=>{const r=Object.create($t);return r._tag="Locally",r.self=e,r.f=t,r}),hG=f(3,(e,t,r)=>Dh(e,Mf(t,r))),dG=(e,t)=>Ps(Vt(e,t)),_G=(e,t)=>Ps(Hi(e,t)),pG=(e,t,r)=>Ze(I(e,n=>Nt(t,r(n)))),gG=e=>Ey(ge(Ts(t=>p(e,_n(t))),Xs)),Fh=f(2,(e,t)=>wr(e,r=>pn(t(r)))),mG=f(2,(e,t)=>Ms(e,r=>Av(()=>t(r)))),Uh=f(2,(e,{onFailure:t,onSuccess:r})=>{const n=Object.create($t);return n._tag=Yj,n.layer=e,n.failureK=t,n.successK=r,n}),jh=f(2,(e,{onFailure:t,onSuccess:r})=>Uh(e,{onFailure:n=>{const s=y2(n);switch(s._tag){case"Left":return t(s.left);case"Right":return Sc(s.right)}},onSuccess:r})),EG=e=>Ts(t=>I(yS(_n(e,t)),Ze)),Bh=f(2,(e,t)=>$v(e,t,(r,n)=>as(r,n))),SG=(...e)=>{let t=e[0];for(let r=1;r<e.length;r++)t=Bh(t,e[r]);return t},yG=e=>Ms(e,t=>bv(t)),vG=f(2,(e,t)=>Ms(e,t)),TG=e=>Bh(kh(),e),bG=f(4,(e,t,r,n)=>Fh(e,s=>Nt(r,n($a(s,t))))),OG=f(2,(e,t)=>Tc(()=>{const r=Xe("effect/Layer/retry/{ state: unknown }");return p(Mv(r,{state:t.initial}),wr(n=>Iv(e,t,r,p(n,Le(r)).state)))})),Iv=(e,t,r,n)=>p(e,Ms(s=>p(AG(t,r,s,n),wr(i=>Rv(Iv(e,t,r,p(i,Le(r)).state)))))),AG=(e,t,r,n)=>yc(t,p(zf,E(s=>p(e.step(s,r,n),E(([i,o,a])=>ze(a)?ee(r):p(gS(Gt(ts(a.intervals)-s)),ke({state:i}))))))),Gh=f(2,(e,t)=>{const r=Ii(e),n=r?e:t;return vc(I(r?t:e,i=>Nt(n,i)))}),Ps=e=>vc(p(e,ke(yt()))),vc=e=>{const t=Object.create($t);return t._tag=Qj,t.effect=e,t},RG=vc(I(vs(bs(),(e,t)=>e.close(t)),e=>Nt(My,e))),IG=e=>yc(e,e),Mv=f(2,(e,t)=>{const r=Ii(e);return Ze(y(Nt(r?e:t,r?t:e)))}),pn=e=>Ze(y(e)),MG=pn(yt()),Tc=e=>{const t=Object.create($t);return t._tag=Zj,t.evaluate=e,t},PG=f(2,(e,t)=>{const r=Ii(e),n=r?e:t,s=r?t:e;return Ze(S(()=>Nt(n,s())))}),$G=e=>Ze(S(e)),NG=f(2,(e,t)=>wr(e,r=>Ze(ke(t(r),r)))),wG=f(2,(e,t)=>Ms(e,r=>Ze(E(t(r),()=>ee(r))))),CG=f(2,(e,t)=>Tv(e,r=>Ze(E(t(r),()=>Ee(r))))),LG=e=>p(Ts(t=>_n(e,t)),E(t=>p(pv(),Kt(t)))),Pv=f(2,(e,t)=>E(Ts(r=>vv(e,t,r)),r=>p(pv(),Kt(r)))),Vh=f(2,(e,t)=>Tc(()=>{const r=Object.create($t);return r._tag=eB,r.first=Object.create($t,{_tag:{value:cv,enumerable:!0},first:{value:kh(),enumerable:!0},second:{value:t},zipK:{value:(n,s)=>p(n,as(s))}}),r.second=e,r})),kG=f(2,(e,t)=>{const r=Object.create($t);return r._tag=cv,r.first=t,r.second=Vh(e,t),r.zipK=(n,s)=>p(n,as(s)),r}),$v=f(3,(e,t,r)=>Tc(()=>{const n=Object.create($t);return n._tag=tB,n.first=e,n.second=t,n.zipK=r,n})),xG=e=>{const t=Xe("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return wr(yc(t,e),r=>Le(r,t))},Nv=e=>{const t=Xe("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return wr(Gh(t,e),r=>Le(r,t))},DG=f(e=>Ch(e[0]),(e,t,r)=>Nv(I(r!=null&&r.onEnd?dn(la(t,r),n=>dc(s=>r.onEnd(n,s))):la(t,r),n=>wv(e,n)))),wv=f(2,(e,t)=>Vh(e,pn(Nt(ur,t)))),FG=f(2,(e,t)=>Li(bs(),r=>E(_n(t,r),n=>Cf(e,n)),(r,n)=>Zo(r,n))),UG=f(2,(e,t)=>{const r=di(Mr.fiberRefs,t.fiberRefs),n=Tr(Mr.runtimeFlags,t.runtimeFlags);return lr(s=>oe(i=>{const o=i.getFiberRefs(),a=_i(i.id(),o)(r),c=i._runtimeFlags,u=Un(n)(c),l=di(a,o),h=Tr(u,c);return i.setFiberRefs(a),i._runtimeFlags=u,fh(Cf(s(e),t.context),oe(_=>(_.setFiberRefs(_i(_.id(),_.getFiberRefs())(l)),_._runtimeFlags=Un(h)(_._runtimeFlags),me)))}))}),jG=f(2,(e,t)=>Ch(t)?FG(e,t):Yg(t)?Cf(e,t):UG(e,t)),Fe=e=>fr(Ke,t=>e(Le(t,Es))),BG=f(2,(e,t)=>Mf(e,Ke,He(Es,t))),GG=e=>Ps(Hi(Ke,He(Es,e))),VG=(e,...t)=>Fe(r=>r.assert(e,...t)),HG=Fe(e=>e.clear),zG=e=>Fe(t=>t.count(e)),KG=e=>Fe(t=>t.countReset(e)),qG=(...e)=>Fe(t=>t.debug(...e)),WG=(e,t)=>Fe(r=>r.dir(e,t)),XG=(...e)=>Fe(t=>t.dirxml(...e)),YG=(...e)=>Fe(t=>t.error(...e)),JG=e=>Fe(t=>vs(t.group(e),()=>t.groupEnd)),QG=(...e)=>Fe(t=>t.info(...e)),ZG=(...e)=>Fe(t=>t.log(...e)),eV=(e,t)=>Fe(r=>r.table(e,t)),tV=e=>Fe(t=>vs(t.time(e),()=>t.timeEnd(e))),rV=(e,...t)=>Fe(r=>r.timeLog(e,...t)),nV=(...e)=>Fe(t=>t.trace(...e)),sV=(...e)=>Fe(t=>t.warn(...e)),iV=f(e=>zt(e[0]),(e,t)=>Fe(r=>Li(r.group(t),()=>e,()=>r.groupEnd))),oV=f(e=>zt(e[0]),(e,t)=>Fe(r=>Li(r.time(t),()=>e,()=>r.timeEnd(t)))),j_=Symbol.for("effect/MutableList"),aV={[j_]:j_,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();const r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(he)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},cV=e=>({value:e,removed:!1,prev:void 0,next:void 0}),uV=()=>{const e=Object.create(aV);return e.head=void 0,e.tail=void 0,e._length=0,e},lV=e=>Cv(e)===0,Cv=e=>e._length,fV=f(2,(e,t)=>{const r=cV(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),hV=e=>{const t=e.head;if(t!==void 0)return dV(e,t),t.value},dV=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},B_=Symbol.for("effect/MutableQueue"),G_=Symbol.for("effect/mutable/MutableQueue/Empty"),_V={[B_]:B_,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return Pe(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(he)}},[ue](){return this.toJSON()},pipe(){return C(this,arguments)}},pV=e=>{const t=Object.create(_V);return t.queue=uV(),t.capacity=e,t},gV=()=>pV(void 0),mV=f(2,(e,t)=>{const r=Cv(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(fV(t)(e.queue),!0)}),EV=f(2,(e,t)=>lV(e.queue)?t:hV(e.queue)),V_=(e,t,r,n)=>yf({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:n}),H_=(e,t)=>yf({_tag:"Pending",key:e,deferred:t}),SV=(e,t)=>yf({_tag:"Refreshing",deferred:e,complete:t}),Ol=Symbol.for("effect/Cache/MapKey");var b6;class yV{constructor(t){d(this,"current");d(this,b6,Ol);d(this,"previous");d(this,"next");this.current=t}[(b6=Ol,U)](){return p(w(this.current),B(w(this.previous)),B(w(this.next)),ce(this))}[j](t){return this===t?!0:vV(t)&&x(this.current,t.current)&&x(this.previous,t.previous)&&x(this.next,t.next)}}const On=e=>new yV(e),vV=e=>D(e,Ol);class TV{constructor(){d(this,"head");d(this,"tail")}add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{const r=t.previous,n=t.next;n!==void 0&&(t.next=void 0,r!==void 0?(r.next=n,n.previous=r):(this.head=n,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){const t=this.head;if(t!==void 0){const r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}}const bV=()=>new TV,OV=(e,t,r,n,s,i)=>({map:e,keys:t,accesses:r,updating:n,hits:s,misses:i}),AV=()=>OV(oh(),bV(),gV(),Fa(!1),0,0),RV="effect/Cache",IV=Symbol.for(RV),MV={_Key:e=>e,_Error:e=>e,_Value:e=>e},PV=e=>e,so=e=>({loadedMillis:e});var O6;class $V{constructor(t,r,n,s,i){d(this,"capacity");d(this,"context");d(this,"fiberId");d(this,"lookup");d(this,"timeToLive");d(this,O6,MV);d(this,"cacheState");this.capacity=t,this.context=r,this.fiberId=n,this.lookup=s,this.timeToLive=i,this.cacheState=AV()}get(t){return I(this.getEither(t),ef)}get cacheStats(){return S(()=>PV({hits:this.cacheState.hits,misses:this.cacheState.misses,size:ou(this.cacheState.map)}))}getOption(t){return Q(()=>mt(Ve(this.cacheState.map,t),{onNone:()=>{const r=On(t);return this.trackAccess(r),this.trackMiss(),y(T())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return Q(()=>mt(Ve(this.cacheState.map,t),{onNone:()=>{const r=On(t);return this.trackAccess(r),this.trackMiss(),y(T())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return S(()=>tr(this.cacheState.map,t))}entryStats(t){return S(()=>{const r=Ve(this.cacheState.map,t);if(_e(r))switch(r.value._tag){case"Complete":{const n=r.value.entryStats.loadedMillis;return R(so(n))}case"Pending":return T();case"Refreshing":{const n=r.value.complete.entryStats.loadedMillis;return R(so(n))}}return T()})}getEither(t){return Q(()=>{const r=t;let n,s,i=tt(Ve(this.cacheState.map,r));return i===void 0&&(s=m_(this.fiberId),n=On(r),tr(this.cacheState.map,r)?i=tt(Ve(this.cacheState.map,r)):Ut(this.cacheState.map,r,H_(n,s))),i===void 0?(this.trackAccess(n),this.trackMiss(),I(this.lookupValueOf(t,s),re)):E(this.resolveMapValue(i),mt({onNone:()=>this.getEither(t),onSome:o=>y(Te(o))}))})}invalidate(t){return S(()=>{Tn(this.cacheState.map,t)})}invalidateWhen(t,r){return S(()=>{const n=Ve(this.cacheState.map,t);_e(n)&&n.value._tag==="Complete"&&n.value.exit._tag==="Success"&&r(n.value.exit.value)&&Tn(this.cacheState.map,t)})}get invalidateAll(){return S(()=>{this.cacheState.map=oh()})}refresh(t){return eo(r=>Q(()=>{const n=t,s=m_(this.fiberId);let i=tt(Ve(this.cacheState.map,n));if(i===void 0&&(tr(this.cacheState.map,n)?i=tt(Ve(this.cacheState.map,n)):Ut(this.cacheState.map,n,H_(On(n),s))),i===void 0)return nt(this.lookupValueOf(t,s));switch(i._tag){case"Complete":{if(this.hasExpired(r,i.timeToLiveMillis)){const o=tt(Ve(this.cacheState.map,n));return x(o,i)&&Tn(this.cacheState.map,n),nt(this.get(t))}return p(this.lookupValueOf(t,s),ax(()=>{const o=tt(Ve(this.cacheState.map,n));if(x(o,i)){const a=SV(s,i);return Ut(this.cacheState.map,n,a),!0}return!1}),nt)}case"Pending":return Zi(i.deferred);case"Refreshing":return Zi(i.deferred)}}))}set(t,r){return eo(n=>S(()=>{const s=n.unsafeCurrentTimeMillis(),i=t,o=Kf(r),a=V_(On(i),o,so(s),s+St(ae(this.timeToLive(o))));Ut(this.cacheState.map,i,a)}))}get size(){return S(()=>ou(this.cacheState.map))}get values(){return S(()=>{const t=[];for(const r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}get entries(){return S(()=>{const t=[];for(const r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}get keys(){return S(()=>{const t=[];for(const r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return eo(n=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.hasExpired(n,t.timeToLiveMillis)?(Tn(this.cacheState.map,t.key.current),y(T())):(this.trackHit(),I(t.exit,R));case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(T()):I(Zi(t.deferred),R);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(n,t.complete.timeToLiveMillis)?r?y(T()):I(Zi(t.deferred),R):I(t.complete.exit,R)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(mV(this.cacheState.accesses,t),dN(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){const s=EV(this.cacheState.accesses,G_);s===G_?r=!1:this.cacheState.keys.add(s)}let n=ou(this.cacheState.map);for(r=n>this.capacity;r;){const s=this.cacheState.keys.remove();s!==void 0?tr(this.cacheState.map,s.current)&&(Tn(this.cacheState.map,s.current),n=n-1,r=n>this.capacity):r=!1}Mi(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return eo(n=>Q(()=>{const s=t;return p(this.lookup(t),Kt(this.context),Et,E(i=>{const o=n.unsafeCurrentTimeMillis(),a=so(o),c=V_(On(s),i,a,o+St(ae(this.timeToLive(i))));return Ut(this.cacheState.map,s,c),ge(HL(r,i),i)}),lE(()=>ge(zL(r),S(()=>{Tn(this.cacheState.map,s)}))))}))}}O6=IV;const NV=(e,t,r)=>new $V(e,yt(),Em,t,n=>ae(r(n))),z_=K(Symbol.for("effect/FiberRef/currentCache"),()=>De(NV(65536,()=>I(Nf(),e=>({listeners:new CF,handle:e})),()=>kE(60)))),wV=K(Symbol.for("effect/FiberRef/currentCacheEnabled"),()=>De(!1)),Lv=zt,CV=py,LV=Qe,bc=ee,kV=_s,ha=Xk,xV=Xs,Oc=nx,rs=y,DV=Q,pr=S,K_=me,FV=Yo,UV=Hk,jV=zk,Hh=Yk,BV=ix,gn=I,GV=Wa,Ac=vs,VV=Li,HV=dc,zV=Ey,KV=s2,qV=OS,WV=jG,XV=bS,YV=sx,JV=Zn,$s=E,QV=dn,ZV=Lj,e3=Wk,t3=cr,r3=Jk,n3=Qk,s3=SS,i3=Zk,o3=ex,q_=hE,a3=fE,c3=rx,u3=$o,l3=gv,f3=No,h3=mv,d3=c2,_3=cx,p3=fx,kv=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=t;function n(){}Object.setPrototypeOf(n,sf),n.key=e,Object.defineProperty(n,"stack",{get(){return r.stack}});const s=new Map;return new Proxy(n,{get(o,a,c){if(a==="use")return h=>Fs(n,h);if(a in n)return n[a];if(s.has(a))return s.get(a);const u=(...h)=>Fs(n,_=>typeof _[a]=="function"?(s.set(a,(...g)=>Fs(n,m=>m[a](...g))),_[a](...h)):(s.set(a,Fs(n,g=>g[a])),_[a])),l=Fs(n,h=>h[a]);return Object.assign(u,l),Object.setPrototypeOf(u,Object.getPrototypeOf(l)),s.set(a,u),u}})},g3=e=>Ps(a2(e)),m3=e=>pn(Nt(ur,e)),E3=(e,t)=>Gh(ur,t!=null&&t.onEnd?dn(la(e,t),r=>dc(n=>t.onEnd(r,n))):la(e,t)),S3=e=>Ps(E2(e)),y3=wh,v3=wo,T3=Ch,b3=Ev,O3=iG,A3=_n,R3=Ms,I3=Tv,M3=kh,P3=bv,$3=oG,N3=aG,Ns=yc,Al=lG,w3=Ze,Rl=MG,C3=cG,L3=Ov,k3=Av,x3=Sc,D3=xh,F3=wr,U3=uG,j3=Rv,B3=pG,G3=gG,V3=Fh,H3=mG,z3=jh,K3=Uh,q3=EG,zh=Bh,W3=SG,X3=yG,Y3=vG,J3=TG,Q3=bG,Z3=Dh,eH=fG,tH=hG,rH=dG,nH=_G,sH=OG,iH=RG,Kh=Gh,qt=Ps,oH=vc,aH=IG,qh=Mv,cH=pn,uH=Tc,xv=PG,lH=$G,fH=NG,hH=wG,dH=CG,_H=LG,pH=Pv,mn=Vh,Wh=kG,gH=$v,qi=xG,mH=Nv,EH=e=>qt(Hi(Ke,He($r,e))),SH=g3,yH=m3,vH=e=>qt(Vt(vE,e)),TH=e=>qt(Vt(wV,e)),bH=e=>qt(zt(e)?E(e,t=>Vt(z_,t)):Vt(z_,e)),OH=e=>qt(Vt(pi,e)),AH=E3,Xh=S3,RH=e=>qt(Vt(bE,e)),IH=e=>qt(Vt(Qa,e)),MH=e=>qt(Vt(TE,e)),PH=DG,$H=wv,NH=yv,wH=vv,CH=Object.freeze(Object.defineProperty({__proto__:null,LayerTypeId:y3,MemoMapTypeId:v3,build:O3,buildWithMemoMap:wH,buildWithScope:A3,catchAll:R3,catchAllCause:I3,context:M3,die:P3,dieSync:$3,discard:N3,effect:Ns,effectContext:w3,effectDiscard:Al,empty:Rl,extendScope:C3,fail:L3,failCause:x3,failCauseSync:D3,failSync:k3,fiberRefLocallyScopedWith:nH,flatMap:F3,flatten:U3,fresh:j3,function:B3,isFresh:b3,isLayer:T3,launch:G3,locally:eH,locallyEffect:Z3,locallyScoped:rH,locallyWith:tH,makeMemoMap:NH,map:V3,mapError:H3,match:z3,matchCause:K3,memoize:q3,merge:zh,mergeAll:W3,orDie:X3,orElse:Y3,parentSpan:yH,passthrough:J3,project:Q3,provide:mn,provideMerge:Wh,retry:sH,scope:iH,scoped:Kh,scopedContext:oH,scopedDiscard:qt,service:aH,setClock:EH,setConfigProvider:SH,setRequestBatching:vH,setRequestCache:bH,setRequestCaching:TH,setScheduler:OH,setTracer:Xh,setTracerEnabled:RH,setTracerTiming:IH,setUnhandledErrorLogLevel:MH,span:AH,succeed:qh,succeedContext:cH,suspend:uH,sync:xv,syncContext:lH,tap:fH,tapError:hH,tapErrorCause:dH,toRuntime:_H,toRuntimeWithMemoMap:pH,unwrapEffect:qi,unwrapScoped:mH,withParentSpan:$H,withSpan:PH,zipWith:gH},Symbol.toStringTag,{value:"Module"})),LH=MF,kH=rh,xH=qS,DH=WS,FH=nh,UH=ry,jH=ny,BH=sy,GH=iy,VH=oy,HH=gh,zH=wy,KH=q,qH=mh,WH=Cy,XH=MU,YH=Ly,JH=PU,QH=Eh,ZH=$U,ez=zi,tz=As,rz=NU,nz=Rs,sz=wU,iz=CU,oz=LU,az=kU,cz=xU,uz=ky,lz=DU,fz=Sh,hz=xj,dz=FU,_z=UU,pz=jU,gz=BU,mz=yh,Ez=_c,Sz=GU,yz=VU,vz=HU,Tz=xy,bz=Dy,Oz=zU,Az=KU,Rz=Ph,Iz=qU,Mz=WU,Pz=XU,$z=YU,Nz=_r,wz=JU,Cz=QU,Lz=ZU,kz=ej,xz=Nr,Dz=Is,Fz=Fy,Uz=tj,jz=Uy,Bz=rj,Gz=Ye,Vz=vh,Hz=nj,zz=sj,Kz=pc,qz=ij,Wz=Dj,Xz=jy,Yz=oj,Jz=aj,Qz=By,Zz=Gy,eK=cj,tK=Vy,rK=Hy,nK=zy,sK=gc,iK=Th,oK=Ky,aK=_r,cK=uj,uK=lj,lK=qy,fK=fj,hK=hj,dK=dj,_K=Fj,pK=_j,gK=pj,mK=gj,EK=mj,SK=mc,yK=Xy,vK=bh,TK=Yy,bK=Oh,OK=Jy,AK=Ej,RK=Sj,IK=Qy,MK=Ah,PK=Rh,$K=yj,NK=vj,wK=Zy,CK=Tj,LK=bj,kK=Object.freeze(Object.defineProperty({__proto__:null,ScheduleDriverTypeId:zH,ScheduleTypeId:HH,addDelay:qH,addDelayEffect:WH,andThen:XH,andThenEither:YH,as:JH,asVoid:QH,bothInOut:ZH,check:ez,checkEffect:tz,collectAllInputs:rz,collectAllOutputs:nz,collectUntil:sz,collectUntilEffect:iz,collectWhile:oz,collectWhileEffect:az,compose:cz,count:hz,cron:dz,dayOfMonth:_z,dayOfWeek:pz,delayed:gz,delayedEffect:mz,delayedSchedule:Ez,delays:Sz,driver:Tz,duration:bz,either:Oz,eitherWith:Az,elapsed:Rz,ensuring:Iz,exponential:Mz,fibonacci:Pz,fixed:$z,forever:Nz,fromDelay:wz,fromDelays:Cz,fromFunction:Lz,hourOfDay:kz,identity:xz,intersect:Dz,intersectWith:Fz,jittered:Uz,jitteredWith:jz,linear:Bz,makeWithState:KH,map:Gz,mapBoth:yz,mapBothEffect:vz,mapEffect:Vz,mapInput:uz,mapInputContext:lz,mapInputEffect:fz,minuteOfHour:Hz,modifyDelay:zz,modifyDelayEffect:Kz,onDecision:qz,once:Wz,passthrough:Xz,provideContext:Yz,provideService:Jz,recurUntil:Qz,recurUntilEffect:Zz,recurUntilOption:eK,recurUpTo:tK,recurWhile:rK,recurWhileEffect:nK,recurs:sK,reduce:iK,reduceEffect:oK,repeatForever:aK,repetitions:cK,resetAfter:uK,resetWhen:lK,run:fK,secondOfMinute:hK,spaced:dK,stop:_K,succeed:pK,sync:gK,tapInput:mK,tapOutput:EK,unfold:SK,union:yK,unionWith:vK,untilInput:TK,untilInputEffect:bK,untilOutput:OK,untilOutputEffect:AK,upTo:RK,whileInput:IK,whileInputEffect:MK,whileOutput:PK,whileOutputEffect:$K,windowed:NK,zipLeft:wK,zipRight:CK,zipWith:LK},Symbol.toStringTag,{value:"Module"})),Dv=cL,xK="effect/Config",DK=Symbol.for(xK),FK={_A:e=>e},ws={...bg,[DK]:FK,commit(){return BL(this)}},Fv=f(2,(e,t)=>UK(e,r=>re(t(r)))),UK=f(2,(e,t)=>{const r=Object.create(ws);return r._tag=HE,r.original=e,r.mapOrFail=t,r}),jK=f(2,(e,t)=>{const r=Object.create(ws);return r._tag=zE,r.name=t,r.config=e,r}),Uv=f(2,(e,t)=>{const r=Object.create(ws);return r._tag=GE,r.first=e,r.second=HK(t.orElse),r.condition=t.if,r}),BK=e=>p(e,Fv(R),Uv({orElse:()=>jv(T()),if:Dv})),GK=(e,t)=>{const r=Object.create(ws);return r._tag=KE,r.description=e,r.parse=t,r},VK=e=>{const t=GK("a text property",re);return e===void 0?t:jK(t,e)},jv=e=>{const t=Object.create(ws);return t._tag=BE,t.value=e,t.parse=()=>re(e),t},HK=e=>{const t=Object.create(ws);return t._tag=VE,t.config=e,t},zK=f(2,(e,t)=>Uv(e,{orElse:()=>jv(t),if:Dv})),KK=Fv,qK=BK,W_=VK,WK=zK,XK=Yu,YK=Es,JK=BG,QK=GG,ZK=Fe,eq=VG,tq=HG,rq=zG,nq=KG,sq=qG,iq=WG,oq=XG,aq=YG,cq=JG,uq=QG,lq=ZG,fq=eV,hq=tV,dq=rV,_q=nV,pq=sV,gq=iV,mq=oV,Eq=Object.freeze(Object.defineProperty({__proto__:null,Console:YK,TypeId:XK,assert:eq,clear:tq,consoleWith:ZK,count:rq,countReset:nq,debug:sq,dir:iq,dirxml:oq,error:aq,group:cq,info:uq,log:lq,setConsole:QK,table:fq,time:hq,timeLog:dq,trace:_q,warn:pq,withConsole:JK,withGroup:gq,withTime:mq},Symbol.toStringTag,{value:"Module"})),Sq=Tt;function An(e,t){return E(e.runtimeEffect,r=>oe(n=>(n.setFiberRefs(r.fiberRefs),n._runtimeFlags=r.runtimeFlags,Kt(t,r.context))))}const yq=(e,t)=>{t=t??sG();const r=No(bs()),n={memoMap:t,scope:r,runtimeEffect:No(yS(dn(Py(Pv(e,t),r),s=>{n.cachedRuntime=s}))),cachedRuntime:void 0,pipe(){return C(this,arguments)},runtime(){return n.cachedRuntime===void 0?$o(n.runtimeEffect):Promise.resolve(n.cachedRuntime)},dispose(){return $o(n.disposeEffect)},disposeEffect:Q(()=>(n.runtime=_s("ManagedRuntime disposed"),n.cachedRuntime=void 0,ph(n.scope,at))),runFork(s,i){return n.cachedRuntime===void 0?ZB(An(n,s),i):Ki(n.cachedRuntime)(s,i)},runSyncExit(s){return n.cachedRuntime===void 0?mv(An(n,s)):$h(n.cachedRuntime)(s)},runSync(s){return n.cachedRuntime===void 0?No(An(n,s)):lv(n.cachedRuntime)(s)},runPromiseExit(s,i){return n.cachedRuntime===void 0?gv(An(n,s),i):Nh(n.cachedRuntime)(s,i)},runCallback(s,i){return n.cachedRuntime===void 0?bl(Mr)(An(n,s),i):bl(n.cachedRuntime)(s,i)},runPromise(s,i){return n.cachedRuntime===void 0?$o(An(n,s),i):dv(n.cachedRuntime)(s,i)}};return n},vq=yq,Tq=Object.freeze(Object.defineProperty({__proto__:null,make:vq},Symbol.toStringTag,{value:"Module"})),Cr=Xe("@effect/opentelemetry/Resource"),Yh=e=>{const t={...e.attributes??void 0,[zl]:e.serviceName,[Ou]:"@effect/opentelemetry",[Au]:typeof globalThis.document>"u"?HI:zI};return e.serviceVersion&&(t[kI]=e.serviceVersion),qh(Cr,new ti(t))},Bv=e=>Ns(Cr,ha(function*(t){const r=yield*t(W_("OTEL_SERVICE_NAME"),qK,q_),n=yield*t(W_("OTEL_RESOURCE_ATTRIBUTES"),WK(""),KK(s=>{const i=s.split(",");return Pa(i,{},(o,a)=>{const c=a.split("=");return c.length!==2||(o[c[0].trim()]=c[1].trim()),o})}),q_);return r._tag==="Some"&&(n[zl]=r.value),e&&Object.assign(n,e),new ti(n)})),Gv=qh(Cr,ti.empty()),bq=Object.freeze(Object.defineProperty({__proto__:null,Resource:Cr,layer:Yh,layerEmpty:Gv,layerFromEnv:Bv},Symbol.toStringTag,{value:"Module"})),Oq="@effect/opentelemetry/Metrics";class Aq{constructor(t){d(this,"resource");d(this,"startTimes",new Map);this.resource=t}startTimeFor(t,r){return this.startTimes.has(t)?this.startTimes.get(t):(this.startTimes.set(t,r),r)}collect(t){const r=LH(),n=Iq(),s=[],i=new Map,o=a=>{s.push(a),i.set(a.descriptor.name,a)};for(let a=0,c=r.length;a<c;a++){const{metricKey:u,metricState:l}=r[a],h=Pa(u.tags,{},(m,b)=>(m[b.key]=b.value,m)),_=uu(u,h),g=this.startTimeFor(_.name,n);if(UH(l)){const m={startTime:g,endTime:n,attributes:h,value:Number(l.count)};i.has(_.name)?i.get(_.name).dataPoints.push(m):o({dataPointType:Jt.SUM,descriptor:_,isMonotonic:_.type===Dt.COUNTER,aggregationTemporality:Yt.CUMULATIVE,dataPoints:[m]})}else if(BH(l)){const m={startTime:g,endTime:n,attributes:h,value:Number(l.value)};i.has(_.name)?i.get(_.name).dataPoints.push(m):o({dataPointType:Jt.GAUGE,descriptor:_,aggregationTemporality:Yt.CUMULATIVE,dataPoints:[m]})}else if(GH(l)){const m=l.buckets.length,b={boundaries:ni(m-1),counts:ni(m)};let A=0,L=0;for(const[X,V]of l.buckets)A<m-1&&(b.boundaries[A]=X),b.counts[A]=V-L,L=V,A++;const P={startTime:g,endTime:n,attributes:h,value:{buckets:b,count:l.count,min:l.min,max:l.max,sum:l.sum}};i.has(_.name)?i.get(_.name).dataPoints.push(P):o({dataPointType:Jt.HISTOGRAM,descriptor:_,aggregationTemporality:Yt.CUMULATIVE,dataPoints:[P]})}else if(jH(l)){const m=[];for(const[b,A]of l.occurrences)m.push({startTime:g,endTime:n,attributes:{...h,key:b},value:A});i.has(_.name)?i.get(_.name).dataPoints.push(...m):o({dataPointType:Jt.SUM,descriptor:uu(u,h),aggregationTemporality:Yt.CUMULATIVE,isMonotonic:!0,dataPoints:m})}else if(VH(l)){const m=[{startTime:g,endTime:n,attributes:{...h,quantile:"min"},value:l.min}];for(const[L,P]of l.quantiles)m.push({startTime:g,endTime:n,attributes:{...h,quantile:L.toString()},value:P._tag==="Some"?P.value:0});m.push({startTime:g,endTime:n,attributes:{...h,quantile:"max"},value:l.max});const b={startTime:g,endTime:n,attributes:h,value:l.count},A={startTime:g,endTime:n,attributes:h,value:l.sum};i.has(`${_.name}_quantiles`)?(i.get(`${_.name}_quantiles`).dataPoints.push(...m),i.get(`${_.name}_count`).dataPoints.push(b),i.get(`${_.name}_sum`).dataPoints.push(A)):(o({dataPointType:Jt.SUM,descriptor:uu(u,h,"quantiles"),aggregationTemporality:Yt.CUMULATIVE,isMonotonic:!1,dataPoints:m}),o({dataPointType:Jt.SUM,descriptor:{...Il(u,"count"),unit:"1",type:Dt.COUNTER,valueType:Xr.INT},aggregationTemporality:Yt.CUMULATIVE,isMonotonic:!0,dataPoints:[b]}),o({dataPointType:Jt.SUM,descriptor:{...Il(u,"sum"),unit:"1",type:Dt.COUNTER,valueType:Xr.DOUBLE},aggregationTemporality:Yt.CUMULATIVE,isMonotonic:!0,dataPoints:[A]}))}}return Promise.resolve({resourceMetrics:{resource:this.resource,scopeMetrics:[{scope:{name:Oq},metrics:s}]},errors:[]})}}const Il=(e,t)=>({name:t?`${e.name}_${t}`:e.name,description:rt(e.description,()=>"")}),uu=(e,t,r)=>({...Il(e,r),unit:t.unit??t.time_unit??"1",type:Rq(e),valueType:"bigint"in e.keyType&&e.keyType.bigint===!0?Xr.INT:Xr.DOUBLE}),Rq=e=>FH(e.keyType)?Dt.HISTOGRAM:DH(e.keyType)?Dt.OBSERVABLE_GAUGE:xH(e.keyType)||kH(e.keyType)&&e.keyType.incremental?Dt.COUNTER:Dt.UP_DOWN_COUNTER,Iq=()=>{const e=Date.now();return[Math.floor(e/1e3),e%1e3*1e6]},Vv=gn(Cr,e=>new Aq(e)),Hv=(e,t)=>Ac(pr(()=>{const r=t(),n=Array.isArray(r)?r:[r];return n.forEach(s=>s.setMetricProducer(e)),n}),r=>Hh(Oc(()=>Promise.all(r.map(n=>n.shutdown()))))),Mq=e=>qt($s(Vv,t=>Hv(t,e))),Pq=Vv,$q=Hv,Jh=Mq,Nq=Object.freeze(Object.defineProperty({__proto__:null,layer:Jh,makeProducer:Pq,registerProducer:$q},Symbol.toStringTag,{value:"Module"}));var zv={},Rc={},Kv={},Ic={};const qv=ns(_O),wq=new Proxy({},{get(e,t){throw new Error(`Module "async_hooks" has been externalized for browser compatibility. Cannot access "async_hooks.${t}" in client code.  See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Cq=Object.freeze(Object.defineProperty({__proto__:null,default:wq},Symbol.toStringTag,{value:"Module"})),Wv=ns(Cq);var Wi={};const Lq=new Proxy({},{get(e,t){throw new Error(`Module "events" has been externalized for browser compatibility. Cannot access "events.${t}" in client code.  See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),kq=Object.freeze(Object.defineProperty({__proto__:null,default:Lq},Symbol.toStringTag,{value:"Module"})),xq=ns(kq);Object.defineProperty(Wi,"__esModule",{value:!0});Wi.AbstractAsyncHooksContextManager=void 0;const Dq=xq,Fq=["addListener","on","once","prependListener","prependOnceListener"];class Uq{constructor(){this._kOtListeners=Symbol("OtListeners"),this._wrapped=!1}bind(t,r){return r instanceof Dq.EventEmitter?this._bindEventEmitter(t,r):typeof r=="function"?this._bindFunction(t,r):r}_bindFunction(t,r){const n=this,s=function(...i){return n.with(t,()=>r.apply(this,i))};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),s}_bindEventEmitter(t,r){return this._getPatchMap(r)!==void 0||(this._createPatchMap(r),Fq.forEach(s=>{r[s]!==void 0&&(r[s]=this._patchAddListener(r,r[s],t))}),typeof r.removeListener=="function"&&(r.removeListener=this._patchRemoveListener(r,r.removeListener)),typeof r.off=="function"&&(r.off=this._patchRemoveListener(r,r.off)),typeof r.removeAllListeners=="function"&&(r.removeAllListeners=this._patchRemoveAllListeners(r,r.removeAllListeners))),r}_patchRemoveListener(t,r){const n=this;return function(s,i){var o;const a=(o=n._getPatchMap(t))===null||o===void 0?void 0:o[s];if(a===void 0)return r.call(this,s,i);const c=a.get(i);return r.call(this,s,c||i)}}_patchRemoveAllListeners(t,r){const n=this;return function(s){const i=n._getPatchMap(t);return i!==void 0&&(arguments.length===0?n._createPatchMap(t):i[s]!==void 0&&delete i[s]),r.apply(this,arguments)}}_patchAddListener(t,r,n){const s=this;return function(i,o){if(s._wrapped)return r.call(this,i,o);let a=s._getPatchMap(t);a===void 0&&(a=s._createPatchMap(t));let c=a[i];c===void 0&&(c=new WeakMap,a[i]=c);const u=s.bind(n,o);c.set(o,u),s._wrapped=!0;try{return r.call(this,i,u)}finally{s._wrapped=!1}}}_createPatchMap(t){const r=Object.create(null);return t[this._kOtListeners]=r,r}_getPatchMap(t){return t[this._kOtListeners]}}Wi.AbstractAsyncHooksContextManager=Uq;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.AsyncHooksContextManager=void 0;const jq=qv,Bq=Wv,Gq=Wi;class Vq extends Gq.AbstractAsyncHooksContextManager{constructor(){super(),this._contexts=new Map,this._stack=[],this._asyncHook=Bq.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)})}active(){var t;return(t=this._stack[this._stack.length-1])!==null&&t!==void 0?t:jq.ROOT_CONTEXT}with(t,r,n,...s){this._enterContext(t);try{return r.call(n,...s)}finally{this._exitContext()}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(t,r){if(r==="TIMERWRAP")return;const n=this._stack[this._stack.length-1];n!==void 0&&this._contexts.set(t,n)}_destroy(t){this._contexts.delete(t)}_before(t){const r=this._contexts.get(t);r!==void 0&&this._enterContext(r)}_after(){this._exitContext()}_enterContext(t){this._stack.push(t)}_exitContext(){this._stack.pop()}}Ic.AsyncHooksContextManager=Vq;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.AsyncLocalStorageContextManager=void 0;const Hq=qv,zq=Wv,Kq=Wi;class qq extends Kq.AbstractAsyncHooksContextManager{constructor(){super(),this._asyncLocalStorage=new zq.AsyncLocalStorage}active(){var t;return(t=this._asyncLocalStorage.getStore())!==null&&t!==void 0?t:Hq.ROOT_CONTEXT}with(t,r,n,...s){const i=n==null?r:r.bind(n);return this._asyncLocalStorage.run(t,i,...s)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}}Mc.AsyncLocalStorageContextManager=qq;(function(e){var t=yr&&yr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=yr&&yr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ic,e),r(Mc,e)})(Kv);var da=bi("OpenTelemetry Context Key B3 Debug Flag"),Js="b3",_a="x-b3-traceid",pa="x-b3-spanid",ga="x-b3-sampled",Xv="x-b3-parentspanid",ma="x-b3-flags",Wq=new Set([!0,"true","True","1",1]),Xq=new Set([!1,"false","False","0",0]);function Yq(e){return e===ie.SAMPLED||e===ie.NONE}function Jq(e){return Array.isArray(e)?e[0]:e}function Pc(e,t,r){var n=t.get(e,r);return Jq(n)}function Qq(e,t){var r=Pc(e,t,_a);return typeof r=="string"?r.padStart(32,"0"):""}function Zq(e,t){var r=Pc(e,t,pa);return typeof r=="string"?r:""}function Yv(e,t){var r=Pc(e,t,ma);return r==="1"?"1":void 0}function eW(e,t){var r=Pc(e,t,ga),n=Yv(e,t);if(n==="1"||Wq.has(r))return ie.SAMPLED;if(r===void 0||Xq.has(r))return ie.NONE}var tW=function(){function e(){}return e.prototype.inject=function(t,r,n){var s=pe.getSpanContext(t);if(!(!s||!ln(s)||fn(t))){var i=t.getValue(da);n.set(r,_a,s.traceId),n.set(r,pa,s.spanId),i==="1"?n.set(r,ma,i):s.traceFlags!==void 0&&n.set(r,ga,(ie.SAMPLED&s.traceFlags)===ie.SAMPLED?"1":"0")}},e.prototype.extract=function(t,r,n){var s=Qq(r,n),i=Zq(r,n),o=eW(r,n),a=Yv(r,n);return Oi(s)&&va(i)&&Yq(o)?(t=t.setValue(da,a),pe.setSpanContext(t,{traceId:s,spanId:i,isRemote:!0,traceFlags:o})):t},e.prototype.fields=function(){return[_a,pa,ma,ga,Xv]},e}(),rW=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},nW=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,sW="0".repeat(16),iW=new Set(["d","1"]),oW="d";function aW(e){return e.length===32?e:""+sW+e}function cW(e){return e&&iW.has(e)?ie.SAMPLED:ie.NONE}var uW=function(){function e(){}return e.prototype.inject=function(t,r,n){var s=pe.getSpanContext(t);if(!(!s||!ln(s)||fn(t))){var i=t.getValue(da)||s.traceFlags&1,o=s.traceId+"-"+s.spanId+"-"+i;n.set(r,Js,o)}},e.prototype.extract=function(t,r,n){var s=n.get(r,Js),i=Array.isArray(s)?s[0]:s;if(typeof i!="string")return t;var o=i.match(nW);if(!o)return t;var a=rW(o,4),c=a[1],u=a[2],l=a[3],h=aW(c);if(!Oi(h)||!va(u))return t;var _=cW(l);return l===oW&&(t=t.setValue(da,l)),pe.setSpanContext(t,{traceId:h,spanId:u,isRemote:!0,traceFlags:_})},e.prototype.fields=function(){return[Js]},e}(),Ea;(function(e){e[e.SINGLE_HEADER=0]="SINGLE_HEADER",e[e.MULTI_HEADER=1]="MULTI_HEADER"})(Ea||(Ea={}));var lW=function(){function e(t){t===void 0&&(t={}),this._b3MultiPropagator=new tW,this._b3SinglePropagator=new uW,t.injectEncoding===Ea.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}return e.prototype.inject=function(t,r,n){fn(t)||this._inject(t,r,n)},e.prototype.extract=function(t,r,n){var s=n.get(r,Js),i=Array.isArray(s)?s[0]:s;return i?this._b3SinglePropagator.extract(t,r,n):this._b3MultiPropagator.extract(t,r,n)},e.prototype.fields=function(){return this._fields},e}();const fW=Object.freeze(Object.defineProperty({__proto__:null,get B3InjectEncoding(){return Ea},B3Propagator:lW,B3_CONTEXT_HEADER:Js,X_B3_FLAGS:ma,X_B3_PARENT_SPAN_ID:Xv,X_B3_SAMPLED:ga,X_B3_SPAN_ID:pa,X_B3_TRACE_ID:_a},Symbol.toStringTag,{value:"Module"})),hW=ns(fW);var dW="exception",_W=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pW=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Jv=function(){function e(t,r,n,s,i,o,a,c,u,l){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ur.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=s,this.parentSpanId=o,this.kind=i,this.links=a;var h=Date.now();this._performanceStartTime=Ln.now(),this._performanceOffset=h-(this._performanceStartTime+ng()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??h),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,l!=null&&this.setAttributes(l),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(Y.warn("Invalid attribute key: "+t),this):zp(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(r),this):(Y.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var r,n;try{for(var s=_W(Object.entries(t)),i=s.next();!i.done;i=s.next()){var o=pW(i.value,2),a=o[0],c=o[1];this.setAttribute(a,c)}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},e.prototype.addEvent=function(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return Y.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&Y.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Md(r)&&(Md(n)||(n=r),r=void 0);var s=_o(r);return this.events.push({name:t,attributes:s,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){Y.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=JI(this.startTime,this.endTime),this._duration[0]<0&&(Y.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Y.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<Ln.now())return YI(t+this._performanceOffset);if(typeof t=="number")return $n(t);if(t instanceof Date)return $n(t.getTime());if(sg(t))return t;if(this._startTimeProvided)return $n(Date.now());var r=Ln.now()-this._performanceStartTime;return ig(this.startTime,$n(r))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,r){var n={};typeof t=="string"?n[Lr.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Lr.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Lr.EXCEPTION_TYPE]=t.name),t.message&&(n[Lr.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Lr.EXCEPTION_STACKTRACE]=t.stack)),n[Lr.EXCEPTION_TYPE]||n[Lr.EXCEPTION_MESSAGE]?this.addEvent(dW,n,r):Y.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Y.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,r){return t.length<=r?t:t.substr(0,r)},e.prototype._truncateToSize=function(t){var r=this,n=this._attributeValueLengthLimit;return n<=0?(Y.warn("Attribute value limit must be positive, got "+n),t):typeof t=="string"?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map(function(s){return typeof s=="string"?r._truncateToLimitUtil(s,n):s}):t},e}(),un;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(un||(un={}));var mi=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:un.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),Kr=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:un.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Co=function(){function e(t){var r,n,s,i;this._root=t.root,this._root||(jr(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Kr),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Kr,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new mi,this._localParentSampled=(s=t.localParentSampled)!==null&&s!==void 0?s:new Kr,this._localParentNotSampled=(i=t.localParentNotSampled)!==null&&i!==void 0?i:new mi}return e.prototype.shouldSample=function(t,r,n,s,i,o){var a=pe.getSpanContext(t);return!a||!ln(a)?this._root.shouldSample(t,r,n,s,i,o):a.isRemote?a.traceFlags&ie.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,s,i,o):this._remoteParentNotSampled.shouldSample(t,r,n,s,i,o):a.traceFlags&ie.SAMPLED?this._localParentSampled.shouldSample(t,r,n,s,i,o):this._localParentNotSampled.shouldSample(t,r,n,s,i,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Ml=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,r){return{decision:Oi(r)&&this._accumulate(r)<this._upperBound?un.RECORD_AND_SAMPLED:un.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var r=0,n=0;n<t.length/8;n++){var s=n*8,i=parseInt(t.slice(s,s+8),16);r=(r^i)>>>0}return r},e}(),gW=ot(),mW=kt.AlwaysOn,Rn=1;function Qv(){return{sampler:Zv(gW),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:ot().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:ot().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:ot().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:ot().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:ot().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:ot().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:ot().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:ot().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Zv(e){switch(e===void 0&&(e=ot()),e.OTEL_TRACES_SAMPLER){case kt.AlwaysOn:return new Kr;case kt.AlwaysOff:return new mi;case kt.ParentBasedAlwaysOn:return new Co({root:new Kr});case kt.ParentBasedAlwaysOff:return new Co({root:new mi});case kt.TraceIdRatio:return new Ml(X_(e));case kt.ParentBasedTraceIdRatio:return new Co({root:new Ml(X_(e))});default:return Y.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+mW+'".'),new Kr}}function X_(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Y.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Rn+"."),Rn;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Y.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Rn+"."),Rn):t<0||t>1?(Y.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Rn+"."),Rn):t}function EW(e){var t={sampler:Zv()},r=Qv(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}function SW(e){var t,r,n,s,i,o,a,c,u,l,h,_,g=Object.assign({},e.spanLimits),m=zO();return g.attributeCountLimit=(o=(i=(s=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&s!==void 0?s:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:go,g.attributeValueLengthLimit=(_=(h=(l=(c=(a=e.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=e.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&h!==void 0?h:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&_!==void 0?_:po,Object.assign({},e,{spanLimits:g})}var yW=function(){function e(t,r){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=ot();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new hg(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Y.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&ie.SAMPLED&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Y.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Y.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(r,n){for(var s=[],i=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),o=0,a=i;o<a;o++)s.push(t._flushOneBatch());Promise.all(s).then(function(){r()}).catch(n)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var s=setTimeout(function(){n(new Error("Timeout"))},t._exportTimeoutMillis);ut.with(Vp(ut.active()),function(){var i;t._finishedSpans.length<=t._maxExportBatchSize?(i=t._finishedSpans,t._finishedSpans=[]):i=t._finishedSpans.splice(0,t._maxExportBatchSize);for(var o=function(){return t._exporter.export(i,function(h){var _;clearTimeout(s),h.code===Yr.SUCCESS?r():n((_=h.error)!==null&&_!==void 0?_:new Error("BatchSpanProcessor: span export failed"))})},a=null,c=0,u=i.length;c<u;c++){var l=i[c];l.resource.asyncAttributesPending&&l.resource.waitForAsyncAttributes&&(a??(a=[]),a.push(l.resource.waitForAsyncAttributes()))}a===null?o():Promise.all(a).then(o,function(h){jr(h),n(h)})})})},e.prototype._maybeStartTimer=function(){var t=this;if(!this._isExporting){var r=function(){t._isExporting=!0,t._flushOneBatch().finally(function(){t._isExporting=!1,t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(n){t._isExporting=!1,jr(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return r();this._timer===void 0&&(this._timer=setTimeout(function(){return r()},this._scheduledDelayMillis),this._timer,void 0)}},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),vW=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qh=function(e){vW(t,e);function t(r,n){var s=e.call(this,r,n)||this;return s.onInit(n),s}return t.prototype.onInit=function(r){var n=this;(r==null?void 0:r.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(yW),TW=8,bW=16,eT=function(){function e(){this.generateTraceId=Y_(bW),this.generateSpanId=Y_(TW)}return e}(),io=Array(32);function Y_(e){return function(){for(var r=0;r<e*2;r++)io[r]=Math.floor(Math.random()*16)+48,io[r]>=58&&(io[r]+=39);return String.fromCharCode.apply(null,io.slice(0,e*2))}}var tT=function(){function e(t,r,n){this._tracerProvider=n;var s=EW(r);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=r.idGenerator||new eT,this.resource=n.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,r,n){var s,i,o;r===void 0&&(r={}),n===void 0&&(n=ut.active()),r.root&&(n=pe.deleteSpan(n));var a=pe.getSpan(n);if(fn(n)){Y.debug("Instrumentation suppressed, returning Noop Span");var c=pe.wrapSpanContext(Ul);return c}var u=a==null?void 0:a.spanContext(),l=this._idGenerator.generateSpanId(),h,_,g;!u||!pe.isSpanContextValid(u)?h=this._idGenerator.generateTraceId():(h=u.traceId,_=u.traceState,g=u.spanId);var m=(s=r.kind)!==null&&s!==void 0?s:Zt.INTERNAL,b=((i=r.links)!==null&&i!==void 0?i:[]).map(function(Ue){return{context:Ue.context,attributes:_o(Ue.attributes)}}),A=_o(r.attributes),L=this._sampler.shouldSample(n,h,t,m,A,b);_=(o=L.traceState)!==null&&o!==void 0?o:_;var P=L.decision===ei.RECORD_AND_SAMPLED?ie.SAMPLED:ie.NONE,X={traceId:h,spanId:l,traceFlags:P,traceState:_};if(L.decision===ei.NOT_RECORD){Y.debug("Recording is off, propagating context in a non-recording span");var c=pe.wrapSpanContext(X);return c}var V=_o(Object.assign(A,L.attributes)),Se=new Jv(this,n,t,X,m,g,b,r.startTime,void 0,V);return Se},e.prototype.startActiveSpan=function(t,r,n,s){var i,o,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,o=n,a=s);var c=o??ut.active(),u=this.startSpan(t,i,c),l=pe.setSpan(c,u);return ut.with(l,a,void 0,u)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),oo=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OW=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,r,n=[];try{for(var s=oo(this._spanProcessors),i=s.next();!i.done;i=s.next()){var o=i.value;n.push(o.forceFlush())}}catch(a){t={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(c){jr(c||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},e.prototype.onStart=function(t,r){var n,s;try{for(var i=oo(this._spanProcessors),o=i.next();!o.done;o=i.next()){var a=o.value;a.onStart(t,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(t){var r,n;try{for(var s=oo(this._spanProcessors),i=s.next();!i.done;i=s.next()){var o=i.value;o.onEnd(t)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.shutdown=function(){var t,r,n=[];try{for(var s=oo(this._spanProcessors),i=s.next();!i.done;i=s.next()){var o=i.value;n.push(o.shutdown())}}catch(a){t={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return new Promise(function(a,c){Promise.all(n).then(function(){a()},c)})},e}(),rT=function(){function e(){}return e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),Sr;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(Sr||(Sr={}));var nT=function(){function e(t){t===void 0&&(t={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=PM({},Qv(),SW(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:ti.empty(),this.resource=ti.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var s=this._buildExporterFromEnv();if(s!==void 0){var i=new Qh(s);this.activeSpanProcessor=i}else this.activeSpanProcessor=new rT}return e.prototype.getTracer=function(t,r,n){var s=t+"@"+(r||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(s)||this._tracers.set(s,new tT({name:t,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(s)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return Y.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new OW(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),pe.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&ut.setGlobalContextManager(t.contextManager),t.propagator&&jt.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(s){var i,o=setTimeout(function(){s(new Error("Span processor did not completed within timeout period of "+t+" ms")),i=Sr.timeout},t);n.forceFlush().then(function(){clearTimeout(o),i!==Sr.timeout&&(i=Sr.resolved,s(i))}).catch(function(a){clearTimeout(o),i=Sr.error,s(a)})})});return new Promise(function(n,s){Promise.all(r).then(function(i){var o=i.filter(function(a){return a!==Sr.resolved});o.length>0?s(o):n()}).catch(function(i){return s([i])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()},e.prototype._getSpanExporter=function(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()},e.prototype._buildPropagatorFromEnv=function(){var t=this,r=Array.from(new Set(ot().OTEL_PROPAGATORS)),n=r.map(function(i){var o=t._getPropagator(i);return o||Y.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),o}),s=n.reduce(function(i,o){return o&&i.push(o),i},[]);if(s.length!==0)return r.length===1?s[0]:new ZI({propagators:s})},e.prototype._buildExporterFromEnv=function(){var t=ot().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var r=this._getSpanExporter(t);return r||Y.error('Exporter "'+t+'" requested through environment variable is unavailable.'),r}},e._registeredPropagators=new Map([["tracecontext",function(){return new gM}],["baggage",function(){return new bO}]]),e._registeredExporters=new Map,e}(),AW=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sT=function(){function e(){}return e.prototype.export=function(t,r){return this._sendSpans(t,r)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(t){var r;return{resource:{attributes:t.resource.attributes},traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(r=t.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:Id(t.startTime),duration:Id(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},e.prototype._sendSpans=function(t,r){var n,s;try{for(var i=AW(t),o=i.next();!o.done;o=i.next()){var a=o.value;console.dir(this._exportInfo(a),{depth:3})}}catch(c){n={error:c}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}if(r)return r({code:Yr.SUCCESS})},e}(),RW=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},IW=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},MW=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(t,r){var n;if(this._stopped)return r({code:Yr.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,IW([],RW(t),!1)),setTimeout(function(){return r({code:Yr.SUCCESS})},0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),PW=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(h){o(h)}}function c(l){try{u(n.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},$W=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},NW=function(){function e(t){this._exporter=t,this._shutdownOnce=new hg(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return PW(this,void 0,void 0,function(){return $W(this,function(t){switch(t.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return t.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){var r=this,n,s;if(!this._shutdownOnce.isCalled&&t.spanContext().traceFlags&ie.SAMPLED){var i=function(){return kM._export(r._exporter,[t]).then(function(a){var c;a.code!==Yr.SUCCESS&&jr((c=a.error)!==null&&c!==void 0?c:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){jr(a)})};if(t.resource.asyncAttributesPending){var o=(s=(n=t.resource).waitForAsyncAttributes)===null||s===void 0?void 0:s.call(n).then(function(){return o!=null&&r._unresolvedExports.delete(o),i()},function(a){return jr(a)});o!=null&&this._unresolvedExports.add(o)}else i()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}();const iT=Object.freeze(Object.defineProperty({__proto__:null,AlwaysOffSampler:mi,AlwaysOnSampler:Kr,BasicTracerProvider:nT,BatchSpanProcessor:Qh,ConsoleSpanExporter:sT,get ForceFlushState(){return Sr},InMemorySpanExporter:MW,NoopSpanProcessor:rT,ParentBasedSampler:Co,RandomIdGenerator:eT,get SamplingDecision(){return un},SimpleSpanProcessor:NW,Span:Jv,TraceIdRatioBasedSampler:Ml,Tracer:tT},Symbol.toStringTag,{value:"Module"})),oT=ns(iT);var Pl={exports:{}};const wW="2.0.0",aT=256,CW=Number.MAX_SAFE_INTEGER||9007199254740991,LW=16,kW=aT-6,xW=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var $c={MAX_LENGTH:aT,MAX_SAFE_COMPONENT_LENGTH:LW,MAX_SAFE_BUILD_LENGTH:kW,MAX_SAFE_INTEGER:CW,RELEASE_TYPES:xW,SEMVER_SPEC_VERSION:wW,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},lu={};const DW=typeof process=="object"&&lu&&lu.NODE_DEBUG&&/\bsemver\b/i.test(lu.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Nc=DW;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=$c,i=Nc;t=e.exports={};const o=t.re=[],a=t.safeRe=[],c=t.src=[],u=t.t={};let l=0;const h="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",s],[h,n]],g=b=>{for(const[A,L]of _)b=b.split(`${A}*`).join(`${A}{0,${L}}`).split(`${A}+`).join(`${A}{1,${L}}`);return b},m=(b,A,L)=>{const P=g(A),X=l++;i(b,X,A),u[b]=X,c[X]=A,o[X]=new RegExp(A,L?"g":void 0),a[X]=new RegExp(P,L?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),m("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${h}+`),m("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),m("FULL",`^${c[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),m("LOOSE",`^${c[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),m("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),m("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",c[u.COERCE],!0),m("COERCERTLFULL",c[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Pl,Pl.exports);var Xi=Pl.exports;const FW=Object.freeze({loose:!0}),UW=Object.freeze({}),jW=e=>e?typeof e!="object"?FW:e:UW;var Zh=jW;const J_=/^[0-9]+$/,cT=(e,t)=>{const r=J_.test(e),n=J_.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},BW=(e,t)=>cT(t,e);var uT={compareIdentifiers:cT,rcompareIdentifiers:BW};const ao=Nc,{MAX_LENGTH:Q_,MAX_SAFE_INTEGER:co}=$c,{safeRe:Z_,t:ep}=Xi,GW=Zh,{compareIdentifiers:In}=uT;let VW=class Lt{constructor(t,r){if(r=GW(r),t instanceof Lt){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Q_)throw new TypeError(`version is longer than ${Q_} characters`);ao("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Z_[ep.LOOSE]:Z_[ep.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>co||this.major<0)throw new TypeError("Invalid major version");if(this.minor>co||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>co||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<co)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ao("SemVer.compare",this.version,this.options,t),!(t instanceof Lt)){if(typeof t=="string"&&t===this.version)return 0;t=new Lt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Lt||(t=new Lt(t,this.options)),In(this.major,t.major)||In(this.minor,t.minor)||In(this.patch,t.patch)}comparePre(t){if(t instanceof Lt||(t=new Lt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(ao("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return In(n,s)}while(++r)}compareBuild(t){t instanceof Lt||(t=new Lt(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(ao("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return In(n,s)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),In(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var et=VW;const tp=et,HW=(e,t,r=!1)=>{if(e instanceof tp)return e;try{return new tp(e,t)}catch(n){if(!r)return null;throw n}};var Cs=HW;const zW=Cs,KW=(e,t)=>{const r=zW(e,t);return r?r.version:null};var qW=KW;const WW=Cs,XW=(e,t)=>{const r=WW(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var YW=XW;const rp=et,JW=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new rp(e instanceof rp?e.version:e,r).inc(t,n,s).version}catch{return null}};var QW=JW;const np=Cs,ZW=(e,t)=>{const r=np(e,null,!0),n=np(t,null,!0),s=r.compare(n);if(s===0)return null;const i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};var eX=ZW;const tX=et,rX=(e,t)=>new tX(e,t).major;var nX=rX;const sX=et,iX=(e,t)=>new sX(e,t).minor;var oX=iX;const aX=et,cX=(e,t)=>new aX(e,t).patch;var uX=cX;const lX=Cs,fX=(e,t)=>{const r=lX(e,t);return r&&r.prerelease.length?r.prerelease:null};var hX=fX;const sp=et,dX=(e,t,r)=>new sp(e,r).compare(new sp(t,r));var wt=dX;const _X=wt,pX=(e,t,r)=>_X(t,e,r);var gX=pX;const mX=wt,EX=(e,t)=>mX(e,t,!0);var SX=EX;const ip=et,yX=(e,t,r)=>{const n=new ip(e,r),s=new ip(t,r);return n.compare(s)||n.compareBuild(s)};var ed=yX;const vX=ed,TX=(e,t)=>e.sort((r,n)=>vX(r,n,t));var bX=TX;const OX=ed,AX=(e,t)=>e.sort((r,n)=>OX(n,r,t));var RX=AX;const IX=wt,MX=(e,t,r)=>IX(e,t,r)>0;var wc=MX;const PX=wt,$X=(e,t,r)=>PX(e,t,r)<0;var td=$X;const NX=wt,wX=(e,t,r)=>NX(e,t,r)===0;var lT=wX;const CX=wt,LX=(e,t,r)=>CX(e,t,r)!==0;var fT=LX;const kX=wt,xX=(e,t,r)=>kX(e,t,r)>=0;var rd=xX;const DX=wt,FX=(e,t,r)=>DX(e,t,r)<=0;var nd=FX;const UX=lT,jX=fT,BX=wc,GX=rd,VX=td,HX=nd,zX=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return UX(e,r,n);case"!=":return jX(e,r,n);case">":return BX(e,r,n);case">=":return GX(e,r,n);case"<":return VX(e,r,n);case"<=":return HX(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var hT=zX;const KX=et,qX=Cs,{safeRe:uo,t:lo}=Xi,WX=(e,t)=>{if(e instanceof KX)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?uo[lo.COERCEFULL]:uo[lo.COERCE]);else{const c=t.includePrerelease?uo[lo.COERCERTLFULL]:uo[lo.COERCERTL];let u;for(;(u=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return qX(`${n}.${s}.${i}${o}${a}`,t)};var XX=WX;class YX{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var JX=YX,fu,op;function Ct(){if(op)return fu;op=1;class e{constructor(v,k){if(k=n(k),v instanceof e)return v.loose===!!k.loose&&v.includePrerelease===!!k.includePrerelease?v:new e(v.raw,k);if(v instanceof s)return this.raw=v.value,this.set=[[v]],this.format(),this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=v.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(M=>!m(M[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const M of this.set)if(M.length===1&&b(M[0])){this.set=[M];break}}}this.format()}format(){return this.range=this.set.map(v=>v.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(v){const $=((this.options.includePrerelease&&_)|(this.options.loose&&g))+":"+v,M=r.get($);if(M)return M;const N=this.options.loose,F=N?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];v=v.replace(F,le(this.options.includePrerelease)),i("hyphen replace",v),v=v.replace(a[c.COMPARATORTRIM],u),i("comparator trim",v),v=v.replace(a[c.TILDETRIM],l),i("tilde trim",v),v=v.replace(a[c.CARETTRIM],h),i("caret trim",v);let H=v.split(" ").map(be=>L(be,this.options)).join(" ").split(/\s+/).map(be=>ve(be,this.options));N&&(H=H.filter(be=>(i("loose invalid filter",be,this.options),!!be.match(a[c.COMPARATORLOOSE])))),i("range list",H);const G=new Map,fe=H.map(be=>new s(be,this.options));for(const be of fe){if(m(be))return[be];G.set(be.value,be)}G.size>1&&G.has("")&&G.delete("");const it=[...G.values()];return r.set($,it),it}intersects(v,k){if(!(v instanceof e))throw new TypeError("a Range is required");return this.set.some($=>A($,k)&&v.set.some(M=>A(M,k)&&$.every(N=>M.every(F=>N.intersects(F,k)))))}test(v){if(!v)return!1;if(typeof v=="string")try{v=new o(v,this.options)}catch{return!1}for(let k=0;k<this.set.length;k++)if(We(this.set[k],v,this.options))return!0;return!1}}fu=e;const t=JX,r=new t,n=Zh,s=Cc(),i=Nc,o=et,{safeRe:a,t:c,comparatorTrimReplace:u,tildeTrimReplace:l,caretTrimReplace:h}=Xi,{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:g}=$c,m=O=>O.value==="<0.0.0-0",b=O=>O.value==="",A=(O,v)=>{let k=!0;const $=O.slice();let M=$.pop();for(;k&&$.length;)k=$.every(N=>M.intersects(N,v)),M=$.pop();return k},L=(O,v)=>(i("comp",O,v),O=Se(O,v),i("caret",O),O=X(O,v),i("tildes",O),O=ye(O,v),i("xrange",O),O=J(O,v),i("stars",O),O),P=O=>!O||O.toLowerCase()==="x"||O==="*",X=(O,v)=>O.trim().split(/\s+/).map(k=>V(k,v)).join(" "),V=(O,v)=>{const k=v.loose?a[c.TILDELOOSE]:a[c.TILDE];return O.replace(k,($,M,N,F,H)=>{i("tilde",O,$,M,N,F,H);let G;return P(M)?G="":P(N)?G=`>=${M}.0.0 <${+M+1}.0.0-0`:P(F)?G=`>=${M}.${N}.0 <${M}.${+N+1}.0-0`:H?(i("replaceTilde pr",H),G=`>=${M}.${N}.${F}-${H} <${M}.${+N+1}.0-0`):G=`>=${M}.${N}.${F} <${M}.${+N+1}.0-0`,i("tilde return",G),G})},Se=(O,v)=>O.trim().split(/\s+/).map(k=>Ue(k,v)).join(" "),Ue=(O,v)=>{i("caret",O,v);const k=v.loose?a[c.CARETLOOSE]:a[c.CARET],$=v.includePrerelease?"-0":"";return O.replace(k,(M,N,F,H,G)=>{i("caret",O,M,N,F,H,G);let fe;return P(N)?fe="":P(F)?fe=`>=${N}.0.0${$} <${+N+1}.0.0-0`:P(H)?N==="0"?fe=`>=${N}.${F}.0${$} <${N}.${+F+1}.0-0`:fe=`>=${N}.${F}.0${$} <${+N+1}.0.0-0`:G?(i("replaceCaret pr",G),N==="0"?F==="0"?fe=`>=${N}.${F}.${H}-${G} <${N}.${F}.${+H+1}-0`:fe=`>=${N}.${F}.${H}-${G} <${N}.${+F+1}.0-0`:fe=`>=${N}.${F}.${H}-${G} <${+N+1}.0.0-0`):(i("no pr"),N==="0"?F==="0"?fe=`>=${N}.${F}.${H}${$} <${N}.${F}.${+H+1}-0`:fe=`>=${N}.${F}.${H}${$} <${N}.${+F+1}.0-0`:fe=`>=${N}.${F}.${H} <${+N+1}.0.0-0`),i("caret return",fe),fe})},ye=(O,v)=>(i("replaceXRanges",O,v),O.split(/\s+/).map(k=>$e(k,v)).join(" ")),$e=(O,v)=>{O=O.trim();const k=v.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return O.replace(k,($,M,N,F,H,G)=>{i("xRange",O,$,M,N,F,H,G);const fe=P(N),it=fe||P(F),be=it||P(H),Ls=be;return M==="="&&Ls&&(M=""),G=v.includePrerelease?"-0":"",fe?M===">"||M==="<"?$="<0.0.0-0":$="*":M&&Ls?(it&&(F=0),H=0,M===">"?(M=">=",it?(N=+N+1,F=0,H=0):(F=+F+1,H=0)):M==="<="&&(M="<",it?N=+N+1:F=+F+1),M==="<"&&(G="-0"),$=`${M+N}.${F}.${H}${G}`):it?$=`>=${N}.0.0${G} <${+N+1}.0.0-0`:be&&($=`>=${N}.${F}.0${G} <${N}.${+F+1}.0-0`),i("xRange return",$),$})},J=(O,v)=>(i("replaceStars",O,v),O.trim().replace(a[c.STAR],"")),ve=(O,v)=>(i("replaceGTE0",O,v),O.trim().replace(a[v.includePrerelease?c.GTE0PRE:c.GTE0],"")),le=O=>(v,k,$,M,N,F,H,G,fe,it,be,Ls)=>(P($)?k="":P(M)?k=`>=${$}.0.0${O?"-0":""}`:P(N)?k=`>=${$}.${M}.0${O?"-0":""}`:F?k=`>=${k}`:k=`>=${k}${O?"-0":""}`,P(fe)?G="":P(it)?G=`<${+fe+1}.0.0-0`:P(be)?G=`<${fe}.${+it+1}.0-0`:Ls?G=`<=${fe}.${it}.${be}-${Ls}`:O?G=`<${fe}.${it}.${+be+1}-0`:G=`<=${G}`,`${k} ${G}`.trim()),We=(O,v,k)=>{for(let $=0;$<O.length;$++)if(!O[$].test(v))return!1;if(v.prerelease.length&&!k.includePrerelease){for(let $=0;$<O.length;$++)if(i(O[$].semver),O[$].semver!==s.ANY&&O[$].semver.prerelease.length>0){const M=O[$].semver;if(M.major===v.major&&M.minor===v.minor&&M.patch===v.patch)return!0}return!1}return!0};return fu}var hu,ap;function Cc(){if(ap)return hu;ap=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(l,h){if(h=r(h),l instanceof t){if(l.loose===!!h.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),o("comparator",l,h),this.options=h,this.loose=!!h.loose,this.parse(l),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(l){const h=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],_=l.match(h);if(!_)throw new TypeError(`Invalid comparator: ${l}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new a(_[2],this.options.loose):this.semver=e}toString(){return this.value}test(l){if(o("Comparator.test",l,this.options.loose),this.semver===e||l===e)return!0;if(typeof l=="string")try{l=new a(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,h){if(!(l instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(l.value,h).test(this.value):l.operator===""?l.value===""?!0:new c(this.value,h).test(l.semver):(h=r(h),h.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,h)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,h)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}hu=t;const r=Zh,{safeRe:n,t:s}=Xi,i=hT,o=Nc,a=et,c=Ct();return hu}const QX=Ct(),ZX=(e,t,r)=>{try{t=new QX(t,r)}catch{return!1}return t.test(e)};var Lc=ZX;const eY=Ct(),tY=(e,t)=>new eY(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var rY=tY;const nY=et,sY=Ct(),iY=(e,t,r)=>{let n=null,s=null,i=null;try{i=new sY(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new nY(n,r))}),n};var oY=iY;const aY=et,cY=Ct(),uY=(e,t,r)=>{let n=null,s=null,i=null;try{i=new cY(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new aY(n,r))}),n};var lY=uY;const du=et,fY=Ct(),cp=wc,hY=(e,t)=>{e=new fY(e,t);let r=new du("0.0.0");if(e.test(r)||(r=new du("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let i=null;s.forEach(o=>{const a=new du(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||cp(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||cp(r,i))&&(r=i)}return r&&e.test(r)?r:null};var dY=hY;const _Y=Ct(),pY=(e,t)=>{try{return new _Y(e,t).range||"*"}catch{return null}};var gY=pY;const mY=et,dT=Cc(),{ANY:EY}=dT,SY=Ct(),yY=Lc,up=wc,lp=td,vY=nd,TY=rd,bY=(e,t,r,n)=>{e=new mY(e,n),t=new SY(t,n);let s,i,o,a,c;switch(r){case">":s=up,i=vY,o=lp,a=">",c=">=";break;case"<":s=lp,i=TY,o=up,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yY(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const l=t.set[u];let h=null,_=null;if(l.forEach(g=>{g.semver===EY&&(g=new dT(">=0.0.0")),h=h||g,_=_||g,s(g.semver,h.semver,n)?h=g:o(g.semver,_.semver,n)&&(_=g)}),h.operator===a||h.operator===c||(!_.operator||_.operator===a)&&i(e,_.semver))return!1;if(_.operator===c&&o(e,_.semver))return!1}return!0};var sd=bY;const OY=sd,AY=(e,t,r)=>OY(e,t,">",r);var RY=AY;const IY=sd,MY=(e,t,r)=>IY(e,t,"<",r);var PY=MY;const fp=Ct(),$Y=(e,t,r)=>(e=new fp(e,r),t=new fp(t,r),e.intersects(t,r));var NY=$Y;const wY=Lc,CY=wt;var LY=(e,t,r)=>{const n=[];let s=null,i=null;const o=e.sort((l,h)=>CY(l,h,r));for(const l of o)wY(l,t,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const a=[];for(const[l,h]of n)l===h?a.push(l):!h&&l===o[0]?a.push("*"):h?l===o[0]?a.push(`<=${h}`):a.push(`${l} - ${h}`):a.push(`>=${l}`);const c=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t};const hp=Ct(),id=Cc(),{ANY:_u}=id,Vs=Lc,od=wt,kY=(e,t,r={})=>{if(e===t)return!0;e=new hp(e,r),t=new hp(t,r);let n=!1;e:for(const s of e.set){for(const i of t.set){const o=DY(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},xY=[new id(">=0.0.0-0")],dp=[new id(">=0.0.0")],DY=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===_u){if(t.length===1&&t[0].semver===_u)return!0;r.includePrerelease?e=xY:e=dp}if(t.length===1&&t[0].semver===_u){if(r.includePrerelease)return!0;t=dp}const n=new Set;let s,i;for(const g of e)g.operator===">"||g.operator===">="?s=_p(s,g,r):g.operator==="<"||g.operator==="<="?i=pp(i,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(s&&i){if(o=od(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const g of n){if(s&&!Vs(g,String(s),r)||i&&!Vs(g,String(i),r))return null;for(const m of t)if(!Vs(g,String(m),r))return!1;return!0}let a,c,u,l,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,_=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const g of t){if(l=l||g.operator===">"||g.operator===">=",u=u||g.operator==="<"||g.operator==="<=",s){if(_&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===_.major&&g.semver.minor===_.minor&&g.semver.patch===_.patch&&(_=!1),g.operator===">"||g.operator===">="){if(a=_p(s,g,r),a===g&&a!==s)return!1}else if(s.operator===">="&&!Vs(s.semver,String(g),r))return!1}if(i){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator==="<"||g.operator==="<="){if(c=pp(i,g,r),c===g&&c!==i)return!1}else if(i.operator==="<="&&!Vs(i.semver,String(g),r))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||_||h)},_p=(e,t,r)=>{if(!e)return t;const n=od(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},pp=(e,t,r)=>{if(!e)return t;const n=od(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var FY=kY;const pu=Xi,gp=$c,UY=et,mp=uT,jY=Cs,BY=qW,GY=YW,VY=QW,HY=eX,zY=nX,KY=oX,qY=uX,WY=hX,XY=wt,YY=gX,JY=SX,QY=ed,ZY=bX,e4=RX,t4=wc,r4=td,n4=lT,s4=fT,i4=rd,o4=nd,a4=hT,c4=XX,u4=Cc(),l4=Ct(),f4=Lc,h4=rY,d4=oY,_4=lY,p4=dY,g4=gY,m4=sd,E4=RY,S4=PY,y4=NY,v4=LY,T4=FY;var b4={parse:jY,valid:BY,clean:GY,inc:VY,diff:HY,major:zY,minor:KY,patch:qY,prerelease:WY,compare:XY,rcompare:YY,compareLoose:JY,compareBuild:QY,sort:ZY,rsort:e4,gt:t4,lt:r4,eq:n4,neq:s4,gte:i4,lte:o4,cmp:a4,coerce:c4,Comparator:u4,Range:l4,satisfies:f4,toComparators:h4,maxSatisfying:d4,minSatisfying:_4,minVersion:p4,validRange:g4,outside:m4,gtr:E4,ltr:S4,intersects:y4,simplifyRange:v4,subset:T4,SemVer:UY,re:pu.re,src:pu.src,tokens:pu.t,SEMVER_SPEC_VERSION:gp.SEMVER_SPEC_VERSION,RELEASE_TYPES:gp.RELEASE_TYPES,compareIdentifiers:mp.compareIdentifiers,rcompareIdentifiers:mp.rcompareIdentifiers},Ep=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_T=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},pT="uber-trace-id",$l="uberctx",O4=function(){function e(t){typeof t=="string"?(this._jaegerTraceHeader=t,this._jaegerBaggageHeaderPrefix=$l):(this._jaegerTraceHeader=(t==null?void 0:t.customTraceHeader)||pT,this._jaegerBaggageHeaderPrefix=(t==null?void 0:t.customBaggageHeaderPrefix)||$l)}return e.prototype.inject=function(t,r,n){var s,i,o=pe.getSpanContext(t),a=jt.getBaggage(t);if(o&&fn(t)===!1){var c="0"+(o.traceFlags||ie.NONE).toString(16);n.set(r,this._jaegerTraceHeader,o.traceId+":"+o.spanId+":0:"+c)}if(a)try{for(var u=Ep(a.getAllEntries()),l=u.next();!l.done;l=u.next()){var h=_T(l.value,2),_=h[0],g=h[1];n.set(r,this._jaegerBaggageHeaderPrefix+"-"+_,encodeURIComponent(g.value))}}catch(m){s={error:m}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(s)throw s.error}}},e.prototype.extract=function(t,r,n){var s,i,o=this,a,c=n.get(r,this._jaegerTraceHeader),u=Array.isArray(c)?c[0]:c,l=n.keys(r).filter(function(L){return L.startsWith(o._jaegerBaggageHeaderPrefix+"-")}).map(function(L){var P=n.get(r,L);return{key:L.substring(o._jaegerBaggageHeaderPrefix.length+1),value:Array.isArray(P)?P[0]:P}}),h=t;if(typeof u=="string"){var _=R4(u);_&&(h=pe.setSpanContext(h,_))}if(l.length===0)return h;var g=(a=jt.getBaggage(t))!==null&&a!==void 0?a:jt.createBaggage();try{for(var m=Ep(l),b=m.next();!b.done;b=m.next()){var A=b.value;A.value!==void 0&&(g=g.setEntry(A.key,{value:decodeURIComponent(A.value)}))}}catch(L){s={error:L}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}return h=jt.setBaggage(h,g),h},e.prototype.fields=function(){return[this._jaegerTraceHeader]},e}(),A4=/^[0-9a-f]{1,2}$/i;function R4(e){var t=decodeURIComponent(e).split(":");if(t.length!==4)return null;var r=_T(t,4),n=r[0],s=r[1],i=r[3],o=n.padStart(32,"0"),a=s.padStart(16,"0"),c=A4.test(i)?parseInt(i,16)&1:1;return{traceId:o,spanId:a,isRemote:!0,traceFlags:c}}const I4=Object.freeze(Object.defineProperty({__proto__:null,JaegerPropagator:O4,UBER_BAGGAGE_HEADER_PREFIX:$l,UBER_TRACE_ID_HEADER:pT},Symbol.toStringTag,{value:"Module"})),M4=ns(I4);Object.defineProperty(Rc,"__esModule",{value:!0});Rc.NodeTracerProvider=void 0;const Sp=Kv,fo=hW,gT=oT,P4=b4,$4=M4;class mT extends gT.BasicTracerProvider{constructor(t={}){super(t)}register(t={}){if(t.contextManager===void 0){const r=P4.gte(process.version,"14.8.0")?Sp.AsyncLocalStorageContextManager:Sp.AsyncHooksContextManager;t.contextManager=new r,t.contextManager.enable()}super.register(t)}}Rc.NodeTracerProvider=mT;mT._registeredPropagators=new Map([...gT.BasicTracerProvider._registeredPropagators,["b3",()=>new fo.B3Propagator({injectEncoding:fo.B3InjectEncoding.SINGLE_HEADER})],["b3multi",()=>new fo.B3Propagator({injectEncoding:fo.B3InjectEncoding.MULTI_HEADER})],["jaeger",()=>new $4.JaegerPropagator]]);(function(e){var t=yr&&yr.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=yr&&yr.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Rc,e),r(oT,e)})(zv);const Lo=Symbol.for("@effect/opentelemetry/Tracer/OtelSpan"),N4={internal:Zt.INTERNAL,client:Zt.CLIENT,server:Zt.SERVER,producer:Zt.PRODUCER,consumer:Zt.CONSUMER};var A6;class ET{constructor(t,r,n,s,i,o,a,c){d(this,"name");d(this,"parent");d(this,"context");d(this,"links");d(this,"kind");d(this,A6);d(this,"_tag","Span");d(this,"span");d(this,"spanId");d(this,"traceId");d(this,"attributes",new Map);d(this,"sampled");d(this,"status");this.name=n,this.parent=s,this.context=i,this.links=o,this.kind=c,this[Lo]=Lo;const u=t.active();this.span=r.startSpan(n,{startTime:gu(a),links:o.length>0?o.map(h=>({context:vT(h.span),attributes:Tp(h.attributes)})):void 0,kind:N4[this.kind]},s._tag==="Some"?yT(u,s.value,i):pe.deleteSpan(u));const l=this.span.spanContext();this.spanId=l.spanId,this.traceId=l.traceId,this.status={_tag:"Started",startTime:a},this.sampled=(l.traceFlags&ie.SAMPLED)===ie.SAMPLED}attribute(t,r){this.span.setAttribute(t,TT(r)),this.attributes.set(t,r)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime},r._tag==="Success"?this.span.setStatus({code:Ur.OK}):S2(r.cause)?(this.span.setStatus({code:Ur.OK,message:L_(r.cause)}),this.span.setAttribute("span.label"," Interrupted"),this.span.setAttribute("status.interrupted",!0)):this.span.setStatus({code:Ur.ERROR,message:L_(r.cause)}),this.span.end(gu(t))}event(t,r,n){this.span.addEvent(t,n?Tp(n):void 0,gu(r))}}A6=Lo;const ad=Xe("@effect/opentelemetry/Tracer/TracerProvider"),cd=Xe("@effect/opentelemetry/Tracer/Tracer"),ud=gn(cd,e=>jk({span(t,r,n,s,i,o){return new ET(ut,e,t,r,n,s,i,o)},context(t,r){const n=r.getFiberRef(Sq).unsafeMap.get(Uk.key);return n===void 0?t():ut.with(yT(ut.active(),n),t)}})),Sa=Xe("@effect/opentelemetry/traceFlags"),Ei=Xe("@effect/opentelemetry/traceState"),w4=e=>{let t=yt();return e.traceFlags&&(t=He(t,Sa,e.traceFlags)),typeof e.traceState=="string"?t=mt(D4(e.traceState),{onNone:()=>t,onSome:r=>He(t,Ei,r)}):e.traceState&&(t=He(t,Ei,e.traceState)),{_tag:"ExternalSpan",traceId:e.traceId,spanId:e.spanId,sampled:e.traceFlags?(e.traceFlags&ie.SAMPLED)===ie.SAMPLED:!0,context:t}},C4=$s(_3,e=>Lo in e?rs(e.span):bc(new v2)),L4=xv(ad,()=>pe.getTracerProvider()),ld=Ns(cd,$s(d3(Cr,ad),([e,t])=>pr(()=>t.getTracer(e.attributes["service.name"],e.attributes["service.version"])))),ST=ld.pipe(mn(L4)),k4=qi(gn(ud,Xh)).pipe(mn(ST)),x4=qi(gn(ud,Xh)).pipe(mn(ld)),yp=1000000000n,gu=e=>[Number(e/yp),Number(e%yp)],D4=wP(Up),yT=(e,t,r)=>t instanceof ET?pe.setSpan(e,t.span):pe.setSpanContext(e,vT(t,r)),vT=(e,t)=>({spanId:e.spanId,traceId:e.traceId,isRemote:e._tag==="ExternalSpan",traceFlags:rt(t?vp(e,t,Sa):It(e.context,Sa),()=>ie.SAMPLED),traceState:tt(t?vp(e,t,Ei):It(e.context,Ei))}),vp=(e,t,r)=>$P(It(t,r),()=>It(e.context,r)),Tp=e=>Object.entries(e).reduce((t,[r,n])=>(t[r]=TT(n),t),{}),TT=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:typeof e=="bigint"?Number(e):F4(e),F4=e=>{try{return JSON.stringify(e,null,2)}catch{return String(e)}},U4=ud,j4=w4,B4=C4,fd=x4,G4=k4,V4=ld,H4=ST,hd=ad,z4=cd,K4=Sa,q4=Ei,W4=Object.freeze(Object.defineProperty({__proto__:null,TraceFlags:K4,TraceState:q4,Tracer:z4,TracerProvider:hd,currentOtelSpan:B4,layer:fd,layerGlobal:G4,layerGlobalTracer:H4,layerTracer:V4,make:U4,makeExternalSpan:j4},Symbol.toStringTag,{value:"Module"})),bT=(e,t)=>Kh(hd,$s(Cr,r=>Ac(pr(()=>{const n=new zv.NodeTracerProvider({...t??void 0,resource:r});return Array.isArray(e)?e.forEach(s=>n.addSpanProcessor(s)):n.addSpanProcessor(e),n}),n=>Hh(Oc(()=>n.shutdown()))))),X4=e=>qi(gn(Lv(e)?e:pr(e),t=>{const r=t.resource===void 0?Bv():Yh(t.resource),n=t.spanProcessor&&!(Array.isArray(t.spanProcessor)&&t.spanProcessor.length===0)?fd.pipe(mn(bT(t.spanProcessor,t.tracerConfig))):Rl,s=t.metricReader&&!(Array.isArray(t.metricReader)&&t.metricReader.length===0)?Jh(()=>t.metricReader):Rl;return zh(n,s).pipe(Wh(r))})),Y4=Gv,OT=Object.freeze(Object.defineProperty({__proto__:null,layer:X4,layerEmpty:Y4,layerTracerProvider:bT},Symbol.toStringTag,{value:"Module"}));var J4=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Q4=function(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Z4=function(){function e(){this._enabled=!1,this._currentContext=kr}return e.prototype._bindFunction=function(t,r){t===void 0&&(t=kr);var n=this,s=function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.with(t,function(){return r.apply(i,o)})};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),s},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,r){return t===void 0&&(t=this.active()),typeof r=="function"?this._bindFunction(t,r):r},e.prototype.disable=function(){return this._currentContext=kr,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=kr,this)},e.prototype.with=function(t,r,n){for(var s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];var o=this._currentContext;this._currentContext=t||kr;try{return r.call.apply(r,Q4([n],J4(s),!1))}finally{this._currentContext=o}},e}(),e5=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t5=function(e){e5(t,e);function t(r){r===void 0&&(r={});var n=e.call(this,r)||this;if(r.contextManager)throw"contextManager should be defined in register method not in constructor";if(r.propagator)throw"propagator should be defined in register method not in constructor";return n}return t.prototype.register=function(r){r===void 0&&(r={}),r.contextManager===void 0&&(r.contextManager=new Z4),r.contextManager&&r.contextManager.enable(),e.prototype.register.call(this,r)},t}(nT);const AT=(e,t)=>Kh(hd,$s(Cr,r=>Ac(pr(()=>{const n=new t5({...t??void 0,resource:r});return Array.isArray(e)?e.forEach(s=>n.addSpanProcessor(s)):n.addSpanProcessor(e),n}),n=>Hh(Oc(()=>n.shutdown()))))),r5=e=>qi(gn(Lv(e)?e:pr(e),t=>{const r=Yh(t.resource),n=t.spanProcessor&&!(Array.isArray(t.spanProcessor)&&t.spanProcessor.length===0)?fd.pipe(mn(AT(t.spanProcessor,t.tracerConfig))):Al(K_),s=t.metricReader&&!(Array.isArray(t.metricReader)&&t.metricReader.length===0)?Jh(()=>t.metricReader):Al(K_);return zh(n,s).pipe(Wh(r))})),n5=Object.freeze(Object.defineProperty({__proto__:null,layer:r5,layerTracerProvider:AT},Symbol.toStringTag,{value:"Module"})),s5=Object.freeze(Object.defineProperty({__proto__:null,Metrics:Nq,NodeSdk:OT,Resource:bq,Tracer:W4,WebSdk:n5},Symbol.toStringTag,{value:"Module"})),i5=Object.freeze(Object.defineProperty({__proto__:null,BatchSpanProcessor:Qh,Console:Eq,ConsoleSpanExporter:sT,Context:T$,Exit:Fx,Fiber:qB,Layer:CH,ManagedRuntime:Tq,NodeSdk:OT,Schedule:kK,Scope:rU,acquireRelease:Ac,acquireUseRelease:VV,addFinalizer:HV,all:CV,async:LV,catchAll:FV,catchTag:UV,catchTags:jV,die:kV,either:JV,fail:bc,flatMap:$s,flow:GM,fork:KV,gen:ha,isLeft:rr,isRight:Nn,log:r3,logDebug:s3,logError:o3,logInfo:i3,logTrace:n3,map:gn,mapError:GV,match:e3,matchEffect:t3,never:xV,orElse:a3,orElseFail:c3,pipe:p,promise:Oc,provide:WV,provideService:XV,provideServiceEffect:YV,repeat:ZV,runPromise:u3,runPromiseExit:l3,runSync:f3,runSyncExit:h3,scoped:zV,sleep:qV,succeed:rs,suspend:DV,sync:pr,tap:QV,tryPromise:BV,withSpan:p3},Symbol.toStringTag,{value:"Module"}));let RT=class IT extends Jg("Service/UserRepository")(){static stub(){return Nl}static layer(){return Ns(IT,Nl)}};const Nl=pr(()=>{const e=new Map;return RT.of({findById:t=>{const r=e.get(t);return r?rs(r):bc("User Not Found")},save:t=>(e.set(t.name,t),rs(t))})}),o5=Object.freeze(Object.defineProperty({__proto__:null,UserRepository:RT,make:Nl},Symbol.toStringTag,{value:"Module"}));class qr extends kv("Service/UUIDProvider")(){static live(){let t=0;return pr(()=>qr.of({generate:()=>(t++,rs(`${t}`))}))}static layer(){return Ns(qr,qr.live())}}class Si extends kv("Service/UserRepository")(){static stub(){return wl}static layer(){return Ns(Si,wl)}static live(){return p(Si.layer(),mn(qr.layer()))}}const wl=ha(function*(){const e=new Map,t=yield*qr;return Si.of({findById:r=>{const n=e.get(r);return n?rs(n):bc("User Not Found")},save:({name:r})=>ha(function*(){const s={id:yield*t.generate(),name:r};return e.set(s.id,s),s})})}),a5=Object.freeze(Object.defineProperty({__proto__:null,UUIDProvider:qr,UserRepository:Si,make:wl},Symbol.toStringTag,{value:"Module"})),bp={"./Result":YT,"./Functions":QT,"./Effect":i5,"./Users":o5,"./UsersV2":a5,"@effect/opentelemetry":s5,"@opentelemetry/sdk-trace-base":iT},c5=[],u5=$T(async()=>{const e={javascript:ho,js:ho,typescript:ho,ts:ho},{shiki:t,themes:r}=await ko(()=>import("./slidev/shiki-cVhjGAe3.js"),__vite__mapDeps([0,1,2,3,4,5,6])),n=await t,s=(o,a,c={})=>n.codeToHtml(o,{lang:a,theme:typeof r=="string"?r:NT.value?r.dark||"vitesse-dark":r.light||"vitesse-light",...c}),i=async(o,a,c)=>{try{const u=e[a];if(!u)throw new Error(`Runner for language "${a}" not found`);return await u(o,{options:c,highlight:s,run:async(l,h)=>await i(l,h,c)})}catch(u){return console.error(u),{error:`${u}`}}};for(const o of c5){const a=await o(e);Object.assign(e,a)}return{highlight:s,run:i}});async function l5(e){const t=[],r={},n=function(...c){t.push(c.map(i))};r.info=r.log=r.debug=r.warn=r.error=n,r.clear=()=>t.length=0;const s=Object.assign({},console,r);try{const c=`return async (console, __slidev_import) => {
      ${a(e)}
    }`;await new Function(c)()(s,u=>{const l=bp[u];if(!l)throw new Error(`Module not found: ${u}.
Available modules: ${Object.keys(bp).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return l})}catch(c){return{error:String(c)}}function i(c){return typeof c=="string"?{text:c}:{text:o(c),highlightLang:"javascript"}}function o(c){var l;let u="";if(c instanceof Error)u=`Error: ${JSON.stringify(c.message)}`;else if(c==null||typeof c=="symbol")u=String(c);else if(Array.isArray(c))u=`[${c.map(o).join(", ")}]`;else if(c instanceof Set){const h=[...c];u=`Set (${c.size}) {${h.map(o).join(", ")}}`}else if(c instanceof Map){const h=[...c.entries()];u=`Map (${c.size}) {${h.map(([_,g])=>`${o(_)} => ${o(g)}`).join(", ")}}`}else if(c instanceof RegExp)u=c.toString();else if(typeof c=="string")u=JSON.stringify(c);else if(typeof c=="object"){const h=((l=c.constructor)==null?void 0:l.name)??"",_=h&&h==="Object"?"":h;u=(_?`${_}: `:"")+JSON.stringify(c,(m,b)=>b===void 0?"__undefined__":b,2).replace(/"__undefined__"/g,"undefined"),u=String(u)}else u=String(c);return u}function a(c){return c=c.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),c=c.replace("export {};",""),c}return t}let Hs;async function ho(e){Hs??(Hs=await ko(()=>import("./monaco/bundled-types-B2pegga4.js").then(r=>r.t),__vite__mapDeps([1,2,3,4]))),e=Hs.transpileModule(e,{compilerOptions:{module:Hs.ModuleKind.ESNext,target:Hs.ScriptTarget.ES2022},transformers:{after:[f5]}}).outputText;const t=/import\s*\((.+)\)/g;return e=e.replace(t,(r,n)=>`__slidev_import(${n})`),await l5(e)}function f5(e){const{factory:t}=e,{isImportDeclaration:r,isNamedImports:n,NodeFlags:s}=Hs;return i=>{var a,c;const o=[...i.statements];for(let u=0;u<o.length;u++){const l=o[u];if(!r(l))continue;let h;const _=(a=l.importClause)==null?void 0:a.namedBindings,g=[];if((c=l.importClause)!=null&&c.name&&g.push(t.createBindingElement(void 0,t.createIdentifier("default"),l.importClause.name)),_)if(n(_)){for(const b of _.elements)g.push(t.createBindingElement(void 0,b.propertyName,b.name));h=t.createObjectBindingPattern(g)}else h=t.createIdentifier(_.name.text);else h=t.createObjectBindingPattern(g);const m=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(h,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[l.moduleSpecifier])))],s.Const));o[u]=m}return t.updateSourceFile(i,o)}}const h5=Cl({__name:"DomElement",props:{element:{type:null,required:!0}},setup(e){const t=e,r=pt();return wT(()=>{r.value&&r.value.appendChild(t.element)}),(n,s)=>(Oe(),je("div",{ref_key:"container",ref:r},null,512))}}),d5=Ll(h5,[["__file","/home/addamsson/projects/effect-workshop/node_modules/.pnpm/@slidev+client@0.49.3_postcss@8.4.38_vite@5.2.11/node_modules/@slidev/client/internals/DomElement.vue"]]),_5={key:0,class:"text-sm text-center opacity-50"},p5={key:1,class:"text-sm text-center opacity-50"},g5={key:2,class:"text-sm text-center opacity-50"},m5=["innerHTML"],E5={key:1,class:"text-red-500"},S5={key:3,class:"output-line"},y5=["innerHTML"],v5={key:2,class:"separator"},T5={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},b5=Cl({__name:"CodeRunner",props:{modelValue:{type:String,required:!0},lang:{type:String,required:!0},autorun:{type:[Boolean,String],required:!0},height:{type:String,required:!1},showOutputAt:{type:null,required:!1},highlightOutput:{type:Boolean,required:!0},runnerOptions:{type:Object,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,n=t,{isPrintMode:s}=Pp(),i=CT(r,"modelValue",n),{$renderContext:o,$clicksContext:a}=$p(),c=Ap(()=>!["slide","presenter"].includes(o.value)),u=s.value?"once":r.autorun,l=pt(u),h=LT(),_=pt(0),g=pt(),m=pt(r.showOutputAt);if(r.showOutputAt){const A=Su();Rp(()=>{const L=a.calculate(r.showOutputAt);L?(a.register(A,L),kT(()=>{m.value=!L.isActive.value})):m.value=!1}),xT(()=>a.unregister(A))}const b=Op(200,async()=>{if(c.value)return;const{highlight:A,run:L}=await u5();g.value=A;const P=setTimeout(()=>{l.value=!0},500);h.value=kc(await L(i.value,r.lang,r.runnerOptions??{})),_.value+=1,l.value=!1,clearTimeout(P)});return u==="once"?b():u&&DT(i,b,{immediate:!0}),(A,L)=>{var X;const P=VT;return Oe(),je(ks,null,[FT(mu("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Mp({height:r.height}),"data-waitfor":".slidev-runner-output"},[c.value?(Oe(),je("div",_5,' Code is disabled in the "'+xc(Mn(o))+'" mode ',1)):l.value?(Oe(),je("div",p5," Running... ")):(X=h.value)!=null&&X.length?(Oe(),je("div",{key:`run-${_.value}`,class:"slidev-runner-output"},[(Oe(!0),je(ks,null,Sd(h.value,(V,Se)=>(Oe(),je(ks,{key:Se},["html"in V?(Oe(),je("div",{key:0,innerHTML:V.html},null,8,m5)):"error"in V?(Oe(),je("div",E5,xc(V.error),1)):"element"in V?(Oe(),Ip(d5,{key:2,element:V.element},null,8,["element"])):(Oe(),je("div",S5,[(Oe(!0),je(ks,null,Sd(Mn(kc)(V),(Ue,ye)=>(Oe(),je(ks,{key:ye},[Ue.highlightLang&&g.value?(Oe(),je("span",{key:0,class:"highlighted",innerHTML:g.value(Ue.text,Ue.highlightLang)},null,8,y5)):(Oe(),je("span",{key:1,class:jT(Ue.class)},xc(Ue.text),3)),ye<Mn(kc)(V).length-1?(Oe(),je("span",v5,",")):Eu("v-if",!0)],64))),128))]))],64))),128))])):(Oe(),je("div",g5," Click the play button to run the code "))],4),[[UT,!m.value]]),Mn(i).trim()?(Oe(),je("div",T5,[yd(HT,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:Mn(b)},{default:BT(()=>[yd(P)]),_:1},8,["onClick"])])):Eu("v-if",!0)],64)}}}),O5=Ll(b5,[["__file","/home/addamsson/projects/effect-workshop/node_modules/.pnpm/@slidev+client@0.49.3_postcss@8.4.38_vite@5.2.11/node_modules/@slidev/client/internals/CodeRunner.vue"]]),A5={class:"relative slidev-monaco-container"},R5=Cl({__name:"Monaco",props:{codeLz:{type:String,required:!0,default:""},diffLz:{type:String,required:!1},lang:{type:String,required:!1,default:"typescript"},readonly:{type:Boolean,required:!1,default:!1},lineNumbers:{type:String,required:!1,default:"off"},height:{type:[Number,String],required:!1,default:"initial"},editorOptions:{type:null,required:!1},ata:{type:Boolean,required:!1,default:!0},runnable:{type:Boolean,required:!1,default:!1},autorun:{type:[Boolean,String],required:!1,default:!0},showOutputAt:{type:null,required:!1},outputHeight:{type:String,required:!1},highlightOutput:{type:Boolean,required:!1,default:!0},runnerOptions:{type:Object,required:!1}},setup(e){const t=e,r=pt(vd.decompressFromBase64(t.codeLz).trimEnd()),n=t.diffLz&&pt(vd.decompressFromBase64(t.diffLz).trimEnd()),i={ts:"typescript",js:"javascript"}[t.lang]??t.lang,a={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[t.lang]??t.lang,c=pt(),u=pt(),l=pt(0),h=pt(),_=Ap(()=>t.height==="auto"?`${l.value}px`:t.height==="initial"?`${h.value}px`:t.height),g=pt(),{$page:m,$renderContext:b}=$p(),{currentSlideNo:A}=Pp(),L=GT(()=>Math.abs(m.value-A.value)<=1&&g.value,P=>{["slide","presenter"].includes(b.value)?P():setTimeout(P,5e3)});return Rp(async()=>{const{default:P}=await ko(()=>import("./monaco/bundled-types-B2pegga4.js").then(J=>J.q),__vite__mapDeps([1,2,3,4])),{ata:X,monaco:V}=await P(),Se=V.editor.createModel(r.value,i,V.Uri.parse(`file:///${Su()}.${a}`));Se.onDidChangeContent(()=>r.value=Se.getValue());const Ue={automaticLayout:!0,readOnly:t.readonly,lineNumbers:t.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,...t.editorOptions};let ye;if(n){const J=V.editor.createModel(n.value,i,V.Uri.parse(`file:///${Su()}.${a}`));J.onDidChangeContent(()=>r.value=Se.getValue());const ve=V.editor.createDiffEditor(u.value,{renderOverviewRuler:!1,...Ue});ve.setModel({original:Se,modified:J});const le=ve.getOriginalEditor(),We=ve.getModifiedEditor(),O=()=>{const v=Math.max(le.getContentHeight(),We.getContentHeight())+4;h.value??(h.value=v),l.value=v,Dc(()=>ve.layout())};le.onDidContentSizeChange(O),We.onDidContentSizeChange(O),ye=We}else{const J=V.editor.create(u.value,{model:Se,lineDecorationsWidth:0,...Ue});J.onDidContentSizeChange(ve=>{const le=ve.contentHeight+4;h.value??(h.value=le),l.value=le,Dc(()=>ye.layout())}),ye=J}g.value=()=>{L(),ko(()=>import("./monaco/bundled-types-B2pegga4.js").then(J=>J.v),__vite__mapDeps([1,2,3,4])),t.ata&&(X(ye.getValue()),ye.onDidChangeModelContent(Op(1e3,()=>{X(ye.getValue())})))};const $e=ye.layoutContentWidget.bind(ye);ye.layoutContentWidget=J=>{$e(J),J.getId()==="editor.contrib.resizableContentHoverWidget"&&(J._resizableNode.domNode.style.transform=J._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},Dc(()=>V.editor.remeasureFonts())}),(P,X)=>(Oe(),je("div",A5,[mu("div",{ref_key:"outer",ref:c,class:"relative slidev-monaco-container-inner",style:Mp({height:_.value})},[mu("div",{ref_key:"container",ref:u,class:"absolute inset-0.5"},null,512)],4),t.runnable?(Oe(),Ip(O5,{key:0,modelValue:r.value,"onUpdate:modelValue":X[0]||(X[0]=V=>r.value=V),lang:Mn(i),autorun:t.autorun,"show-output-at":t.showOutputAt,height:t.outputHeight,"highlight-output":t.highlightOutput,"runner-options":t.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):Eu("v-if",!0)]))}}),x6=Ll(R5,[["__file","/home/addamsson/projects/effect-workshop/node_modules/.pnpm/@slidev+client@0.49.3_postcss@8.4.38_vite@5.2.11/node_modules/@slidev/client/builtin/Monaco.vue"]]);export{x6 as _};
